(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){function r(t){if(t)return o(t)}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){function r(t,e){this.name="AuthTokenExpiredError",this.message=t,this.expiry=e,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function o(t){this.name="AuthTokenInvalidError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function i(t,e){this.name="AuthTokenNotBeforeError",this.message=t,this.date=e,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function s(t){this.name="AuthTokenError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function a(t,e){this.name="SilentMiddlewareBlockedError",this.message=t,this.type=e,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function c(t){this.name="InvalidActionError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function u(t){this.name="InvalidArgumentsError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function h(t){this.name="InvalidOptionsError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function l(t){this.name="InvalidMessageError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function p(t,e){this.name="SocketProtocolError",this.message=t,this.code=e,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function f(t){this.name="ServerProtocolError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function d(t){this.name="HTTPServerError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function y(t){this.name="ResourceLimitError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function v(t){this.name="TimeoutError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function g(t,e){this.name="BadConnectionError",this.message=t,this.type=e,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function m(t){this.name="BrokerError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function b(t,e){this.name="ProcessExitError",this.message=t,this.code=e,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function E(t){this.name="UnknownError",this.message=t,Error.captureStackTrace&&!k?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}var w=n(14),k=function(){return!this}();r.prototype=Object.create(Error.prototype),o.prototype=Object.create(Error.prototype),i.prototype=Object.create(Error.prototype),s.prototype=Object.create(Error.prototype),a.prototype=Object.create(Error.prototype),c.prototype=Object.create(Error.prototype),u.prototype=Object.create(Error.prototype),h.prototype=Object.create(Error.prototype),l.prototype=Object.create(Error.prototype),p.prototype=Object.create(Error.prototype),f.prototype=Object.create(Error.prototype),d.prototype=Object.create(Error.prototype),y.prototype=Object.create(Error.prototype),v.prototype=Object.create(Error.prototype),g.prototype=Object.create(Error.prototype),m.prototype=Object.create(Error.prototype),b.prototype=Object.create(Error.prototype),E.prototype=Object.create(Error.prototype),t.exports={AuthTokenExpiredError:r,AuthTokenInvalidError:o,AuthTokenNotBeforeError:i,AuthTokenError:s,SilentMiddlewareBlockedError:a,InvalidActionError:c,InvalidArgumentsError:u,InvalidOptionsError:h,InvalidMessageError:l,SocketProtocolError:p,ServerProtocolError:f,HTTPServerError:d,ResourceLimitError:y,TimeoutError:v,BadConnectionError:g,BrokerError:m,ProcessExitError:b,UnknownError:E},t.exports.socketProtocolErrorStatuses={1001:"Socket was disconnected",1002:"A WebSocket protocol error was encountered",1003:"Server terminated socket because it received invalid data",1005:"Socket closed without status code",1006:"Socket hung up",1007:"Message format was incorrect",1008:"Encountered a policy violation",1009:"Message was too big to process",1010:"Client ended the connection because the server did not comply with extension requirements",1011:"Server encountered an unexpected fatal condition",4e3:"Server ping timed out",4001:"Client pong timed out",4002:"Server failed to sign auth token",4003:"Failed to complete handshake",4004:"Client failed to save auth token",4005:"Did not receive #handshake from client before timeout",4006:"Failed to bind socket to message broker",4007:"Client connection establishment timed out"},t.exports.socketProtocolIgnoreStatuses={1e3:"Socket closed normally",1001:"Socket hung up"};var T={domain:1,domainEmitter:1,domainThrown:1};t.exports.dehydrateError=function(t,e){var n;if(t&&"object"==typeof t){n={message:t.message},e&&(n.stack=t.stack);for(var r in t)T[r]||(n[r]=t[r])}else n="function"==typeof t?"[function "+(t.name||"anonymous")+"]":t;return w(n)},t.exports.hydrateError=function(t){var e=null;if(null!=t)if("object"==typeof t){e=new Error(t.message);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}else e=t;return e},t.exports.decycle=w},function(t,e,n){(function(e,r){var o=n(1),i=n(13).SCChannel,s=(n(5).Response,n(15).AuthEngine),a=n(16),c=n(17).SCTransport,u=n(6),h=n(21),l=n(23),p=n(25),f=n(2),d=f.InvalidArgumentsError,y=f.InvalidMessageError,v=f.SocketProtocolError,g=f.TimeoutError,m=f.BadConnectionError,b="undefined"!=typeof window,E=function(t){var n=this;o.call(this),this.id=null,this.state=this.CLOSED,this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null,this.pendingReconnect=!1,this.pendingReconnectTimeout=null,this.preparingPendingSubscriptions=!1,this.connectTimeout=t.connectTimeout,this.ackTimeout=t.ackTimeout,this.channelPrefix=t.channelPrefix||null,this.disconnectOnUnload=null==t.disconnectOnUnload||t.disconnectOnUnload,this.authTokenName=t.authTokenName,this.pingTimeout=this.ackTimeout;var r=Math.pow(2,31)-1,i=function(t){if(n[t]>r)throw new d("The "+t+" value provided exceeded the maximum amount allowed")};if(i("connectTimeout"),i("ackTimeout"),i("pingTimeout"),this._localEvents={connect:1,connectAbort:1,disconnect:1,message:1,error:1,raw:1,fail:1,kickOut:1,subscribe:1,unsubscribe:1,subscribeStateChange:1,authStateChange:1,authenticate:1,deauthenticate:1,removeAuthToken:1,subscribeRequest:1},this.connectAttempts=0,this._emitBuffer=new h,this.channels={},this.options=t,this._cid=1,this.options.callIdGenerator=function(){return n._cid++},this.options.autoReconnect){null==this.options.autoReconnectOptions&&(this.options.autoReconnectOptions={});var c=this.options.autoReconnectOptions;null==c.initialDelay&&(c.initialDelay=1e4),null==c.randomness&&(c.randomness=1e4),null==c.multiplier&&(c.multiplier=1.5),null==c.maxDelay&&(c.maxDelay=6e4)}null==this.options.subscriptionRetryOptions&&(this.options.subscriptionRetryOptions={}),this.options.authEngine?this.auth=this.options.authEngine:this.auth=new s,this.options.codecEngine?this.codec=this.options.codecEngine:this.codec=a,this.options.path=this.options.path.replace(/\/$/,"")+"/",this.options.query=t.query||{},"string"==typeof this.options.query&&(this.options.query=u.parse(this.options.query)),this.options.autoConnect&&this.connect(),this._channelEmitter=new o,b&&this.disconnectOnUnload&&e.addEventListener&&(this._unloadHandler=function(){n.disconnect()},e.addEventListener("beforeunload",this._unloadHandler,!1))};E.prototype=Object.create(o.prototype),E.CONNECTING=E.prototype.CONNECTING=c.prototype.CONNECTING,E.OPEN=E.prototype.OPEN=c.prototype.OPEN,E.CLOSED=E.prototype.CLOSED=c.prototype.CLOSED,E.AUTHENTICATED=E.prototype.AUTHENTICATED="authenticated",E.UNAUTHENTICATED=E.prototype.UNAUTHENTICATED="unauthenticated",E.PENDING=E.prototype.PENDING="pending",E.ignoreStatuses=f.socketProtocolIgnoreStatuses,E.errorStatuses=f.socketProtocolErrorStatuses,E.prototype._privateEventHandlerMap={"#publish":function(t){var e=this._undecorateChannelName(t.channel);this.isSubscribed(e,!0)&&this._channelEmitter.emit(e,t.data)},"#kickOut":function(t){var e=this._undecorateChannelName(t.channel),n=this.channels[e];n&&(o.prototype.emit.call(this,"kickOut",t.message,e),n.emit("kickOut",t.message,e),this._triggerChannelUnsubscribe(n))},"#setAuthToken":function(t,e){var n=this;if(t){var r=function(r){r?(e.error(r),n._onSCError(r)):(n._changeToAuthenticatedState(t.token),e.end())};this.auth.saveToken(this.authTokenName,t.token,{},r)}else e.error(new y("No token data provided by #setAuthToken event"))},"#removeAuthToken":function(t,e){var n=this;this.auth.removeToken(this.authTokenName,function(t,r){t?(e.error(t),n._onSCError(t)):(o.prototype.emit.call(n,"removeAuthToken",r),n._changeToUnauthenticatedStateAndClearTokens(),e.end())})},"#disconnect":function(t){this.transport.close(t.code,t.data)}},E.prototype.getState=function(){return this.state},E.prototype.getBytesReceived=function(){return this.transport.getBytesReceived()},E.prototype.deauthenticate=function(t){var e=this;this.auth.removeToken(this.authTokenName,function(n,r){n?e._onSCError(n):(o.prototype.emit.call(e,"removeAuthToken",r),e.state!=e.CLOSED&&e.emit("#removeAuthToken"),e._changeToUnauthenticatedStateAndClearTokens()),t&&t(n)})},E.prototype.connect=E.prototype.open=function(){var t=this;this.state==this.CLOSED&&(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this.state=this.CONNECTING,o.prototype.emit.call(this,"connecting"),this.transport&&this.transport.off(),this.transport=new c(this.auth,this.codec,this.options),this.transport.on("open",function(e){t.state=t.OPEN,t._onSCOpen(e)}),this.transport.on("error",function(e){t._onSCError(e)}),this.transport.on("close",function(e,n){t.state=t.CLOSED,t._onSCClose(e,n)}),this.transport.on("openAbort",function(e,n){t.state=t.CLOSED,t._onSCClose(e,n,!0)}),this.transport.on("event",function(e,n,r){t._onSCEvent(e,n,r)}))},E.prototype.reconnect=function(){this.disconnect(),this.connect()},E.prototype.disconnect=function(t,e){if("number"!=typeof(t=t||1e3))throw new d("If specified, the code argument must be a number");this.state==this.OPEN||this.state==this.CONNECTING?this.transport.close(t,e):(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef))},E.prototype.destroy=function(){this._unloadHandler&&e.removeEventListener("beforeunload",this._unloadHandler,!1),this.disconnect()},E.prototype._changeToUnauthenticatedStateAndClearTokens=function(){if(this.authState!=this.UNAUTHENTICATED){var t=this.authState;this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null;var e={oldState:t,newState:this.authState};o.prototype.emit.call(this,"authStateChange",e),t==this.AUTHENTICATED&&o.prototype.emit.call(this,"deauthenticate"),o.prototype.emit.call(this,"authTokenChange",this.signedAuthToken)}},E.prototype._changeToAuthenticatedState=function(t){if(this.signedAuthToken=t,this.authToken=this._extractAuthTokenData(t),this.authState!=this.AUTHENTICATED){var e=this.authState;this.authState=this.AUTHENTICATED;var n={oldState:e,newState:this.authState,signedAuthToken:t,authToken:this.authToken};this.preparingPendingSubscriptions||this.processPendingSubscriptions(),o.prototype.emit.call(this,"authStateChange",n),o.prototype.emit.call(this,"authenticate",t)}o.prototype.emit.call(this,"authTokenChange",t)},E.prototype.decodeBase64=function(t){var n;if(void 0===r)n=e.atob?e.atob(t):l.decode(t);else{n=new r(t,"base64").toString("utf8")}return n},E.prototype.encodeBase64=function(t){var n;if(void 0===r)n=e.btoa?e.btoa(t):l.encode(t);else{n=new r(t,"utf8").toString("base64")}return n},E.prototype._extractAuthTokenData=function(t){var e=(t||"").split("."),n=e[1];if(null!=n){var r=n;try{return r=this.decodeBase64(r),JSON.parse(r)}catch(t){return r}}return null},E.prototype.getAuthToken=function(){return this.authToken},E.prototype.getSignedAuthToken=function(){return this.signedAuthToken},E.prototype.authenticate=function(t,e){var n=this;this.emit("#authenticate",t,function(r,o){o&&null!=o.isAuthenticated?o.authError&&(o.authError=f.hydrateError(o.authError)):o={isAuthenticated:n.authState,authError:null},r?("BadConnectionError"!=r.name&&"TimeoutError"!=r.name&&n._changeToUnauthenticatedStateAndClearTokens(),e&&e(r,o)):n.auth.saveToken(n.authTokenName,t,{},function(r){r&&n._onSCError(r),o.isAuthenticated?n._changeToAuthenticatedState(t):n._changeToUnauthenticatedStateAndClearTokens(),e&&e(r,o)})})},E.prototype._tryReconnect=function(t){var e,n=this,r=this.connectAttempts++,o=this.options.autoReconnectOptions;if(null==t||r>0){var i=Math.round(o.initialDelay+(o.randomness||0)*Math.random());e=Math.round(i*Math.pow(o.multiplier,r))}else e=t;e>o.maxDelay&&(e=o.maxDelay),clearTimeout(this._reconnectTimeoutRef),this.pendingReconnect=!0,this.pendingReconnectTimeout=e,this._reconnectTimeoutRef=setTimeout(function(){n.connect()},e)},E.prototype._onSCOpen=function(t){var e=this;this.preparingPendingSubscriptions=!0,t?(this.id=t.id,this.pingTimeout=t.pingTimeout,this.transport.pingTimeout=this.pingTimeout,t.isAuthenticated?this._changeToAuthenticatedState(t.authToken):this._changeToUnauthenticatedStateAndClearTokens()):this._changeToUnauthenticatedStateAndClearTokens(),this.connectAttempts=0,this.options.autoSubscribeOnConnect&&this.processPendingSubscriptions(),o.prototype.emit.call(this,"connect",t,function(){e.processPendingSubscriptions()}),this._flushEmitBuffer()},E.prototype._onSCError=function(t){var e=this;setTimeout(function(){if(e.listeners("error").length<1)throw t;o.prototype.emit.call(e,"error",t)},0)},E.prototype._suspendSubscriptions=function(){var t,e;for(var n in this.channels)this.channels.hasOwnProperty(n)&&(t=this.channels[n],e=t.state==t.SUBSCRIBED||t.state==t.PENDING?t.PENDING:t.UNSUBSCRIBED,this._triggerChannelUnsubscribe(t,e))},E.prototype._abortAllPendingEventsDueToBadConnection=function(t){for(var e,n=this._emitBuffer.head;n;){e=n.next;var r=n.data;clearTimeout(r.timeout),delete r.timeout,n.detach(),n=e;var o=r.callback;if(o){delete r.callback;var i="Event '"+r.event+"' was aborted due to a bad connection",s=new m(i,t);o.call(r,s,r)}}},E.prototype._onSCClose=function(t,e,n){var r=this;if(this.id=null,this.transport&&this.transport.off(),this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this._suspendSubscriptions(),this._abortAllPendingEventsDueToBadConnection(n?"connectAbort":"disconnect"),this.options.autoReconnect&&(4e3==t||4001==t||1005==t?this._tryReconnect(0):1e3!=t&&t<4500&&this._tryReconnect()),n?o.prototype.emit.call(r,"connectAbort",t,e):o.prototype.emit.call(r,"disconnect",t,e),!E.ignoreStatuses[t]){var i;i=e?"Socket connection failed: "+e:"Socket connection failed for unknown reasons";var s=new v(E.errorStatuses[t]||i,t);this._onSCError(s)}},E.prototype._onSCEvent=function(t,e,n){var r=this._privateEventHandlerMap[t];r?r.call(this,e,n):o.prototype.emit.call(this,t,e,function(){n&&n.callback.apply(n,arguments)})},E.prototype.decode=function(t){return this.transport.decode(t)},E.prototype.encode=function(t){return this.transport.encode(t)},E.prototype._flushEmitBuffer=function(){for(var t,e=this._emitBuffer.head;e;){t=e.next;var n=e.data;e.detach(),this.transport.emitObject(n),e=t}},E.prototype._handleEventAckTimeout=function(t,e){e&&e.detach(),delete t.timeout;var n=t.callback;if(n){delete t.callback;var r=new g("Event response for '"+t.event+"' timed out");n.call(t,r,t)}},E.prototype._emit=function(t,e,n){var r=this;this.state==this.CLOSED&&this.connect();var o={event:t,callback:n},i=new h.Item;this.options.cloneData?o.data=p(e):o.data=e,i.data=o,o.timeout=setTimeout(function(){r._handleEventAckTimeout(o,i)},this.ackTimeout),this._emitBuffer.append(i),this.state==this.OPEN&&this._flushEmitBuffer()},E.prototype.send=function(t){this.transport.send(t)},E.prototype.emit=function(t,e,n){null==this._localEvents[t]?this._emit(t,e,n):o.prototype.emit.call(this,t,e)},E.prototype.publish=function(t,e,n){var r={channel:this._decorateChannelName(t),data:e};this.emit("#publish",r,n)},E.prototype._triggerChannelSubscribe=function(t,e){var n=t.name;if(t.state!=t.SUBSCRIBED){var r=t.state;t.state=t.SUBSCRIBED;var i={channel:n,oldState:r,newState:t.state,subscriptionOptions:e};t.emit("subscribeStateChange",i),t.emit("subscribe",n,e),o.prototype.emit.call(this,"subscribeStateChange",i),o.prototype.emit.call(this,"subscribe",n,e)}},E.prototype._triggerChannelSubscribeFail=function(t,e,n){var r=e.name,i=!e.waitForAuth||this.authState==this.AUTHENTICATED;e.state!=e.UNSUBSCRIBED&&i&&(e.state=e.UNSUBSCRIBED,e.emit("subscribeFail",t,r,n),o.prototype.emit.call(this,"subscribeFail",t,r,n))},E.prototype._cancelPendingSubscribeCallback=function(t){null!=t._pendingSubscriptionCid&&(this.transport.cancelPendingResponse(t._pendingSubscriptionCid),delete t._pendingSubscriptionCid)},E.prototype._decorateChannelName=function(t){return this.channelPrefix&&(t=this.channelPrefix+t),t},E.prototype._undecorateChannelName=function(t){return this.channelPrefix&&0==t.indexOf(this.channelPrefix)?t.replace(this.channelPrefix,""):t},E.prototype._trySubscribe=function(t){var e=this,n=!t.waitForAuth||this.authState==this.AUTHENTICATED;if(this.state==this.OPEN&&!this.preparingPendingSubscriptions&&null==t._pendingSubscriptionCid&&n){var r={noTimeout:!0},i={channel:this._decorateChannelName(t.name)};t.waitForAuth&&(r.waitForAuth=!0,i.waitForAuth=r.waitForAuth),t.data&&(i.data=t.data),t._pendingSubscriptionCid=this.transport.emit("#subscribe",i,r,function(n){delete t._pendingSubscriptionCid,n?e._triggerChannelSubscribeFail(n,t,i):e._triggerChannelSubscribe(t,i)}),o.prototype.emit.call(this,"subscribeRequest",t.name,i)}},E.prototype.subscribe=function(t,e){var n=this.channels[t];return n?e&&n.setOptions(e):(n=new i(t,this,e),this.channels[t]=n),n.state==n.UNSUBSCRIBED&&(n.state=n.PENDING,this._trySubscribe(n)),n},E.prototype._triggerChannelUnsubscribe=function(t,e){var n=t.name,r=t.state;if(t.state=e||t.UNSUBSCRIBED,this._cancelPendingSubscribeCallback(t),r==t.SUBSCRIBED){var i={channel:n,oldState:r,newState:t.state};t.emit("subscribeStateChange",i),t.emit("unsubscribe",n),o.prototype.emit.call(this,"subscribeStateChange",i),o.prototype.emit.call(this,"unsubscribe",n)}},E.prototype._tryUnsubscribe=function(t){if(this.state==this.OPEN){var e={noTimeout:!0};this._cancelPendingSubscribeCallback(t);var n=this._decorateChannelName(t.name);this.transport.emit("#unsubscribe",n,e)}},E.prototype.unsubscribe=function(t){var e=this.channels[t];e&&e.state!=e.UNSUBSCRIBED&&(this._triggerChannelUnsubscribe(e),this._tryUnsubscribe(e))},E.prototype.channel=function(t,e){var n=this.channels[t];return n||(n=new i(t,this,e),this.channels[t]=n),n},E.prototype.destroyChannel=function(t){var e=this.channels[t];e.unwatch(),e.unsubscribe(),delete this.channels[t]},E.prototype.subscriptions=function(t){var e,n=[];for(var r in this.channels)this.channels.hasOwnProperty(r)&&(e=this.channels[r],(t?e&&(e.state==e.SUBSCRIBED||e.state==e.PENDING):e&&e.state==e.SUBSCRIBED)&&n.push(r));return n},E.prototype.isSubscribed=function(t,e){var n=this.channels[t];return e?!!n&&(n.state==n.SUBSCRIBED||n.state==n.PENDING):!!n&&n.state==n.SUBSCRIBED},E.prototype.processPendingSubscriptions=function(){var t=this;this.preparingPendingSubscriptions=!1;var e=[];for(var n in this.channels)if(this.channels.hasOwnProperty(n)){var r=this.channels[n];r.state==r.PENDING&&e.push(r)}e.sort(function(t,e){var n=t.priority||0,r=e.priority||0;return n>r?-1:n<r?1:0}),e.forEach(function(e){t._trySubscribe(e)})},E.prototype.watch=function(t,e){if("function"!=typeof e)throw new d("No handler function was provided");this._channelEmitter.on(t,e)},E.prototype.unwatch=function(t,e){e?this._channelEmitter.removeListener(t,e):this._channelEmitter.removeAllListeners(t)},E.prototype.watchers=function(t){return this._channelEmitter.listeners(t)},t.exports=E}).call(e,n(0),n(4).Buffer)},function(t,e,n){"use strict";(function(t){function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=i.prototype):(null===t&&(t=new i(e)),t.length=e),t}function i(t,e,n){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return s(this,t,e,n)}function s(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,r):"string"==typeof e?h(t,e,n):f(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e,n,r){return a(e),e<=0?o(t,e):void 0!==n?"string"==typeof r?o(t,e).fill(n,r):o(t,e).fill(n):o(t,e)}function u(t,e){if(a(e),t=o(t,e<0?0:0|d(e)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(e,n);t=o(t,r);var s=t.write(e,n);return s!==r&&(t=t.slice(0,s)),t}function l(t,e){var n=e.length<0?0:0|d(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),i.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=i.prototype):t=l(t,e),t}function f(t,e){if(i.isBuffer(e)){var n=0|d(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||K(e.length)?o(t,0):l(t,e);if("Buffer"===e.type&&Z(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),i.alloc(+t)}function v(t,e){if(i.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(t).length;default:if(r)return q(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:E(t,e,n,r,o);if("number"==typeof e)return e&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):E(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function E(t,e,n,r,o){function i(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}var u;if(o){var h=-1;for(u=n;u<a;u++)if(i(t,u)===i(e,-1===h?0:u-h)){if(-1===h&&(h=u),u-h+1===c)return h*s}else-1!==h&&(u-=u-h),h=-1}else for(n+c>a&&(n=a-c),u=n;u>=0;u--){for(var l=!0,p=0;p<c;p++)if(i(t,u+p)!==i(e,p)){l=!1;break}if(l)return u}return-1}function w(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function k(t,e,n,r){return W(q(e,t.length-n),t,n,r)}function T(t,e,n,r){return W(z(e),t,n,r)}function S(t,e,n,r){return T(t,e,n,r)}function _(t,e,n,r){return W(J(e),t,n,r)}function A(t,e,n,r){return W($(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?V.fromByteArray(t):V.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i=t[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var c,u,h,l;switch(a){case 1:i<128&&(s=i);break;case 2:c=t[o+1],128==(192&c)&&(l=(31&i)<<6|63&c)>127&&(s=l);break;case 3:c=t[o+1],u=t[o+2],128==(192&c)&&128==(192&u)&&(l=(15&i)<<12|(63&c)<<6|63&u)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:c=t[o+1],u=t[o+2],h=t[o+3],128==(192&c)&&128==(192&u)&&128==(192&h)&&(l=(15&i)<<18|(63&c)<<12|(63&u)<<6|63&h)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=a}return O(r)}function O(t){var e=t.length;if(e<=Q)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Q));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=H(t[i]);return o}function B(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function x(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function U(t,e,n,r,o,s){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function j(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,o){return o||j(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,n,r,23,4),n+4}function Y(t,e,n,r,o){return o||j(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,n,r,52,8),n+8}function F(t){if(t=G(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function $(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function J(t){return V.toByteArray(F(t))}function W(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function K(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Injam <info@injam.io> <https://injam.io>
 * @license  MIT
 */
var V=n(10),X=n(11),Z=n(12);e.Buffer=i,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),i.poolSize=8192,i._augment=function(t){return t.__proto__=i.prototype,t},i.from=function(t,e,n){return s(null,t,e,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(t,e,n){return c(null,t,e,n)},i.allocUnsafe=function(t){return u(null,t)},i.allocUnsafeSlow=function(t){return u(null,t)},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,s=Math.min(n,r);o<s;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},i.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):g.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,r,o){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var s=o-r,a=n-e,c=Math.min(s,a),u=this.slice(r,o),h=t.slice(e,n),l=0;l<c;++l)if(u[l]!==h[l]){s=u[l],a=h[l];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return k(this,t,e,n);case"ascii":return T(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(i.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=i.prototype;else{var o=e-t;r=new i(o,void 0);for(var s=0;s<o;++s)r[s]=this[s+t]}return r},i.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},i.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},i.prototype.readUInt8=function(t,e){return e||x(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return e||x(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return e||x(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},i.prototype.readInt8=function(t,e){return e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){e||x(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){e||x(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return e||x(t,4,this.length),X.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return e||x(t,4,this.length),X.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return e||x(t,8,this.length),X.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return e||x(t,8,this.length),X.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){U(this,t,e,n,Math.pow(2,8*n)-1,0)}var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){U(this,t,e,n,Math.pow(2,8*n)-1,0)}var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,1,255,0),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);U(this,t,e,n,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);U(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,1,127,-128),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||U(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},i.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return Y(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return Y(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,s=r-n;if(this===t&&n<e&&e<r)for(o=s-1;o>=0;--o)t[o+e]=this[o+n];else if(s<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},i.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=i.isBuffer(t)?t:q(new i(t,r).toString()),c=a.length;for(s=0;s<n-e;++s)this[s+e]=a[s%c]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(0))},function(t,e,n){var r=n(2),o=r.InvalidActionError,i=function(t,e){this.socket=t,this.id=e,this.sent=!1};i.prototype._respond=function(t){if(this.sent)throw new o("Response "+this.id+" has already been sent");this.sent=!0,this.socket.send(this.socket.encode(t))},i.prototype.end=function(t){if(this.id){var e={rid:this.id};void 0!==t&&(e.data=t),this._respond(e)}},i.prototype.error=function(t,e){if(this.id){var n=r.dehydrateError(t),o={rid:this.id,error:n};void 0!==e&&(o.data=e),this._respond(o)}},i.prototype.callback=function(t,e){t?this.error(t,e):this.end(e)},t.exports.Response=i},function(t,e,n){"use strict";e.decode=e.parse=n(18),e.encode=e.stringify=n(19)},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(8),a=n(9),c=n(27).EventEmitter;t.Injam=function(n){function c(t){e(this,c);var n=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t));return n.credentials=t,n}return o(c,n),i(c,[{key:"connect",value:function(){var e=this;t.Socket=a.connect({hostname:s.host,secure:s.secure,port:s.port,path:s.path,authTokenName:"Injam.authToken"}),t.batchPositions=[],Socket.on("connecting",function(){e.emit("connecting")}).on("connect",function(t){e.emit("connected"),t.isAuthenticated||(e.emit("unauthorized"),e.credentials.package_name=e.getPackageName(),Socket.emit("login",e.credentials,function(t){}))}).on("toSubscribe",function(t){e.subscribe(t)}).on("subscribe",function(t){e.emit("subscribed",t)}).on("subscribeFail",function(t){e.emit("subscribeFail",t)}).on("unsubscribe",function(t){e.emit("unsubscribed",t)}).on("authenticate",function(t){e.emit("authenticated",t)}).on("deauthenticate",function(){e.emit("unauthorized"),Socket.emit("login",e.credentials,function(t){})}).on("disconnect",function(t){e.emit("disconnected",t)}).on("close",function(t){e.emit("closed",t)})}},{key:"watchLocation",value:function(e,n){e=void 0===e||e,n=void 0!==n&&n;var r=this,o={timeout:5e3,enableHighAccuracy:!0,maximumAge:1/0};e?(t.watchLocationInterval=setInterval(function(){t.getCurrentPosition=navigator.geolocation.getCurrentPosition(r.setBatchPositions,this.geolocationError,o)},500),t.emitNewPositionInterval=setInterval(function(){t.batchPositions.length&&(r.emit("newPosition",{coordinates:h(t.batchPositions)}),t.batchPositions=[])},5e3)):n&&n>=3e3?t.emitNewPositionInterval=setInterval(function(){t.getCurrentPosition=navigator.geolocation.getCurrentPosition(function(t){r.emit("newPosition",{lat:t.coords.latitude,lng:t.coords.longitude})},this.geolocationError,o)},n):t.watchPosition=navigator.geolocation.watchPosition(function(t){r.emit("newPosition",{lat:t.coords.latitude,lng:t.coords.longitude})},this.geolocationError,o)}},{key:"stopWatchLocation",value:function(){navigator.geolocation.clearWatch(t.watchPosition),clearInterval(t.watchLocationInterval),clearInterval(t.emitNewPositionInterval)}},{key:"updateLocation",value:function(t){Socket.emit("newPosition",t)}},{key:"subscribe",value:function(t){var e=this;Socket.subscribe(t,{waitForAuth:!0}).watch(function(n){e.watchData(t,n)})}},{key:"unsubscribe",value:function(t){Socket.unsubscribe(t)}},{key:"watch",value:function(t){Socket.watch(function(e){$this.watchData(t,e)})}},{key:"unwatch",value:function(t){Socket.unwatch(t)}},{key:"isSubscribed",value:function(t,e){e=void 0===e||e,Socket.isSubscribed(t,e)}},{key:"publish",value:function(t){Socket.publish(this.credentials.physical_id,t)}},{key:"watchData",value:function(t,e){var n=this;if(u(e)?(e=JSON.parse(e),e.channel=t):e={channel:t,data:e},e.location)if(e.location.coordinates){var r=e.location.coordinates;delete e.location.coordinates,function t(){setTimeout(function(){++o<r.length&&(e.location.lat=r[o].lat,e.location.lng=r[o].lng,n.emit("tracking",e),t())},500)}();var o=0}else n.emit("tracking",e);else n.emit("rawData",e)}},{key:"geolocationError",value:function(t){t.length>0&&console.log("Geo Error: "+JSON.stringify(t))}},{key:"setBatchPositions",value:function(e){var n={lat:e.coords.latitude,lng:e.coords.longitude};t.batchPositions.push(n),t.batchPositions.length>50&&(t.batchPositions=t.batchPositions.slice(t.batchPositions.length-50,t.batchPositions.length))}},{key:"disconnect",value:function(){Socket.destroy(),this.removeAllListeners("connecting"),this.removeAllListeners("connected"),this.removeAllListeners("authenticated"),this.removeAllListeners("unauthorized"),this.removeAllListeners("subscribed"),this.removeAllListeners("subscribeFail"),this.removeAllListeners("unsubscribed"),this.removeAllListeners("rawData"),this.removeAllListeners("tracking"),this.removeAllListeners("newPosition"),this.removeAllListeners("disconnected"),this.removeAllListeners("closed"),clearInterval(t.watchLocationInterval),clearInterval(t.emitNewPositionInterval)}},{key:"getPackageName",value:function(){return t.location&&""!=t.location.hostname?t.location.hostname:"localhost"}},{key:"clearToken",value:function(){t.localStorage.removeItem("Injam.authToken")}}]),c}(c);var u=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},h=function(t,e){for(var n={},r=0,o=t.length;r<o;r++)n[t[r][e]]||(n[t[r][e]]=t[r]);var i=[];for(var s in n)i.push(n[s]);return i};Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return-1;if(n=+e||0,1/0===Math.abs(n)&&(n=0),n>=o)return-1;for(n=Math.max(0<=n?n:o-Math.abs(n),0);n<o;){if(n in r&&r[n]===t)return n;n++}return-1})}).call(e,n(0))},function(t,e){t.exports={host:"core.injam.io",port:8080,path:"/s",secure:!0}},function(t,e,n){var r=n(3),o=n(26);t.exports.SCSocketCreator=o,t.exports.SCSocket=r,t.exports.Emitter=n(1),t.exports.connect=function(t){return o.connect(t)},t.exports.destroy=function(t){return o.destroy(t)},t.exports.connections=o.connections,t.exports.version="7.0.2"},function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function o(t){return 3*t.length/4-r(t)}function i(t){var e,n,o,i,s,a=t.length;i=r(t),s=new l(3*a/4-i),n=i>0?a-4:a;var c=0;for(e=0;e<n;e+=4)o=h[t.charCodeAt(e)]<<18|h[t.charCodeAt(e+1)]<<12|h[t.charCodeAt(e+2)]<<6|h[t.charCodeAt(e+3)],s[c++]=o>>16&255,s[c++]=o>>8&255,s[c++]=255&o;return 2===i?(o=h[t.charCodeAt(e)]<<2|h[t.charCodeAt(e+1)]>>4,s[c++]=255&o):1===i&&(o=h[t.charCodeAt(e)]<<10|h[t.charCodeAt(e+1)]<<4|h[t.charCodeAt(e+2)]>>2,s[c++]=o>>8&255,s[c++]=255&o),s}function s(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function a(t,e,n){for(var r,o=[],i=e;i<n;i+=3)r=(t[i]<<16)+(t[i+1]<<8)+t[i+2],o.push(s(r));return o.join("")}function c(t){for(var e,n=t.length,r=n%3,o="",i=[],s=0,c=n-r;s<c;s+=16383)i.push(a(t,s,s+16383>c?c:s+16383));return 1===r?(e=t[n-1],o+=u[e>>2],o+=u[e<<4&63],o+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],o+=u[e>>10],o+=u[e>>4&63],o+=u[e<<2&63],o+="="),i.push(o),i.join("")}e.byteLength=o,e.toByteArray=i,e.fromByteArray=c;for(var u=[],h=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=p.length;f<d;++f)u[f]=p[f],h[p.charCodeAt(f)]=f;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,h=-7,l=n?o-1:0,p=n?-1:1,f=t[e+l];for(l+=p,i=f&(1<<-h)-1,f>>=-h,h+=a;h>0;i=256*i+t[e+l],l+=p,h-=8);for(s=i&(1<<-h)-1,i>>=-h,h+=r;h>0;s=256*s+t[e+l],l+=p,h-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),i-=u}return(f?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,a,c,u=8*i-o-1,h=(1<<u)-1,l=h>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),e+=s+l>=1?p/c:p*Math.pow(2,1-l),e*c>=2&&(s++,c/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*c-1)*Math.pow(2,o),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;t[n+f]=255&a,f+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;t[n+f]=255&s,f+=d,s/=256,u-=8);t[n+f-d]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r=n(1),o=function(t,e,n){r.call(this),this.PENDING="pending",this.SUBSCRIBED="subscribed",this.UNSUBSCRIBED="unsubscribed",this.name=t,this.state=this.UNSUBSCRIBED,this.client=e,this.options=n||{},this.setOptions(this.options)};o.prototype=Object.create(r.prototype),o.prototype.setOptions=function(t){t||(t={}),this.waitForAuth=t.waitForAuth||!1,void 0!==t.data&&(this.data=t.data)},o.prototype.getState=function(){return this.state},o.prototype.subscribe=function(t){this.client.subscribe(this.name,t)},o.prototype.unsubscribe=function(){this.client.unsubscribe(this.name)},o.prototype.isSubscribed=function(t){return this.client.isSubscribed(this.name,t)},o.prototype.publish=function(t,e){this.client.publish(this.name,t,e)},o.prototype.watch=function(t){this.client.watch(this.name,t)},o.prototype.unwatch=function(t){this.client.unwatch(this.name,t)},o.prototype.watchers=function(){return this.client.watchers(this.name)},o.prototype.destroy=function(){this.client.destroyChannel(this.name)},t.exports.SCChannel=o},function(t,e){t.exports=function(t){var e=[],n=[];return function t(r,o){var i,s,a;if(!("object"!=typeof r||null===r||r instanceof Boolean||r instanceof Date||r instanceof Number||r instanceof RegExp||r instanceof String)){for(i=0;i<e.length;i+=1)if(e[i]===r)return{$ref:n[i]};if(e.push(r),n.push(o),"[object Array]"===Object.prototype.toString.apply(r))for(a=[],i=0;i<r.length;i+=1)a[i]=t(r[i],o+"["+i+"]");else{a={};for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=t(r[s],o+"["+JSON.stringify(s)+"]"))}return a}return r}(t,"$")}},function(t,e,n){(function(e){var n=function(){this._internalStorage={},this.isLocalStorageEnabled=this._checkLocalStorageEnabled()};n.prototype._checkLocalStorageEnabled=function(){var t;try{e.localStorage,e.localStorage.setItem("__scLocalStorageTest",1),e.localStorage.removeItem("__scLocalStorageTest")}catch(e){t=e}return!t},n.prototype.saveToken=function(t,n,r,o){this.isLocalStorageEnabled&&e.localStorage?e.localStorage.setItem(t,n):this._internalStorage[t]=n,o&&o(null,n)},n.prototype.removeToken=function(t,n){var r;this.loadToken(t,function(t,e){r=e}),this.isLocalStorageEnabled&&e.localStorage?e.localStorage.removeItem(t):delete this._internalStorage[t],n&&n(null,r)},n.prototype.loadToken=function(t,n){var r;r=this.isLocalStorageEnabled&&e.localStorage?e.localStorage.getItem(t):this._internalStorage[t]||null,n(null,r)},t.exports.AuthEngine=n}).call(e,n(0))},function(t,e,n){(function(e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=/^[ \n\r\t]*[{\[]/,o=function(t){for(var e=new Uint8Array(t),r=e.length,o="",i=0;i<r;i+=3)o+=n[e[i]>>2],o+=n[(3&e[i])<<4|e[i+1]>>4],o+=n[(15&e[i+1])<<2|e[i+2]>>6],o+=n[63&e[i+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},i=function(t,n){if(e.ArrayBuffer&&n instanceof e.ArrayBuffer)return{base64:!0,data:o(n)};if(e.Buffer){if(n instanceof e.Buffer)return{base64:!0,data:n.toString("base64")};if(n&&"Buffer"===n.type&&Array.isArray(n.data)){var r;return r=e.Buffer.from?e.Buffer.from(n.data):new e.Buffer(n.data),{base64:!0,data:r.toString("base64")}}}return n};t.exports.decode=function(t){if(null==t)return null;if("#1"===t||"#2"===t)return t;var e=t.toString();if(!r.test(e))return e;try{return JSON.parse(e)}catch(t){}return e},t.exports.encode=function(t){return"#1"===t||"#2"===t?t:JSON.stringify(t,i)}}).call(e,n(0))},function(t,e,n){(function(e){var r,o,i=n(1),s=n(5).Response,a=n(6);e.WebSocket?(r=e.WebSocket,o=function(t,e){return new r(t)}):(r=n(20),o=function(t,e){return new r(t,null,e)});var c=n(2),u=c.TimeoutError,h=c.BadConnectionError,l=function(t,e,n){this.state=this.CLOSED,this.auth=t,this.codec=e,this.options=n,this.connectTimeout=n.connectTimeout,this.pingTimeout=n.ackTimeout,this.callIdGenerator=n.callIdGenerator,this.authTokenName=n.authTokenName,this._pingTimeoutTicker=null,this._callbackMap={},this.open()};l.prototype=Object.create(i.prototype),l.CONNECTING=l.prototype.CONNECTING="connecting",l.OPEN=l.prototype.OPEN="open",l.CLOSED=l.prototype.CLOSED="closed",l.prototype.uri=function(){var t=this.options.query||{},e=this.options.secure?"wss":"ws";this.options.timestampRequests&&(t[this.options.timestampParam]=(new Date).getTime()),t=a.encode(t),t.length&&(t="?"+t);var n;if(this.options.host)n=this.options.host;else{var r="";this.options.port&&("wss"==e&&443!=this.options.port||"ws"==e&&80!=this.options.port)&&(r=":"+this.options.port),n=this.options.hostname+r}return e+"://"+n+this.options.path+t},l.prototype.open=function(){var t=this;this.state=this.CONNECTING;var e=this.uri(),n=o(e,this.options);n.binaryType=this.options.binaryType,this.socket=n,n.onopen=function(){t._onOpen()},n.onclose=function(e){var n;n=null==e.code?1005:e.code,t._onClose(n,e.reason)},n.onmessage=function(e,n){t._onMessage(e.data)},n.onerror=function(e){t.state===t.CONNECTING&&t._onClose(1006)},this._connectTimeoutRef=setTimeout(function(){t._onClose(4007),t.socket.close(4007)},this.connectTimeout)},l.prototype._onOpen=function(){var t=this;clearTimeout(this._connectTimeoutRef),this._resetPingTimeout(),this._handshake(function(e,n){e?(t._onError(e),t._onClose(4003),t.socket.close(4003)):(t.state=t.OPEN,i.prototype.emit.call(t,"open",n),t._resetPingTimeout())})},l.prototype._handshake=function(t){var e=this;this.auth.loadToken(this.authTokenName,function(n,r){if(n)t(n);else{var o={force:!0};e.emit("#handshake",{authToken:r},o,function(e,n){n&&(n.authToken=r,n.authError&&(n.authError=c.hydrateError(n.authError))),t(e,n)})}})},l.prototype._abortAllPendingEventsDueToBadConnection=function(t){for(var e in this._callbackMap)if(this._callbackMap.hasOwnProperty(e)){var n=this._callbackMap[e];delete this._callbackMap[e],clearTimeout(n.timeout),delete n.timeout;var r="Event '"+n.event+"' was aborted due to a bad connection",o=new h(r,t),i=n.callback;delete n.callback,i.call(n,o,n)}},l.prototype._onClose=function(t,e){delete this.socket.onopen,delete this.socket.onclose,delete this.socket.onmessage,delete this.socket.onerror,clearTimeout(this._connectTimeoutRef),this.state==this.OPEN?(this.state=this.CLOSED,i.prototype.emit.call(this,"close",t,e),this._abortAllPendingEventsDueToBadConnection("disconnect")):this.state==this.CONNECTING&&(this.state=this.CLOSED,i.prototype.emit.call(this,"openAbort",t,e),this._abortAllPendingEventsDueToBadConnection("connectAbort"))},l.prototype._onMessage=function(t){i.prototype.emit.call(this,"event","message",t);var e=this.decode(t);if("#1"==e)this._resetPingTimeout(),this.socket.readyState==this.socket.OPEN&&this.sendObject("#2");else{var n=e.event;if(n){var r=new s(this,e.cid);i.prototype.emit.call(this,"event",n,e.data,r)}else if(null!=e.rid){var o=this._callbackMap[e.rid];if(o&&(clearTimeout(o.timeout),delete o.timeout,delete this._callbackMap[e.rid],o.callback)){var a=c.hydrateError(e.error);o.callback(a,e.data)}}else i.prototype.emit.call(this,"event","raw",e)}},l.prototype._onError=function(t){i.prototype.emit.call(this,"error",t)},l.prototype._resetPingTimeout=function(){var t=this;(new Date).getTime();clearTimeout(this._pingTimeoutTicker),this._pingTimeoutTicker=setTimeout(function(){t._onClose(4e3),t.socket.close(4e3)},this.pingTimeout)},l.prototype.getBytesReceived=function(){return this.socket.bytesReceived},l.prototype.close=function(t,e){if(t=t||1e3,this.state==this.OPEN){var n={code:t,data:e};this.emit("#disconnect",n),this._onClose(t,e),this.socket.close(t)}else this.state==this.CONNECTING&&(this._onClose(t,e),this.socket.close(t))},l.prototype.emitObject=function(t){var e={event:t.event,data:t.data};return t.callback&&(e.cid=t.cid=this.callIdGenerator(),this._callbackMap[t.cid]=t),this.sendObject(e),t.cid||null},l.prototype._handleEventAckTimeout=function(t){t.cid&&delete this._callbackMap[t.cid],delete t.timeout;var e=t.callback;if(e){delete t.callback;var n=new u("Event response for '"+t.event+"' timed out");e.call(t,n,t)}},l.prototype.emit=function(t,e,n,r){var o,i,s=this;r?(i=n,o=r):n instanceof Function?(i={},o=n):i=n;var a={event:t,data:e,callback:o};o&&!i.noTimeout&&(a.timeout=setTimeout(function(){s._handleEventAckTimeout(a)},this.options.ackTimeout));var c=null;return(this.state==this.OPEN||i.force)&&(c=this.emitObject(a)),c},l.prototype.cancelPendingResponse=function(t){delete this._callbackMap[t]},l.prototype.decode=function(t){return this.codec.decode(t)},l.prototype.encode=function(t){return this.codec.encode(t)},l.prototype.send=function(t){this.socket.readyState!=this.socket.OPEN?this._onClose(1005):this.socket.send(t)},l.prototype.serializeObject=function(t){var e,n;try{e=this.encode(t)}catch(t){n=t,this._onError(n)}return n?null:e},l.prototype.sendObject=function(t){var e=this.serializeObject(t);null!=e&&this.send(e)},t.exports.SCTransport=l}).call(e,n(0))},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var h=0;h<u;++h){var l,p,f,d,y=t[h].replace(a,"%20"),v=y.indexOf(n);v>=0?(l=y.substr(0,v),p=y.substr(v+1)):(l=y,p=""),f=decodeURIComponent(l),d=decodeURIComponent(p),r(s,f)?o(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(s(t),function(s){var a=encodeURIComponent(o(s))+n;return i(t[s])?r(t[s],function(t){return a+encodeURIComponent(o(t))}).join(e):a+encodeURIComponent(o(t[s]))}).join(e):a?encodeURIComponent(o(a))+n+encodeURIComponent(o(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e){function n(t,e,n){return e?new o(t,e):new o(t)}var r;r="undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof window&&window||function(){return this}();var o=r.WebSocket||r.MozWebSocket;o&&(n.prototype=o.prototype),t.exports=o?n:null},function(t,e,n){"use strict";t.exports=n(22)},function(t,e,n){"use strict";function r(){if(arguments.length)return r.from(arguments)}function o(){}var i;i="An argument without append, prepend, or detach methods was given to `List";var s;s=r.prototype,r.of=function(){return r.from.call(this,arguments)},r.from=function(t){var e,n,r,o=new this;if(t&&(e=t.length))for(n=-1;++n<e;)null!==(r=t[n])&&void 0!==r&&o.append(r);return o},s.head=null,s.tail=null,s.toArray=function(){for(var t=this.head,e=[];t;)e.push(t),t=t.next;return e},s.prepend=function(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error(i+"#prepend`.");var e,n;return e=this,(n=e.head)?n.prepend(t):(t.detach(),t.list=e,e.head=t,t)},s.append=function(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error(i+"#append`.");var e,n,r;return e=this,(r=e.tail)?r.append(t):(n=e.head)?n.append(t):(t.detach(),t.list=e,e.head=t,t)},r.Item=o;var a=o.prototype;a.next=null,a.prev=null,a.list=null,a.detach=function(){var t=this,e=t.list,n=t.prev,r=t.next;return e?(e.tail===t&&(e.tail=n),e.head===t&&(e.head=r),e.tail===e.head&&(e.tail=null),n&&(n.next=r),r&&(r.prev=n),t.prev=t.next=t.list=null,t):t},a.prepend=function(t){if(!(t&&t.append&&t.prepend&&t.detach))throw new Error(i+"Item#prepend`.");var e=this,n=e.list,r=e.prev;return!!n&&(t.detach(),r&&(t.prev=r,r.next=t),t.next=e,t.list=n,e.prev=t,e===n.head&&(n.head=t),n.tail||(n.tail=e),t)},a.append=function(t){if(!(t&&t.append&&t.prepend&&t.detach))throw new Error(i+"Item#append`.");var e=this,n=e.list,r=e.next;return!!n&&(t.detach(),r&&(t.next=r,r.prev=t),t.prev=e,t.list=n,e.next=t,e!==n.tail&&n.tail||(n.tail=t),t)},t.exports=r},function(t,e,n){(function(t,r){var o;!function(i){var s="object"==typeof e&&e,a=("object"==typeof t&&t&&t.exports,"object"==typeof r&&r);var c=function(t){this.message=t};c.prototype=new Error,c.prototype.name="InvalidCharacterError";var u=function(t){throw new c(t)},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,p=function(t){t=String(t).replace(l,"");var e=t.length;e%4==0&&(t=t.replace(/==?$/,""),e=t.length),(e%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,o=0,i="",s=-1;++s<e;)r=h.indexOf(t.charAt(s)),n=o%4?64*n+r:r,o++%4&&(i+=String.fromCharCode(255&n>>(-2*o&6)));return i},f=function(t){t=String(t),/[^\0-\xFF]/.test(t)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,r,o,i=t.length%3,s="",a=-1,c=t.length-i;++a<c;)e=t.charCodeAt(a)<<16,n=t.charCodeAt(++a)<<8,r=t.charCodeAt(++a),o=e+n+r,s+=h.charAt(o>>18&63)+h.charAt(o>>12&63)+h.charAt(o>>6&63)+h.charAt(63&o);return 2==i?(e=t.charCodeAt(a)<<8,n=t.charCodeAt(++a),o=e+n,s+=h.charAt(o>>10)+h.charAt(o>>4&63)+h.charAt(o<<2&63)+"="):1==i&&(o=t.charCodeAt(a),s+=h.charAt(o>>2)+h.charAt(o<<4&63)+"=="),s},d={encode:f,decode:p,version:"0.1.0"};void 0!==(o=function(){return d}.call(e,n,e,t))&&(t.exports=o)}()}).call(e,n(24)(t),n(0))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){(function(e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}function n(r,o,i,s,l){function p(r,i){if(null===r)return null;if(0===i)return r;var v,g;if("object"!=typeof r)return r;if(t(r,c))v=new c;else if(t(r,u))v=new u;else if(t(r,h))v=new h(function(t,e){r.then(function(e){t(p(e,i-1))},function(t){e(p(t,i-1))})});else if(n.__isArray(r))v=[];else if(n.__isRegExp(r))v=new RegExp(r.source,a(r)),r.lastIndex&&(v.lastIndex=r.lastIndex);else if(n.__isDate(r))v=new Date(r.getTime());else{if(y&&e.isBuffer(r))return v=new e(r.length),r.copy(v),v;t(r,Error)?v=Object.create(r):void 0===s?(g=Object.getPrototypeOf(r),v=Object.create(g)):(v=Object.create(s),g=s)}if(o){var m=f.indexOf(r);if(-1!=m)return d[m];f.push(r),d.push(v)}t(r,c)&&r.forEach(function(t,e){var n=p(e,i-1),r=p(t,i-1);v.set(n,r)}),t(r,u)&&r.forEach(function(t){var e=p(t,i-1);v.add(e)});for(var b in r){var E;g&&(E=Object.getOwnPropertyDescriptor(g,b)),E&&null==E.set||(v[b]=p(r[b],i-1))}if(Object.getOwnPropertySymbols)for(var w=Object.getOwnPropertySymbols(r),b=0;b<w.length;b++){var k=w[b],T=Object.getOwnPropertyDescriptor(r,k);(!T||T.enumerable||l)&&(v[k]=p(r[k],i-1),T.enumerable||Object.defineProperty(v,k,{enumerable:!1}))}if(l)for(var S=Object.getOwnPropertyNames(r),b=0;b<S.length;b++){var _=S[b],T=Object.getOwnPropertyDescriptor(r,_);T&&T.enumerable||(v[_]=p(r[_],i-1),Object.defineProperty(v,_,{enumerable:!1}))}return v}"object"==typeof o&&(i=o.depth,s=o.prototype,l=o.includeNonEnumerable,o=o.circular);var f=[],d=[],y=void 0!==e;return void 0===o&&(o=!0),void 0===i&&(i=1/0),p(r,i)}function r(t){return Object.prototype.toString.call(t)}function o(t){return"object"==typeof t&&"[object Date]"===r(t)}function i(t){return"object"==typeof t&&"[object Array]"===r(t)}function s(t){return"object"==typeof t&&"[object RegExp]"===r(t)}function a(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var c;try{c=Map}catch(t){c=function(){}}var u;try{u=Set}catch(t){u=function(){}}var h;try{h=Promise}catch(t){h=function(){}}return n.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},n.__objToStr=r,n.__isDate=o,n.__isArray=i,n.__isRegExp=s,n.__getRegExpFlags=a,n}();"object"==typeof t&&t.exports&&(t.exports=n)}).call(e,n(4).Buffer)},function(t,e,n){(function(e){function r(t){var e=t.secure?"https://":"http://",n="";if(t.query)if("string"==typeof t.query)n=t.query;else{var r=[],o=t.query;for(var i in o)o.hasOwnProperty(i)&&r.push(i+"="+o[i]);r.length&&(n="?"+r.join("&"))}var s;return s=t.host?t.host:t.hostname+":"+t.port,e+s+t.path+n}function o(){return e.location&&"https:"==location.protocol}function i(t,n){var r=null==t.secure?n:t.secure;return t.port||(e.location&&location.port?location.port:r?443:80)}function s(t){if(t=t||{},t.host&&t.port)throw new h("The host option should already include the port number in the format hostname:port - Because of this, the host and port options cannot be specified together; use the hostname option instead");var n=o(),s={port:i(t,n),hostname:e.location&&location.hostname,path:"/s/",secure:n,autoConnect:!0,autoReconnect:!0,autoSubscribeOnConnect:!0,connectTimeout:2e4,ackTimeout:1e4,timestampRequests:!1,timestampParam:"t",authEngine:null,authTokenName:"Injam.authToken",binaryType:"arraybuffer",multiplex:!0,cloneData:!1};for(var a in t)t.hasOwnProperty(a)&&(s[a]=t[a]);var u=r(s);return!1===s.multiplex?new c(s):(l[u]?l[u].connect():l[u]=new c(s),l[u])}function a(t){t=t||{};var n=o(),s={port:i(t,n),hostname:e.location&&location.hostname,path:"/s/",secure:n};for(var a in t)t.hasOwnProperty(a)&&(s[a]=t[a]);var c=r(s),u=l[c];u&&u.destroy(),delete l[c]}var c=n(3),u=n(2),h=u.InvalidArgumentsError,l={};t.exports={connect:s,destroy:a,connections:l}}).call(e,n(0))},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,a,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),u=n.slice(),o=u.length,c=0;c<o;c++)u[c].apply(this,a);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}}]);
},{}],2:[function(require,module,exports){
var injamSdk = require('injam-sdk')



window.markers = []



// Put your physical id and application key

window.credentials = {
    physical_id: 'demolx85b',
    channels: [],
    application_key: 'd144dd40-f7ad-11e7-9660-61d5f7592493'
}



// Some locations

window.Asia = {
    lat: 23.800029,
    lng: 62.4289998
}

window.Iran = {
    lat: 31.9927359,
    lng: 44.6737631
}

window.Tehran = {
    lat: 35.6970118,
    lng: 51.2097338
}



// Google Maps Sample

window.connectForGoogleMaps = function() {

    // Connect to Injam

    window.injam = new Injam(credentials)
    injam.connect()

    injam.on('subscribed', function (channel) {
        M.toast({html: 'Subscribed ' + channel})
    })

    injam.on('unsubscribed', function (channel) {
        M.toast({html: 'Unsubscribed ' + channel})
    })


    // Showing devices on Google Maps by markers when receiving location data

    injam.on('tracking', function (data) {
        if (markers[data.channel]) {
            var latlng = new google.maps.LatLng(data.location.lat, data.location.lng)
            markers[data.channel].setPosition(latlng)
            // Uncomment below if you want lock to one marker
            // map.panTo(latlng)
        } else {
            addMarkerGMaps(data.channel, {lat: data.location.lat, lng: data.location.lng}, map)
            var latlng = new google.maps.LatLng(data.location.lat, data.location.lng)
            markers[data.channel].setPosition(latlng)
            map.panTo(latlng)
        }
    })


    // Google Map init

    window.map = new google.maps.Map(document.getElementById('map'), {
        zoom: 3,
        center: Asia,
        scrollwheel: false,
        navigationControl: false,
        mapTypeControl: false,
        scaleControl: false,
        fullscreenControl: true,
        streetViewControl: false
    })

}



// Most useful Google Maps functions

window.addMarkerGMaps = function(id, location, map) {
    markers[id] = new google.maps.Marker({
        map: map,
        animation: google.maps.Animation.DROP,
        position: location,
        title: id
    })
}

window.setMapOnAllGMaps = function(map) {
    for (var i = 0; i < window.Markers.length; i++) {
        markers[i].setMap(map)
    }
}

window.clearMarkersGMaps = function() {
    setMapOnAllGMaps(null)
}

window.deleteMarkersGMaps = function() {
    clearMarkersGMaps()
    markers = []
}



// Open Street Map Sample

window.connectForOpenStreetMap = function() {

    // Connect to Injam

    window.injam = new Injam(credentials)
    injam.connect()

    injam.on('subscribed', function (channel) {
        M.toast({html: 'Subscribed ' + channel})
    })

    injam.on('unsubscribed', function (channel) {
        M.toast({html: 'Unsubscribed ' + channel})
    })


    // Showing devices on Open Street Map by markers when receiving location data

    injam.on('tracking', function (data) {
        if (markers[data.channel]) {
            var lonLat = ol.proj.transform([data.location.lng, data.location.lat], 'EPSG:4326', 'EPSG:3857')
            markers[data.channel].setCoordinates(lonLat)
            // Uncomment below if you want lock to one marker
            // view.animate({
            //     center: lonLat,
            //     duration: 2000
            // })
        } else {
            addMarkerOSM(data.channel, {lat: data.location.lat, lng: data.location.lng})
            var lonLat = ol.proj.transform([data.location.lng, data.location.lat], 'EPSG:4326', 'EPSG:3857')
            view.animate({
                center: lonLat,
                duration: 2000
            })
        }
    })


    // Open Street Map init

    window.markerSource = new ol.source.Vector()
    window.markerStyle = new ol.style.Style({
        image: new ol.style.Icon(/** @type {olx.style.IconOptions} */ ({
            anchor: [0.5, 46],
            anchorXUnits: 'fraction',
            anchorYUnits: 'pixels',
            src: 'https://injam.io/images/Marker-Red.svg'
        }))
    })
    window.view = new ol.View({
        center: ol.proj.fromLonLat([Asia.lng, Asia.lat]),
        zoom: 3
    })

    window.map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          }),
          new ol.layer.Vector({
            source: markerSource,
            style: markerStyle
          }),
        ],
        view: view
    })

}


// Most useful Open Street Map functions

window.addMarkerOSM = function(id, location) {
    markers[id] = new ol.geom.Point(ol.proj.transform([location.lng, location.lat], 'EPSG:4326', 'EPSG:3857'))
    var marker = new ol.Feature({
        geometry: markers[id],
        name: id
    })
    markerSource.addFeature(marker)
}



// Cedar Maps Sample

window.connectForCedarMaps = function() {

    // Connect to Injam

    window.injam = new Injam(credentials)
    injam.connect()

    injam.on('subscribed', function (channel) {
        M.toast({html: 'Subscribed ' + channel})
    })

    injam.on('unsubscribed', function (channel) {
        M.toast({html: 'Unsubscribed ' + channel})
    })


    // Showing devices on Cedar Maps by markers when receiving location data

    injam.on('tracking', function (data) {
        if (markers[data.channel]) {
            var latLng = L.latLng(data.location)
            markers[data.channel].setLatLng(latLng)
            // Uncomment below if you want lock to one marker
            // map.setView(data.location)
        } else {
            addMarkerCM(data.channel, {lat: data.location.lat, lng: data.location.lng})
            map.setView(data.location)
        }
    })


    // Cedar Maps init

    var cmOptions = {
        center: {lat: Tehran.lat, lng: Tehran.lng},
        scrollWheelZoom :false,
        zoomControl: true,
        zoom: 7,
        minZoom: 6,
        maxZoom: 17,
        legendControl: false,
        attributionControl: false
    }
    window.map = L.cedarmaps.map('map', 'https://api.cedarmaps.com/v1/tiles/cedarmaps.streets.json?access_token=8b5bc03a7ce664a403940ee68357e7c44240609e', cmOptions)

}


// Most useful Cedar Maps functions

window.addMarkerCM = function(id, location) {
    var markerOptions = {
        center: {lat: location.lat, lng: location.lng},
        iconOpts: {
            iconUrl: "https://injam.io/images/Marker-Red.svg",
            iconRetinaUrl: "https://injam.io/images/Marker-Red.svg",
            iconSize: [32, 44]
        }
    }
    var iconOptions = {
        iconUrl: markerOptions.iconOpts.iconUrl,
        iconRetinaUrl: markerOptions.iconOpts.iconRetinaUrl,
        iconSize: markerOptions.iconOpts.iconSize
    }
    var markerIcon = {
        icon: L.icon(iconOptions)
    }
    var marker = new L.marker(markerOptions.center, markerIcon)
    marker.addTo(map)
    markers[id] = marker
}



// Messaging Sample

window.connectForMessaging = function() {

    // Connect to Injam

    window.injam = new Injam(credentials)
    injam.connect()

    injam.on('subscribed', function (channel) {
        M.toast({html: 'Subscribed ' + channel})
    })

    injam.on('unsubscribed', function (channel) {
        M.toast({html: 'Unsubscribed ' + channel})
    })

    injam.on('rawData', function (data) {
        addMessage(data)
    })

}

if ($('#board').length) {
    connectForMessaging()
}



window.addMessage = function(data) {
    var name = data.channel || credentials.physical_id
    var message = data.data || data.message || data.body
    $('#board .messages').prepend('<div class="message-holder"><div class="message">'
        + '<span class="title">' + name + '</span>'
        + '<p class="body">' + message + '</p>'
    + '</div></div>')
}



// Subscribe

$('.sub').on('click', function(e) {
    e.preventDefault()
    var channel = $('#subscription').val()
    if (channel != '')
        injam.subscribe(channel)
})



// Unsubscribe

$('.unsub').on('click', function(e) {
    e.preventDefault()
    var channel = $('#subscription').val()
    if (channel != '')
        injam.unsubscribe(channel)
})



// Send Data

$('.send').on('click', function(e) {
    e.preventDefault()
    var data = $('#data').val()
    if (data != '') {
        injam.publish(data)
        addMessage(data)
    }
})
},{"injam-sdk":1}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi91c3IvbG9jYWwvdmFyL3d3dy9pbmphbS5pby93ZWItc2FtcGxlcy9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL3Vzci9sb2NhbC92YXIvd3d3L2luamFtLmlvL3dlYi1zYW1wbGVzL25vZGVfbW9kdWxlcy9pbmphbS1zZGsvaW5qYW0tc2RrLmpzIiwiL3Vzci9sb2NhbC92YXIvd3d3L2luamFtLmlvL3dlYi1zYW1wbGVzL3NyYy9qcy9mYWtlXzEzNTgwN2E1LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIiFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIpe2lmKG5bcl0pcmV0dXJuIG5bcl0uZXhwb3J0czt2YXIgbz1uW3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtyXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxlKSxvLmw9ITAsby5leHBvcnRzfXZhciBuPXt9O2UubT10LGUuYz1uLGUuZD1mdW5jdGlvbih0LG4scil7ZS5vKHQsbil8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4se2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpyfSl9LGUubj1mdW5jdGlvbih0KXt2YXIgbj10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gZS5kKG4sXCJhXCIsbiksbn0sZS5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxlLnA9XCJcIixlKGUucz03KX0oW2Z1bmN0aW9uKHQsZSl7dmFyIG47bj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSgpO3RyeXtuPW58fEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKXx8KDAsZXZhbCkoXCJ0aGlzXCIpfWNhdGNoKHQpe1wib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJihuPXdpbmRvdyl9dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKHQpe2lmKHQpcmV0dXJuIG8odCl9ZnVuY3Rpb24gbyh0KXtmb3IodmFyIGUgaW4gci5wcm90b3R5cGUpdFtlXT1yLnByb3RvdHlwZVtlXTtyZXR1cm4gdH10LmV4cG9ydHM9cixyLnByb3RvdHlwZS5vbj1yLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LCh0aGlzLl9jYWxsYmFja3NbXCIkXCIrdF09dGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdfHxbXSkucHVzaChlKSx0aGlzfSxyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMub2ZmKHQsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4uZm49ZSx0aGlzLm9uKHQsbiksdGhpc30sci5wcm90b3R5cGUub2ZmPXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1yLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXt9LHRoaXM7dmFyIG49dGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdO2lmKCFuKXJldHVybiB0aGlzO2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbXCIkXCIrdF0sdGhpcztmb3IodmFyIHIsbz0wO288bi5sZW5ndGg7bysrKWlmKChyPW5bb10pPT09ZXx8ci5mbj09PWUpe24uc3BsaWNlKG8sMSk7YnJlYWt9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCl7dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307dmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSksbj10aGlzLl9jYWxsYmFja3NbXCIkXCIrdF07aWYobil7bj1uLnNsaWNlKDApO2Zvcih2YXIgcj0wLG89bi5sZW5ndGg7cjxvOysrciluW3JdLmFwcGx5KHRoaXMsZSl9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sdGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdfHxbXX0sci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5saXN0ZW5lcnModCkubGVuZ3RofX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIHIodCxlKXt0aGlzLm5hbWU9XCJBdXRoVG9rZW5FeHBpcmVkRXJyb3JcIix0aGlzLm1lc3NhZ2U9dCx0aGlzLmV4cGlyeT1lLEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiYhaz9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLGFyZ3VtZW50cy5jYWxsZWUpOnRoaXMuc3RhY2s9KG5ldyBFcnJvcikuc3RhY2t9ZnVuY3Rpb24gbyh0KXt0aGlzLm5hbWU9XCJBdXRoVG9rZW5JbnZhbGlkRXJyb3JcIix0aGlzLm1lc3NhZ2U9dCxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmIWs/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxhcmd1bWVudHMuY2FsbGVlKTp0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfWZ1bmN0aW9uIGkodCxlKXt0aGlzLm5hbWU9XCJBdXRoVG9rZW5Ob3RCZWZvcmVFcnJvclwiLHRoaXMubWVzc2FnZT10LHRoaXMuZGF0ZT1lLEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiYhaz9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLGFyZ3VtZW50cy5jYWxsZWUpOnRoaXMuc3RhY2s9KG5ldyBFcnJvcikuc3RhY2t9ZnVuY3Rpb24gcyh0KXt0aGlzLm5hbWU9XCJBdXRoVG9rZW5FcnJvclwiLHRoaXMubWVzc2FnZT10LEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiYhaz9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLGFyZ3VtZW50cy5jYWxsZWUpOnRoaXMuc3RhY2s9KG5ldyBFcnJvcikuc3RhY2t9ZnVuY3Rpb24gYSh0LGUpe3RoaXMubmFtZT1cIlNpbGVudE1pZGRsZXdhcmVCbG9ja2VkRXJyb3JcIix0aGlzLm1lc3NhZ2U9dCx0aGlzLnR5cGU9ZSxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmIWs/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxhcmd1bWVudHMuY2FsbGVlKTp0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfWZ1bmN0aW9uIGModCl7dGhpcy5uYW1lPVwiSW52YWxpZEFjdGlvbkVycm9yXCIsdGhpcy5tZXNzYWdlPXQsRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJiFrP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsYXJndW1lbnRzLmNhbGxlZSk6dGhpcy5zdGFjaz0obmV3IEVycm9yKS5zdGFja31mdW5jdGlvbiB1KHQpe3RoaXMubmFtZT1cIkludmFsaWRBcmd1bWVudHNFcnJvclwiLHRoaXMubWVzc2FnZT10LEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiYhaz9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLGFyZ3VtZW50cy5jYWxsZWUpOnRoaXMuc3RhY2s9KG5ldyBFcnJvcikuc3RhY2t9ZnVuY3Rpb24gaCh0KXt0aGlzLm5hbWU9XCJJbnZhbGlkT3B0aW9uc0Vycm9yXCIsdGhpcy5tZXNzYWdlPXQsRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJiFrP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsYXJndW1lbnRzLmNhbGxlZSk6dGhpcy5zdGFjaz0obmV3IEVycm9yKS5zdGFja31mdW5jdGlvbiBsKHQpe3RoaXMubmFtZT1cIkludmFsaWRNZXNzYWdlRXJyb3JcIix0aGlzLm1lc3NhZ2U9dCxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmIWs/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxhcmd1bWVudHMuY2FsbGVlKTp0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfWZ1bmN0aW9uIHAodCxlKXt0aGlzLm5hbWU9XCJTb2NrZXRQcm90b2NvbEVycm9yXCIsdGhpcy5tZXNzYWdlPXQsdGhpcy5jb2RlPWUsRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJiFrP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsYXJndW1lbnRzLmNhbGxlZSk6dGhpcy5zdGFjaz0obmV3IEVycm9yKS5zdGFja31mdW5jdGlvbiBmKHQpe3RoaXMubmFtZT1cIlNlcnZlclByb3RvY29sRXJyb3JcIix0aGlzLm1lc3NhZ2U9dCxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmIWs/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxhcmd1bWVudHMuY2FsbGVlKTp0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfWZ1bmN0aW9uIGQodCl7dGhpcy5uYW1lPVwiSFRUUFNlcnZlckVycm9yXCIsdGhpcy5tZXNzYWdlPXQsRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJiFrP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsYXJndW1lbnRzLmNhbGxlZSk6dGhpcy5zdGFjaz0obmV3IEVycm9yKS5zdGFja31mdW5jdGlvbiB5KHQpe3RoaXMubmFtZT1cIlJlc291cmNlTGltaXRFcnJvclwiLHRoaXMubWVzc2FnZT10LEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiYhaz9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLGFyZ3VtZW50cy5jYWxsZWUpOnRoaXMuc3RhY2s9KG5ldyBFcnJvcikuc3RhY2t9ZnVuY3Rpb24gdih0KXt0aGlzLm5hbWU9XCJUaW1lb3V0RXJyb3JcIix0aGlzLm1lc3NhZ2U9dCxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmIWs/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxhcmd1bWVudHMuY2FsbGVlKTp0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfWZ1bmN0aW9uIGcodCxlKXt0aGlzLm5hbWU9XCJCYWRDb25uZWN0aW9uRXJyb3JcIix0aGlzLm1lc3NhZ2U9dCx0aGlzLnR5cGU9ZSxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmIWs/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxhcmd1bWVudHMuY2FsbGVlKTp0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfWZ1bmN0aW9uIG0odCl7dGhpcy5uYW1lPVwiQnJva2VyRXJyb3JcIix0aGlzLm1lc3NhZ2U9dCxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmIWs/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxhcmd1bWVudHMuY2FsbGVlKTp0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrfWZ1bmN0aW9uIGIodCxlKXt0aGlzLm5hbWU9XCJQcm9jZXNzRXhpdEVycm9yXCIsdGhpcy5tZXNzYWdlPXQsdGhpcy5jb2RlPWUsRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJiFrP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsYXJndW1lbnRzLmNhbGxlZSk6dGhpcy5zdGFjaz0obmV3IEVycm9yKS5zdGFja31mdW5jdGlvbiBFKHQpe3RoaXMubmFtZT1cIlVua25vd25FcnJvclwiLHRoaXMubWVzc2FnZT10LEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiYhaz9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLGFyZ3VtZW50cy5jYWxsZWUpOnRoaXMuc3RhY2s9KG5ldyBFcnJvcikuc3RhY2t9dmFyIHc9bigxNCksaz1mdW5jdGlvbigpe3JldHVybiF0aGlzfSgpO3IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLHMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLHUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLHAucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLHkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSx2LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLG0ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksRS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLHQuZXhwb3J0cz17QXV0aFRva2VuRXhwaXJlZEVycm9yOnIsQXV0aFRva2VuSW52YWxpZEVycm9yOm8sQXV0aFRva2VuTm90QmVmb3JlRXJyb3I6aSxBdXRoVG9rZW5FcnJvcjpzLFNpbGVudE1pZGRsZXdhcmVCbG9ja2VkRXJyb3I6YSxJbnZhbGlkQWN0aW9uRXJyb3I6YyxJbnZhbGlkQXJndW1lbnRzRXJyb3I6dSxJbnZhbGlkT3B0aW9uc0Vycm9yOmgsSW52YWxpZE1lc3NhZ2VFcnJvcjpsLFNvY2tldFByb3RvY29sRXJyb3I6cCxTZXJ2ZXJQcm90b2NvbEVycm9yOmYsSFRUUFNlcnZlckVycm9yOmQsUmVzb3VyY2VMaW1pdEVycm9yOnksVGltZW91dEVycm9yOnYsQmFkQ29ubmVjdGlvbkVycm9yOmcsQnJva2VyRXJyb3I6bSxQcm9jZXNzRXhpdEVycm9yOmIsVW5rbm93bkVycm9yOkV9LHQuZXhwb3J0cy5zb2NrZXRQcm90b2NvbEVycm9yU3RhdHVzZXM9ezEwMDE6XCJTb2NrZXQgd2FzIGRpc2Nvbm5lY3RlZFwiLDEwMDI6XCJBIFdlYlNvY2tldCBwcm90b2NvbCBlcnJvciB3YXMgZW5jb3VudGVyZWRcIiwxMDAzOlwiU2VydmVyIHRlcm1pbmF0ZWQgc29ja2V0IGJlY2F1c2UgaXQgcmVjZWl2ZWQgaW52YWxpZCBkYXRhXCIsMTAwNTpcIlNvY2tldCBjbG9zZWQgd2l0aG91dCBzdGF0dXMgY29kZVwiLDEwMDY6XCJTb2NrZXQgaHVuZyB1cFwiLDEwMDc6XCJNZXNzYWdlIGZvcm1hdCB3YXMgaW5jb3JyZWN0XCIsMTAwODpcIkVuY291bnRlcmVkIGEgcG9saWN5IHZpb2xhdGlvblwiLDEwMDk6XCJNZXNzYWdlIHdhcyB0b28gYmlnIHRvIHByb2Nlc3NcIiwxMDEwOlwiQ2xpZW50IGVuZGVkIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgdGhlIHNlcnZlciBkaWQgbm90IGNvbXBseSB3aXRoIGV4dGVuc2lvbiByZXF1aXJlbWVudHNcIiwxMDExOlwiU2VydmVyIGVuY291bnRlcmVkIGFuIHVuZXhwZWN0ZWQgZmF0YWwgY29uZGl0aW9uXCIsNGUzOlwiU2VydmVyIHBpbmcgdGltZWQgb3V0XCIsNDAwMTpcIkNsaWVudCBwb25nIHRpbWVkIG91dFwiLDQwMDI6XCJTZXJ2ZXIgZmFpbGVkIHRvIHNpZ24gYXV0aCB0b2tlblwiLDQwMDM6XCJGYWlsZWQgdG8gY29tcGxldGUgaGFuZHNoYWtlXCIsNDAwNDpcIkNsaWVudCBmYWlsZWQgdG8gc2F2ZSBhdXRoIHRva2VuXCIsNDAwNTpcIkRpZCBub3QgcmVjZWl2ZSAjaGFuZHNoYWtlIGZyb20gY2xpZW50IGJlZm9yZSB0aW1lb3V0XCIsNDAwNjpcIkZhaWxlZCB0byBiaW5kIHNvY2tldCB0byBtZXNzYWdlIGJyb2tlclwiLDQwMDc6XCJDbGllbnQgY29ubmVjdGlvbiBlc3RhYmxpc2htZW50IHRpbWVkIG91dFwifSx0LmV4cG9ydHMuc29ja2V0UHJvdG9jb2xJZ25vcmVTdGF0dXNlcz17MWUzOlwiU29ja2V0IGNsb3NlZCBub3JtYWxseVwiLDEwMDE6XCJTb2NrZXQgaHVuZyB1cFwifTt2YXIgVD17ZG9tYWluOjEsZG9tYWluRW1pdHRlcjoxLGRvbWFpblRocm93bjoxfTt0LmV4cG9ydHMuZGVoeWRyYXRlRXJyb3I9ZnVuY3Rpb24odCxlKXt2YXIgbjtpZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdCl7bj17bWVzc2FnZTp0Lm1lc3NhZ2V9LGUmJihuLnN0YWNrPXQuc3RhY2spO2Zvcih2YXIgciBpbiB0KVRbcl18fChuW3JdPXRbcl0pfWVsc2Ugbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P1wiW2Z1bmN0aW9uIFwiKyh0Lm5hbWV8fFwiYW5vbnltb3VzXCIpK1wiXVwiOnQ7cmV0dXJuIHcobil9LHQuZXhwb3J0cy5oeWRyYXRlRXJyb3I9ZnVuY3Rpb24odCl7dmFyIGU9bnVsbDtpZihudWxsIT10KWlmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXtlPW5ldyBFcnJvcih0Lm1lc3NhZ2UpO2Zvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihlW25dPXRbbl0pfWVsc2UgZT10O3JldHVybiBlfSx0LmV4cG9ydHMuZGVjeWNsZT13fSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUscil7dmFyIG89bigxKSxpPW4oMTMpLlNDQ2hhbm5lbCxzPShuKDUpLlJlc3BvbnNlLG4oMTUpLkF1dGhFbmdpbmUpLGE9bigxNiksYz1uKDE3KS5TQ1RyYW5zcG9ydCx1PW4oNiksaD1uKDIxKSxsPW4oMjMpLHA9bigyNSksZj1uKDIpLGQ9Zi5JbnZhbGlkQXJndW1lbnRzRXJyb3IseT1mLkludmFsaWRNZXNzYWdlRXJyb3Isdj1mLlNvY2tldFByb3RvY29sRXJyb3IsZz1mLlRpbWVvdXRFcnJvcixtPWYuQmFkQ29ubmVjdGlvbkVycm9yLGI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyxFPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7by5jYWxsKHRoaXMpLHRoaXMuaWQ9bnVsbCx0aGlzLnN0YXRlPXRoaXMuQ0xPU0VELHRoaXMuYXV0aFN0YXRlPXRoaXMuVU5BVVRIRU5USUNBVEVELHRoaXMuc2lnbmVkQXV0aFRva2VuPW51bGwsdGhpcy5hdXRoVG9rZW49bnVsbCx0aGlzLnBlbmRpbmdSZWNvbm5lY3Q9ITEsdGhpcy5wZW5kaW5nUmVjb25uZWN0VGltZW91dD1udWxsLHRoaXMucHJlcGFyaW5nUGVuZGluZ1N1YnNjcmlwdGlvbnM9ITEsdGhpcy5jb25uZWN0VGltZW91dD10LmNvbm5lY3RUaW1lb3V0LHRoaXMuYWNrVGltZW91dD10LmFja1RpbWVvdXQsdGhpcy5jaGFubmVsUHJlZml4PXQuY2hhbm5lbFByZWZpeHx8bnVsbCx0aGlzLmRpc2Nvbm5lY3RPblVubG9hZD1udWxsPT10LmRpc2Nvbm5lY3RPblVubG9hZHx8dC5kaXNjb25uZWN0T25VbmxvYWQsdGhpcy5hdXRoVG9rZW5OYW1lPXQuYXV0aFRva2VuTmFtZSx0aGlzLnBpbmdUaW1lb3V0PXRoaXMuYWNrVGltZW91dDt2YXIgcj1NYXRoLnBvdygyLDMxKS0xLGk9ZnVuY3Rpb24odCl7aWYoblt0XT5yKXRocm93IG5ldyBkKFwiVGhlIFwiK3QrXCIgdmFsdWUgcHJvdmlkZWQgZXhjZWVkZWQgdGhlIG1heGltdW0gYW1vdW50IGFsbG93ZWRcIil9O2lmKGkoXCJjb25uZWN0VGltZW91dFwiKSxpKFwiYWNrVGltZW91dFwiKSxpKFwicGluZ1RpbWVvdXRcIiksdGhpcy5fbG9jYWxFdmVudHM9e2Nvbm5lY3Q6MSxjb25uZWN0QWJvcnQ6MSxkaXNjb25uZWN0OjEsbWVzc2FnZToxLGVycm9yOjEscmF3OjEsZmFpbDoxLGtpY2tPdXQ6MSxzdWJzY3JpYmU6MSx1bnN1YnNjcmliZToxLHN1YnNjcmliZVN0YXRlQ2hhbmdlOjEsYXV0aFN0YXRlQ2hhbmdlOjEsYXV0aGVudGljYXRlOjEsZGVhdXRoZW50aWNhdGU6MSxyZW1vdmVBdXRoVG9rZW46MSxzdWJzY3JpYmVSZXF1ZXN0OjF9LHRoaXMuY29ubmVjdEF0dGVtcHRzPTAsdGhpcy5fZW1pdEJ1ZmZlcj1uZXcgaCx0aGlzLmNoYW5uZWxzPXt9LHRoaXMub3B0aW9ucz10LHRoaXMuX2NpZD0xLHRoaXMub3B0aW9ucy5jYWxsSWRHZW5lcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gbi5fY2lkKyt9LHRoaXMub3B0aW9ucy5hdXRvUmVjb25uZWN0KXtudWxsPT10aGlzLm9wdGlvbnMuYXV0b1JlY29ubmVjdE9wdGlvbnMmJih0aGlzLm9wdGlvbnMuYXV0b1JlY29ubmVjdE9wdGlvbnM9e30pO3ZhciBjPXRoaXMub3B0aW9ucy5hdXRvUmVjb25uZWN0T3B0aW9ucztudWxsPT1jLmluaXRpYWxEZWxheSYmKGMuaW5pdGlhbERlbGF5PTFlNCksbnVsbD09Yy5yYW5kb21uZXNzJiYoYy5yYW5kb21uZXNzPTFlNCksbnVsbD09Yy5tdWx0aXBsaWVyJiYoYy5tdWx0aXBsaWVyPTEuNSksbnVsbD09Yy5tYXhEZWxheSYmKGMubWF4RGVsYXk9NmU0KX1udWxsPT10aGlzLm9wdGlvbnMuc3Vic2NyaXB0aW9uUmV0cnlPcHRpb25zJiYodGhpcy5vcHRpb25zLnN1YnNjcmlwdGlvblJldHJ5T3B0aW9ucz17fSksdGhpcy5vcHRpb25zLmF1dGhFbmdpbmU/dGhpcy5hdXRoPXRoaXMub3B0aW9ucy5hdXRoRW5naW5lOnRoaXMuYXV0aD1uZXcgcyx0aGlzLm9wdGlvbnMuY29kZWNFbmdpbmU/dGhpcy5jb2RlYz10aGlzLm9wdGlvbnMuY29kZWNFbmdpbmU6dGhpcy5jb2RlYz1hLHRoaXMub3B0aW9ucy5wYXRoPXRoaXMub3B0aW9ucy5wYXRoLnJlcGxhY2UoL1xcLyQvLFwiXCIpK1wiL1wiLHRoaXMub3B0aW9ucy5xdWVyeT10LnF1ZXJ5fHx7fSxcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5vcHRpb25zLnF1ZXJ5JiYodGhpcy5vcHRpb25zLnF1ZXJ5PXUucGFyc2UodGhpcy5vcHRpb25zLnF1ZXJ5KSksdGhpcy5vcHRpb25zLmF1dG9Db25uZWN0JiZ0aGlzLmNvbm5lY3QoKSx0aGlzLl9jaGFubmVsRW1pdHRlcj1uZXcgbyxiJiZ0aGlzLmRpc2Nvbm5lY3RPblVubG9hZCYmZS5hZGRFdmVudExpc3RlbmVyJiYodGhpcy5fdW5sb2FkSGFuZGxlcj1mdW5jdGlvbigpe24uZGlzY29ubmVjdCgpfSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIix0aGlzLl91bmxvYWRIYW5kbGVyLCExKSl9O0UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLEUuQ09OTkVDVElORz1FLnByb3RvdHlwZS5DT05ORUNUSU5HPWMucHJvdG90eXBlLkNPTk5FQ1RJTkcsRS5PUEVOPUUucHJvdG90eXBlLk9QRU49Yy5wcm90b3R5cGUuT1BFTixFLkNMT1NFRD1FLnByb3RvdHlwZS5DTE9TRUQ9Yy5wcm90b3R5cGUuQ0xPU0VELEUuQVVUSEVOVElDQVRFRD1FLnByb3RvdHlwZS5BVVRIRU5USUNBVEVEPVwiYXV0aGVudGljYXRlZFwiLEUuVU5BVVRIRU5USUNBVEVEPUUucHJvdG90eXBlLlVOQVVUSEVOVElDQVRFRD1cInVuYXV0aGVudGljYXRlZFwiLEUuUEVORElORz1FLnByb3RvdHlwZS5QRU5ESU5HPVwicGVuZGluZ1wiLEUuaWdub3JlU3RhdHVzZXM9Zi5zb2NrZXRQcm90b2NvbElnbm9yZVN0YXR1c2VzLEUuZXJyb3JTdGF0dXNlcz1mLnNvY2tldFByb3RvY29sRXJyb3JTdGF0dXNlcyxFLnByb3RvdHlwZS5fcHJpdmF0ZUV2ZW50SGFuZGxlck1hcD17XCIjcHVibGlzaFwiOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3VuZGVjb3JhdGVDaGFubmVsTmFtZSh0LmNoYW5uZWwpO3RoaXMuaXNTdWJzY3JpYmVkKGUsITApJiZ0aGlzLl9jaGFubmVsRW1pdHRlci5lbWl0KGUsdC5kYXRhKX0sXCIja2lja091dFwiOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3VuZGVjb3JhdGVDaGFubmVsTmFtZSh0LmNoYW5uZWwpLG49dGhpcy5jaGFubmVsc1tlXTtuJiYoby5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJraWNrT3V0XCIsdC5tZXNzYWdlLGUpLG4uZW1pdChcImtpY2tPdXRcIix0Lm1lc3NhZ2UsZSksdGhpcy5fdHJpZ2dlckNoYW5uZWxVbnN1YnNjcmliZShuKSl9LFwiI3NldEF1dGhUb2tlblwiOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih0KXt2YXIgcj1mdW5jdGlvbihyKXtyPyhlLmVycm9yKHIpLG4uX29uU0NFcnJvcihyKSk6KG4uX2NoYW5nZVRvQXV0aGVudGljYXRlZFN0YXRlKHQudG9rZW4pLGUuZW5kKCkpfTt0aGlzLmF1dGguc2F2ZVRva2VuKHRoaXMuYXV0aFRva2VuTmFtZSx0LnRva2VuLHt9LHIpfWVsc2UgZS5lcnJvcihuZXcgeShcIk5vIHRva2VuIGRhdGEgcHJvdmlkZWQgYnkgI3NldEF1dGhUb2tlbiBldmVudFwiKSl9LFwiI3JlbW92ZUF1dGhUb2tlblwiOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLmF1dGgucmVtb3ZlVG9rZW4odGhpcy5hdXRoVG9rZW5OYW1lLGZ1bmN0aW9uKHQscil7dD8oZS5lcnJvcih0KSxuLl9vblNDRXJyb3IodCkpOihvLnByb3RvdHlwZS5lbWl0LmNhbGwobixcInJlbW92ZUF1dGhUb2tlblwiLHIpLG4uX2NoYW5nZVRvVW5hdXRoZW50aWNhdGVkU3RhdGVBbmRDbGVhclRva2VucygpLGUuZW5kKCkpfSl9LFwiI2Rpc2Nvbm5lY3RcIjpmdW5jdGlvbih0KXt0aGlzLnRyYW5zcG9ydC5jbG9zZSh0LmNvZGUsdC5kYXRhKX19LEUucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGV9LEUucHJvdG90eXBlLmdldEJ5dGVzUmVjZWl2ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuZ2V0Qnl0ZXNSZWNlaXZlZCgpfSxFLnByb3RvdHlwZS5kZWF1dGhlbnRpY2F0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuYXV0aC5yZW1vdmVUb2tlbih0aGlzLmF1dGhUb2tlbk5hbWUsZnVuY3Rpb24obixyKXtuP2UuX29uU0NFcnJvcihuKTooby5wcm90b3R5cGUuZW1pdC5jYWxsKGUsXCJyZW1vdmVBdXRoVG9rZW5cIixyKSxlLnN0YXRlIT1lLkNMT1NFRCYmZS5lbWl0KFwiI3JlbW92ZUF1dGhUb2tlblwiKSxlLl9jaGFuZ2VUb1VuYXV0aGVudGljYXRlZFN0YXRlQW5kQ2xlYXJUb2tlbnMoKSksdCYmdChuKX0pfSxFLnByb3RvdHlwZS5jb25uZWN0PUUucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc3RhdGU9PXRoaXMuQ0xPU0VEJiYodGhpcy5wZW5kaW5nUmVjb25uZWN0PSExLHRoaXMucGVuZGluZ1JlY29ubmVjdFRpbWVvdXQ9bnVsbCxjbGVhclRpbWVvdXQodGhpcy5fcmVjb25uZWN0VGltZW91dFJlZiksdGhpcy5zdGF0ZT10aGlzLkNPTk5FQ1RJTkcsby5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJjb25uZWN0aW5nXCIpLHRoaXMudHJhbnNwb3J0JiZ0aGlzLnRyYW5zcG9ydC5vZmYoKSx0aGlzLnRyYW5zcG9ydD1uZXcgYyh0aGlzLmF1dGgsdGhpcy5jb2RlYyx0aGlzLm9wdGlvbnMpLHRoaXMudHJhbnNwb3J0Lm9uKFwib3BlblwiLGZ1bmN0aW9uKGUpe3Quc3RhdGU9dC5PUEVOLHQuX29uU0NPcGVuKGUpfSksdGhpcy50cmFuc3BvcnQub24oXCJlcnJvclwiLGZ1bmN0aW9uKGUpe3QuX29uU0NFcnJvcihlKX0pLHRoaXMudHJhbnNwb3J0Lm9uKFwiY2xvc2VcIixmdW5jdGlvbihlLG4pe3Quc3RhdGU9dC5DTE9TRUQsdC5fb25TQ0Nsb3NlKGUsbil9KSx0aGlzLnRyYW5zcG9ydC5vbihcIm9wZW5BYm9ydFwiLGZ1bmN0aW9uKGUsbil7dC5zdGF0ZT10LkNMT1NFRCx0Ll9vblNDQ2xvc2UoZSxuLCEwKX0pLHRoaXMudHJhbnNwb3J0Lm9uKFwiZXZlbnRcIixmdW5jdGlvbihlLG4scil7dC5fb25TQ0V2ZW50KGUsbixyKX0pKX0sRS5wcm90b3R5cGUucmVjb25uZWN0PWZ1bmN0aW9uKCl7dGhpcy5kaXNjb25uZWN0KCksdGhpcy5jb25uZWN0KCl9LEUucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24odCxlKXtpZihcIm51bWJlclwiIT10eXBlb2YodD10fHwxZTMpKXRocm93IG5ldyBkKFwiSWYgc3BlY2lmaWVkLCB0aGUgY29kZSBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyXCIpO3RoaXMuc3RhdGU9PXRoaXMuT1BFTnx8dGhpcy5zdGF0ZT09dGhpcy5DT05ORUNUSU5HP3RoaXMudHJhbnNwb3J0LmNsb3NlKHQsZSk6KHRoaXMucGVuZGluZ1JlY29ubmVjdD0hMSx0aGlzLnBlbmRpbmdSZWNvbm5lY3RUaW1lb3V0PW51bGwsY2xlYXJUaW1lb3V0KHRoaXMuX3JlY29ubmVjdFRpbWVvdXRSZWYpKX0sRS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuX3VubG9hZEhhbmRsZXImJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLHRoaXMuX3VubG9hZEhhbmRsZXIsITEpLHRoaXMuZGlzY29ubmVjdCgpfSxFLnByb3RvdHlwZS5fY2hhbmdlVG9VbmF1dGhlbnRpY2F0ZWRTdGF0ZUFuZENsZWFyVG9rZW5zPWZ1bmN0aW9uKCl7aWYodGhpcy5hdXRoU3RhdGUhPXRoaXMuVU5BVVRIRU5USUNBVEVEKXt2YXIgdD10aGlzLmF1dGhTdGF0ZTt0aGlzLmF1dGhTdGF0ZT10aGlzLlVOQVVUSEVOVElDQVRFRCx0aGlzLnNpZ25lZEF1dGhUb2tlbj1udWxsLHRoaXMuYXV0aFRva2VuPW51bGw7dmFyIGU9e29sZFN0YXRlOnQsbmV3U3RhdGU6dGhpcy5hdXRoU3RhdGV9O28ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLFwiYXV0aFN0YXRlQ2hhbmdlXCIsZSksdD09dGhpcy5BVVRIRU5USUNBVEVEJiZvLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcImRlYXV0aGVudGljYXRlXCIpLG8ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLFwiYXV0aFRva2VuQ2hhbmdlXCIsdGhpcy5zaWduZWRBdXRoVG9rZW4pfX0sRS5wcm90b3R5cGUuX2NoYW5nZVRvQXV0aGVudGljYXRlZFN0YXRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuc2lnbmVkQXV0aFRva2VuPXQsdGhpcy5hdXRoVG9rZW49dGhpcy5fZXh0cmFjdEF1dGhUb2tlbkRhdGEodCksdGhpcy5hdXRoU3RhdGUhPXRoaXMuQVVUSEVOVElDQVRFRCl7dmFyIGU9dGhpcy5hdXRoU3RhdGU7dGhpcy5hdXRoU3RhdGU9dGhpcy5BVVRIRU5USUNBVEVEO3ZhciBuPXtvbGRTdGF0ZTplLG5ld1N0YXRlOnRoaXMuYXV0aFN0YXRlLHNpZ25lZEF1dGhUb2tlbjp0LGF1dGhUb2tlbjp0aGlzLmF1dGhUb2tlbn07dGhpcy5wcmVwYXJpbmdQZW5kaW5nU3Vic2NyaXB0aW9uc3x8dGhpcy5wcm9jZXNzUGVuZGluZ1N1YnNjcmlwdGlvbnMoKSxvLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcImF1dGhTdGF0ZUNoYW5nZVwiLG4pLG8ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLFwiYXV0aGVudGljYXRlXCIsdCl9by5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJhdXRoVG9rZW5DaGFuZ2VcIix0KX0sRS5wcm90b3R5cGUuZGVjb2RlQmFzZTY0PWZ1bmN0aW9uKHQpe3ZhciBuO2lmKHZvaWQgMD09PXIpbj1lLmF0b2I/ZS5hdG9iKHQpOmwuZGVjb2RlKHQpO2Vsc2V7bj1uZXcgcih0LFwiYmFzZTY0XCIpLnRvU3RyaW5nKFwidXRmOFwiKX1yZXR1cm4gbn0sRS5wcm90b3R5cGUuZW5jb2RlQmFzZTY0PWZ1bmN0aW9uKHQpe3ZhciBuO2lmKHZvaWQgMD09PXIpbj1lLmJ0b2E/ZS5idG9hKHQpOmwuZW5jb2RlKHQpO2Vsc2V7bj1uZXcgcih0LFwidXRmOFwiKS50b1N0cmluZyhcImJhc2U2NFwiKX1yZXR1cm4gbn0sRS5wcm90b3R5cGUuX2V4dHJhY3RBdXRoVG9rZW5EYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPSh0fHxcIlwiKS5zcGxpdChcIi5cIiksbj1lWzFdO2lmKG51bGwhPW4pe3ZhciByPW47dHJ5e3JldHVybiByPXRoaXMuZGVjb2RlQmFzZTY0KHIpLEpTT04ucGFyc2Uocil9Y2F0Y2godCl7cmV0dXJuIHJ9fXJldHVybiBudWxsfSxFLnByb3RvdHlwZS5nZXRBdXRoVG9rZW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdXRoVG9rZW59LEUucHJvdG90eXBlLmdldFNpZ25lZEF1dGhUb2tlbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpZ25lZEF1dGhUb2tlbn0sRS5wcm90b3R5cGUuYXV0aGVudGljYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLmVtaXQoXCIjYXV0aGVudGljYXRlXCIsdCxmdW5jdGlvbihyLG8pe28mJm51bGwhPW8uaXNBdXRoZW50aWNhdGVkP28uYXV0aEVycm9yJiYoby5hdXRoRXJyb3I9Zi5oeWRyYXRlRXJyb3Ioby5hdXRoRXJyb3IpKTpvPXtpc0F1dGhlbnRpY2F0ZWQ6bi5hdXRoU3RhdGUsYXV0aEVycm9yOm51bGx9LHI/KFwiQmFkQ29ubmVjdGlvbkVycm9yXCIhPXIubmFtZSYmXCJUaW1lb3V0RXJyb3JcIiE9ci5uYW1lJiZuLl9jaGFuZ2VUb1VuYXV0aGVudGljYXRlZFN0YXRlQW5kQ2xlYXJUb2tlbnMoKSxlJiZlKHIsbykpOm4uYXV0aC5zYXZlVG9rZW4obi5hdXRoVG9rZW5OYW1lLHQse30sZnVuY3Rpb24ocil7ciYmbi5fb25TQ0Vycm9yKHIpLG8uaXNBdXRoZW50aWNhdGVkP24uX2NoYW5nZVRvQXV0aGVudGljYXRlZFN0YXRlKHQpOm4uX2NoYW5nZVRvVW5hdXRoZW50aWNhdGVkU3RhdGVBbmRDbGVhclRva2VucygpLGUmJmUocixvKX0pfSl9LEUucHJvdG90eXBlLl90cnlSZWNvbm5lY3Q9ZnVuY3Rpb24odCl7dmFyIGUsbj10aGlzLHI9dGhpcy5jb25uZWN0QXR0ZW1wdHMrKyxvPXRoaXMub3B0aW9ucy5hdXRvUmVjb25uZWN0T3B0aW9ucztpZihudWxsPT10fHxyPjApe3ZhciBpPU1hdGgucm91bmQoby5pbml0aWFsRGVsYXkrKG8ucmFuZG9tbmVzc3x8MCkqTWF0aC5yYW5kb20oKSk7ZT1NYXRoLnJvdW5kKGkqTWF0aC5wb3coby5tdWx0aXBsaWVyLHIpKX1lbHNlIGU9dDtlPm8ubWF4RGVsYXkmJihlPW8ubWF4RGVsYXkpLGNsZWFyVGltZW91dCh0aGlzLl9yZWNvbm5lY3RUaW1lb3V0UmVmKSx0aGlzLnBlbmRpbmdSZWNvbm5lY3Q9ITAsdGhpcy5wZW5kaW5nUmVjb25uZWN0VGltZW91dD1lLHRoaXMuX3JlY29ubmVjdFRpbWVvdXRSZWY9c2V0VGltZW91dChmdW5jdGlvbigpe24uY29ubmVjdCgpfSxlKX0sRS5wcm90b3R5cGUuX29uU0NPcGVuPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5wcmVwYXJpbmdQZW5kaW5nU3Vic2NyaXB0aW9ucz0hMCx0Pyh0aGlzLmlkPXQuaWQsdGhpcy5waW5nVGltZW91dD10LnBpbmdUaW1lb3V0LHRoaXMudHJhbnNwb3J0LnBpbmdUaW1lb3V0PXRoaXMucGluZ1RpbWVvdXQsdC5pc0F1dGhlbnRpY2F0ZWQ/dGhpcy5fY2hhbmdlVG9BdXRoZW50aWNhdGVkU3RhdGUodC5hdXRoVG9rZW4pOnRoaXMuX2NoYW5nZVRvVW5hdXRoZW50aWNhdGVkU3RhdGVBbmRDbGVhclRva2VucygpKTp0aGlzLl9jaGFuZ2VUb1VuYXV0aGVudGljYXRlZFN0YXRlQW5kQ2xlYXJUb2tlbnMoKSx0aGlzLmNvbm5lY3RBdHRlbXB0cz0wLHRoaXMub3B0aW9ucy5hdXRvU3Vic2NyaWJlT25Db25uZWN0JiZ0aGlzLnByb2Nlc3NQZW5kaW5nU3Vic2NyaXB0aW9ucygpLG8ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLFwiY29ubmVjdFwiLHQsZnVuY3Rpb24oKXtlLnByb2Nlc3NQZW5kaW5nU3Vic2NyaXB0aW9ucygpfSksdGhpcy5fZmx1c2hFbWl0QnVmZmVyKCl9LEUucHJvdG90eXBlLl9vblNDRXJyb3I9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoZS5saXN0ZW5lcnMoXCJlcnJvclwiKS5sZW5ndGg8MSl0aHJvdyB0O28ucHJvdG90eXBlLmVtaXQuY2FsbChlLFwiZXJyb3JcIix0KX0sMCl9LEUucHJvdG90eXBlLl9zdXNwZW5kU3Vic2NyaXB0aW9ucz1mdW5jdGlvbigpe3ZhciB0LGU7Zm9yKHZhciBuIGluIHRoaXMuY2hhbm5lbHMpdGhpcy5jaGFubmVscy5oYXNPd25Qcm9wZXJ0eShuKSYmKHQ9dGhpcy5jaGFubmVsc1tuXSxlPXQuc3RhdGU9PXQuU1VCU0NSSUJFRHx8dC5zdGF0ZT09dC5QRU5ESU5HP3QuUEVORElORzp0LlVOU1VCU0NSSUJFRCx0aGlzLl90cmlnZ2VyQ2hhbm5lbFVuc3Vic2NyaWJlKHQsZSkpfSxFLnByb3RvdHlwZS5fYWJvcnRBbGxQZW5kaW5nRXZlbnRzRHVlVG9CYWRDb25uZWN0aW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXRoaXMuX2VtaXRCdWZmZXIuaGVhZDtuOyl7ZT1uLm5leHQ7dmFyIHI9bi5kYXRhO2NsZWFyVGltZW91dChyLnRpbWVvdXQpLGRlbGV0ZSByLnRpbWVvdXQsbi5kZXRhY2goKSxuPWU7dmFyIG89ci5jYWxsYmFjaztpZihvKXtkZWxldGUgci5jYWxsYmFjazt2YXIgaT1cIkV2ZW50ICdcIityLmV2ZW50K1wiJyB3YXMgYWJvcnRlZCBkdWUgdG8gYSBiYWQgY29ubmVjdGlvblwiLHM9bmV3IG0oaSx0KTtvLmNhbGwocixzLHIpfX19LEUucHJvdG90eXBlLl9vblNDQ2xvc2U9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7aWYodGhpcy5pZD1udWxsLHRoaXMudHJhbnNwb3J0JiZ0aGlzLnRyYW5zcG9ydC5vZmYoKSx0aGlzLnBlbmRpbmdSZWNvbm5lY3Q9ITEsdGhpcy5wZW5kaW5nUmVjb25uZWN0VGltZW91dD1udWxsLGNsZWFyVGltZW91dCh0aGlzLl9yZWNvbm5lY3RUaW1lb3V0UmVmKSx0aGlzLl9zdXNwZW5kU3Vic2NyaXB0aW9ucygpLHRoaXMuX2Fib3J0QWxsUGVuZGluZ0V2ZW50c0R1ZVRvQmFkQ29ubmVjdGlvbihuP1wiY29ubmVjdEFib3J0XCI6XCJkaXNjb25uZWN0XCIpLHRoaXMub3B0aW9ucy5hdXRvUmVjb25uZWN0JiYoNGUzPT10fHw0MDAxPT10fHwxMDA1PT10P3RoaXMuX3RyeVJlY29ubmVjdCgwKToxZTMhPXQmJnQ8NDUwMCYmdGhpcy5fdHJ5UmVjb25uZWN0KCkpLG4/by5wcm90b3R5cGUuZW1pdC5jYWxsKHIsXCJjb25uZWN0QWJvcnRcIix0LGUpOm8ucHJvdG90eXBlLmVtaXQuY2FsbChyLFwiZGlzY29ubmVjdFwiLHQsZSksIUUuaWdub3JlU3RhdHVzZXNbdF0pe3ZhciBpO2k9ZT9cIlNvY2tldCBjb25uZWN0aW9uIGZhaWxlZDogXCIrZTpcIlNvY2tldCBjb25uZWN0aW9uIGZhaWxlZCBmb3IgdW5rbm93biByZWFzb25zXCI7dmFyIHM9bmV3IHYoRS5lcnJvclN0YXR1c2VzW3RdfHxpLHQpO3RoaXMuX29uU0NFcnJvcihzKX19LEUucHJvdG90eXBlLl9vblNDRXZlbnQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuX3ByaXZhdGVFdmVudEhhbmRsZXJNYXBbdF07cj9yLmNhbGwodGhpcyxlLG4pOm8ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLHQsZSxmdW5jdGlvbigpe24mJm4uY2FsbGJhY2suYXBwbHkobixhcmd1bWVudHMpfSl9LEUucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuZGVjb2RlKHQpfSxFLnByb3RvdHlwZS5lbmNvZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudHJhbnNwb3J0LmVuY29kZSh0KX0sRS5wcm90b3R5cGUuX2ZsdXNoRW1pdEJ1ZmZlcj1mdW5jdGlvbigpe2Zvcih2YXIgdCxlPXRoaXMuX2VtaXRCdWZmZXIuaGVhZDtlOyl7dD1lLm5leHQ7dmFyIG49ZS5kYXRhO2UuZGV0YWNoKCksdGhpcy50cmFuc3BvcnQuZW1pdE9iamVjdChuKSxlPXR9fSxFLnByb3RvdHlwZS5faGFuZGxlRXZlbnRBY2tUaW1lb3V0PWZ1bmN0aW9uKHQsZSl7ZSYmZS5kZXRhY2goKSxkZWxldGUgdC50aW1lb3V0O3ZhciBuPXQuY2FsbGJhY2s7aWYobil7ZGVsZXRlIHQuY2FsbGJhY2s7dmFyIHI9bmV3IGcoXCJFdmVudCByZXNwb25zZSBmb3IgJ1wiK3QuZXZlbnQrXCInIHRpbWVkIG91dFwiKTtuLmNhbGwodCxyLHQpfX0sRS5wcm90b3R5cGUuX2VtaXQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7dGhpcy5zdGF0ZT09dGhpcy5DTE9TRUQmJnRoaXMuY29ubmVjdCgpO3ZhciBvPXtldmVudDp0LGNhbGxiYWNrOm59LGk9bmV3IGguSXRlbTt0aGlzLm9wdGlvbnMuY2xvbmVEYXRhP28uZGF0YT1wKGUpOm8uZGF0YT1lLGkuZGF0YT1vLG8udGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5faGFuZGxlRXZlbnRBY2tUaW1lb3V0KG8saSl9LHRoaXMuYWNrVGltZW91dCksdGhpcy5fZW1pdEJ1ZmZlci5hcHBlbmQoaSksdGhpcy5zdGF0ZT09dGhpcy5PUEVOJiZ0aGlzLl9mbHVzaEVtaXRCdWZmZXIoKX0sRS5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0KXt0aGlzLnRyYW5zcG9ydC5zZW5kKHQpfSxFLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQsZSxuKXtudWxsPT10aGlzLl9sb2NhbEV2ZW50c1t0XT90aGlzLl9lbWl0KHQsZSxuKTpvLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyx0LGUpfSxFLnByb3RvdHlwZS5wdWJsaXNoPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj17Y2hhbm5lbDp0aGlzLl9kZWNvcmF0ZUNoYW5uZWxOYW1lKHQpLGRhdGE6ZX07dGhpcy5lbWl0KFwiI3B1Ymxpc2hcIixyLG4pfSxFLnByb3RvdHlwZS5fdHJpZ2dlckNoYW5uZWxTdWJzY3JpYmU9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm5hbWU7aWYodC5zdGF0ZSE9dC5TVUJTQ1JJQkVEKXt2YXIgcj10LnN0YXRlO3Quc3RhdGU9dC5TVUJTQ1JJQkVEO3ZhciBpPXtjaGFubmVsOm4sb2xkU3RhdGU6cixuZXdTdGF0ZTp0LnN0YXRlLHN1YnNjcmlwdGlvbk9wdGlvbnM6ZX07dC5lbWl0KFwic3Vic2NyaWJlU3RhdGVDaGFuZ2VcIixpKSx0LmVtaXQoXCJzdWJzY3JpYmVcIixuLGUpLG8ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLFwic3Vic2NyaWJlU3RhdGVDaGFuZ2VcIixpKSxvLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcInN1YnNjcmliZVwiLG4sZSl9fSxFLnByb3RvdHlwZS5fdHJpZ2dlckNoYW5uZWxTdWJzY3JpYmVGYWlsPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lLm5hbWUsaT0hZS53YWl0Rm9yQXV0aHx8dGhpcy5hdXRoU3RhdGU9PXRoaXMuQVVUSEVOVElDQVRFRDtlLnN0YXRlIT1lLlVOU1VCU0NSSUJFRCYmaSYmKGUuc3RhdGU9ZS5VTlNVQlNDUklCRUQsZS5lbWl0KFwic3Vic2NyaWJlRmFpbFwiLHQscixuKSxvLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcInN1YnNjcmliZUZhaWxcIix0LHIsbikpfSxFLnByb3RvdHlwZS5fY2FuY2VsUGVuZGluZ1N1YnNjcmliZUNhbGxiYWNrPWZ1bmN0aW9uKHQpe251bGwhPXQuX3BlbmRpbmdTdWJzY3JpcHRpb25DaWQmJih0aGlzLnRyYW5zcG9ydC5jYW5jZWxQZW5kaW5nUmVzcG9uc2UodC5fcGVuZGluZ1N1YnNjcmlwdGlvbkNpZCksZGVsZXRlIHQuX3BlbmRpbmdTdWJzY3JpcHRpb25DaWQpfSxFLnByb3RvdHlwZS5fZGVjb3JhdGVDaGFubmVsTmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jaGFubmVsUHJlZml4JiYodD10aGlzLmNoYW5uZWxQcmVmaXgrdCksdH0sRS5wcm90b3R5cGUuX3VuZGVjb3JhdGVDaGFubmVsTmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jaGFubmVsUHJlZml4JiYwPT10LmluZGV4T2YodGhpcy5jaGFubmVsUHJlZml4KT90LnJlcGxhY2UodGhpcy5jaGFubmVsUHJlZml4LFwiXCIpOnR9LEUucHJvdG90eXBlLl90cnlTdWJzY3JpYmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPSF0LndhaXRGb3JBdXRofHx0aGlzLmF1dGhTdGF0ZT09dGhpcy5BVVRIRU5USUNBVEVEO2lmKHRoaXMuc3RhdGU9PXRoaXMuT1BFTiYmIXRoaXMucHJlcGFyaW5nUGVuZGluZ1N1YnNjcmlwdGlvbnMmJm51bGw9PXQuX3BlbmRpbmdTdWJzY3JpcHRpb25DaWQmJm4pe3ZhciByPXtub1RpbWVvdXQ6ITB9LGk9e2NoYW5uZWw6dGhpcy5fZGVjb3JhdGVDaGFubmVsTmFtZSh0Lm5hbWUpfTt0LndhaXRGb3JBdXRoJiYoci53YWl0Rm9yQXV0aD0hMCxpLndhaXRGb3JBdXRoPXIud2FpdEZvckF1dGgpLHQuZGF0YSYmKGkuZGF0YT10LmRhdGEpLHQuX3BlbmRpbmdTdWJzY3JpcHRpb25DaWQ9dGhpcy50cmFuc3BvcnQuZW1pdChcIiNzdWJzY3JpYmVcIixpLHIsZnVuY3Rpb24obil7ZGVsZXRlIHQuX3BlbmRpbmdTdWJzY3JpcHRpb25DaWQsbj9lLl90cmlnZ2VyQ2hhbm5lbFN1YnNjcmliZUZhaWwobix0LGkpOmUuX3RyaWdnZXJDaGFubmVsU3Vic2NyaWJlKHQsaSl9KSxvLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcInN1YnNjcmliZVJlcXVlc3RcIix0Lm5hbWUsaSl9fSxFLnByb3RvdHlwZS5zdWJzY3JpYmU9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNoYW5uZWxzW3RdO3JldHVybiBuP2UmJm4uc2V0T3B0aW9ucyhlKToobj1uZXcgaSh0LHRoaXMsZSksdGhpcy5jaGFubmVsc1t0XT1uKSxuLnN0YXRlPT1uLlVOU1VCU0NSSUJFRCYmKG4uc3RhdGU9bi5QRU5ESU5HLHRoaXMuX3RyeVN1YnNjcmliZShuKSksbn0sRS5wcm90b3R5cGUuX3RyaWdnZXJDaGFubmVsVW5zdWJzY3JpYmU9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm5hbWUscj10LnN0YXRlO2lmKHQuc3RhdGU9ZXx8dC5VTlNVQlNDUklCRUQsdGhpcy5fY2FuY2VsUGVuZGluZ1N1YnNjcmliZUNhbGxiYWNrKHQpLHI9PXQuU1VCU0NSSUJFRCl7dmFyIGk9e2NoYW5uZWw6bixvbGRTdGF0ZTpyLG5ld1N0YXRlOnQuc3RhdGV9O3QuZW1pdChcInN1YnNjcmliZVN0YXRlQ2hhbmdlXCIsaSksdC5lbWl0KFwidW5zdWJzY3JpYmVcIixuKSxvLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcInN1YnNjcmliZVN0YXRlQ2hhbmdlXCIsaSksby5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJ1bnN1YnNjcmliZVwiLG4pfX0sRS5wcm90b3R5cGUuX3RyeVVuc3Vic2NyaWJlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuc3RhdGU9PXRoaXMuT1BFTil7dmFyIGU9e25vVGltZW91dDohMH07dGhpcy5fY2FuY2VsUGVuZGluZ1N1YnNjcmliZUNhbGxiYWNrKHQpO3ZhciBuPXRoaXMuX2RlY29yYXRlQ2hhbm5lbE5hbWUodC5uYW1lKTt0aGlzLnRyYW5zcG9ydC5lbWl0KFwiI3Vuc3Vic2NyaWJlXCIsbixlKX19LEUucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2hhbm5lbHNbdF07ZSYmZS5zdGF0ZSE9ZS5VTlNVQlNDUklCRUQmJih0aGlzLl90cmlnZ2VyQ2hhbm5lbFVuc3Vic2NyaWJlKGUpLHRoaXMuX3RyeVVuc3Vic2NyaWJlKGUpKX0sRS5wcm90b3R5cGUuY2hhbm5lbD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY2hhbm5lbHNbdF07cmV0dXJuIG58fChuPW5ldyBpKHQsdGhpcyxlKSx0aGlzLmNoYW5uZWxzW3RdPW4pLG59LEUucHJvdG90eXBlLmRlc3Ryb3lDaGFubmVsPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2hhbm5lbHNbdF07ZS51bndhdGNoKCksZS51bnN1YnNjcmliZSgpLGRlbGV0ZSB0aGlzLmNoYW5uZWxzW3RdfSxFLnByb3RvdHlwZS5zdWJzY3JpcHRpb25zPWZ1bmN0aW9uKHQpe3ZhciBlLG49W107Zm9yKHZhciByIGluIHRoaXMuY2hhbm5lbHMpdGhpcy5jaGFubmVscy5oYXNPd25Qcm9wZXJ0eShyKSYmKGU9dGhpcy5jaGFubmVsc1tyXSwodD9lJiYoZS5zdGF0ZT09ZS5TVUJTQ1JJQkVEfHxlLnN0YXRlPT1lLlBFTkRJTkcpOmUmJmUuc3RhdGU9PWUuU1VCU0NSSUJFRCkmJm4ucHVzaChyKSk7cmV0dXJuIG59LEUucHJvdG90eXBlLmlzU3Vic2NyaWJlZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY2hhbm5lbHNbdF07cmV0dXJuIGU/ISFuJiYobi5zdGF0ZT09bi5TVUJTQ1JJQkVEfHxuLnN0YXRlPT1uLlBFTkRJTkcpOiEhbiYmbi5zdGF0ZT09bi5TVUJTQ1JJQkVEfSxFLnByb3RvdHlwZS5wcm9jZXNzUGVuZGluZ1N1YnNjcmlwdGlvbnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMucHJlcGFyaW5nUGVuZGluZ1N1YnNjcmlwdGlvbnM9ITE7dmFyIGU9W107Zm9yKHZhciBuIGluIHRoaXMuY2hhbm5lbHMpaWYodGhpcy5jaGFubmVscy5oYXNPd25Qcm9wZXJ0eShuKSl7dmFyIHI9dGhpcy5jaGFubmVsc1tuXTtyLnN0YXRlPT1yLlBFTkRJTkcmJmUucHVzaChyKX1lLnNvcnQoZnVuY3Rpb24odCxlKXt2YXIgbj10LnByaW9yaXR5fHwwLHI9ZS5wcmlvcml0eXx8MDtyZXR1cm4gbj5yPy0xOm48cj8xOjB9KSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fdHJ5U3Vic2NyaWJlKGUpfSl9LEUucHJvdG90eXBlLndhdGNoPWZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgZChcIk5vIGhhbmRsZXIgZnVuY3Rpb24gd2FzIHByb3ZpZGVkXCIpO3RoaXMuX2NoYW5uZWxFbWl0dGVyLm9uKHQsZSl9LEUucHJvdG90eXBlLnVud2F0Y2g9ZnVuY3Rpb24odCxlKXtlP3RoaXMuX2NoYW5uZWxFbWl0dGVyLnJlbW92ZUxpc3RlbmVyKHQsZSk6dGhpcy5fY2hhbm5lbEVtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKHQpfSxFLnByb3RvdHlwZS53YXRjaGVycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2hhbm5lbEVtaXR0ZXIubGlzdGVuZXJzKHQpfSx0LmV4cG9ydHM9RX0pLmNhbGwoZSxuKDApLG4oNCkuQnVmZmVyKX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7cmV0dXJuIGkuVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjN9ZnVuY3Rpb24gbyh0LGUpe2lmKHIoKTxlKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGhcIik7cmV0dXJuIGkuVFlQRURfQVJSQVlfU1VQUE9SVD8odD1uZXcgVWludDhBcnJheShlKSx0Ll9fcHJvdG9fXz1pLnByb3RvdHlwZSk6KG51bGw9PT10JiYodD1uZXcgaShlKSksdC5sZW5ndGg9ZSksdH1mdW5jdGlvbiBpKHQsZSxuKXtpZighKGkuVFlQRURfQVJSQVlfU1VQUE9SVHx8dGhpcyBpbnN0YW5jZW9mIGkpKXJldHVybiBuZXcgaSh0LGUsbik7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIklmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nXCIpO3JldHVybiB1KHRoaXMsdCl9cmV0dXJuIHModGhpcyx0LGUsbil9ZnVuY3Rpb24gcyh0LGUsbixyKXtpZihcIm51bWJlclwiPT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKTtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgQXJyYXlCdWZmZXImJmUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj9wKHQsZSxuLHIpOlwic3RyaW5nXCI9PXR5cGVvZiBlP2godCxlLG4pOmYodCxlKX1mdW5jdGlvbiBhKHQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKTtpZih0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJyl9ZnVuY3Rpb24gYyh0LGUsbixyKXtyZXR1cm4gYShlKSxlPD0wP28odCxlKTp2b2lkIDAhPT1uP1wic3RyaW5nXCI9PXR5cGVvZiByP28odCxlKS5maWxsKG4scik6byh0LGUpLmZpbGwobik6byh0LGUpfWZ1bmN0aW9uIHUodCxlKXtpZihhKGUpLHQ9byh0LGU8MD8wOjB8ZChlKSksIWkuVFlQRURfQVJSQVlfU1VQUE9SVClmb3IodmFyIG49MDtuPGU7KytuKXRbbl09MDtyZXR1cm4gdH1mdW5jdGlvbiBoKHQsZSxuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgbiYmXCJcIiE9PW58fChuPVwidXRmOFwiKSwhaS5pc0VuY29kaW5nKG4pKXRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJyk7dmFyIHI9MHx2KGUsbik7dD1vKHQscik7dmFyIHM9dC53cml0ZShlLG4pO3JldHVybiBzIT09ciYmKHQ9dC5zbGljZSgwLHMpKSx0fWZ1bmN0aW9uIGwodCxlKXt2YXIgbj1lLmxlbmd0aDwwPzA6MHxkKGUubGVuZ3RoKTt0PW8odCxuKTtmb3IodmFyIHI9MDtyPG47cis9MSl0W3JdPTI1NSZlW3JdO3JldHVybiB0fWZ1bmN0aW9uIHAodCxlLG4scil7aWYoZS5ieXRlTGVuZ3RoLG48MHx8ZS5ieXRlTGVuZ3RoPG4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCInb2Zmc2V0JyBpcyBvdXQgb2YgYm91bmRzXCIpO2lmKGUuYnl0ZUxlbmd0aDxuKyhyfHwwKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIidsZW5ndGgnIGlzIG91dCBvZiBib3VuZHNcIik7cmV0dXJuIGU9dm9pZCAwPT09biYmdm9pZCAwPT09cj9uZXcgVWludDhBcnJheShlKTp2b2lkIDA9PT1yP25ldyBVaW50OEFycmF5KGUsbik6bmV3IFVpbnQ4QXJyYXkoZSxuLHIpLGkuVFlQRURfQVJSQVlfU1VQUE9SVD8odD1lLHQuX19wcm90b19fPWkucHJvdG90eXBlKTp0PWwodCxlKSx0fWZ1bmN0aW9uIGYodCxlKXtpZihpLmlzQnVmZmVyKGUpKXt2YXIgbj0wfGQoZS5sZW5ndGgpO3JldHVybiB0PW8odCxuKSwwPT09dC5sZW5ndGg/dDooZS5jb3B5KHQsMCwwLG4pLHQpfWlmKGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8XCJsZW5ndGhcImluIGUpcmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIGUubGVuZ3RofHxLKGUubGVuZ3RoKT9vKHQsMCk6bCh0LGUpO2lmKFwiQnVmZmVyXCI9PT1lLnR5cGUmJlooZS5kYXRhKSlyZXR1cm4gbCh0LGUuZGF0YSl9dGhyb3cgbmV3IFR5cGVFcnJvcihcIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC5cIil9ZnVuY3Rpb24gZCh0KXtpZih0Pj1yKCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIHNpemU6IDB4XCIrcigpLnRvU3RyaW5nKDE2KStcIiBieXRlc1wiKTtyZXR1cm4gMHx0fWZ1bmN0aW9uIHkodCl7cmV0dXJuK3QhPXQmJih0PTApLGkuYWxsb2MoK3QpfWZ1bmN0aW9uIHYodCxlKXtpZihpLmlzQnVmZmVyKHQpKXJldHVybiB0Lmxlbmd0aDtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgQXJyYXlCdWZmZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyYmKEFycmF5QnVmZmVyLmlzVmlldyh0KXx8dCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSlyZXR1cm4gdC5ieXRlTGVuZ3RoO1wic3RyaW5nXCIhPXR5cGVvZiB0JiYodD1cIlwiK3QpO3ZhciBuPXQubGVuZ3RoO2lmKDA9PT1uKXJldHVybiAwO2Zvcih2YXIgcj0hMTs7KXN3aXRjaChlKXtjYXNlXCJhc2NpaVwiOmNhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBuO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmNhc2Ugdm9pZCAwOnJldHVybiBxKHQpLmxlbmd0aDtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4gMipuO2Nhc2VcImhleFwiOnJldHVybiBuPj4+MTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gSih0KS5sZW5ndGg7ZGVmYXVsdDppZihyKXJldHVybiBxKHQpLmxlbmd0aDtlPShcIlwiK2UpLnRvTG93ZXJDYXNlKCkscj0hMH19ZnVuY3Rpb24gZyh0LGUsbil7dmFyIHI9ITE7aWYoKHZvaWQgMD09PWV8fGU8MCkmJihlPTApLGU+dGhpcy5sZW5ndGgpcmV0dXJuXCJcIjtpZigodm9pZCAwPT09bnx8bj50aGlzLmxlbmd0aCkmJihuPXRoaXMubGVuZ3RoKSxuPD0wKXJldHVyblwiXCI7aWYobj4+Pj0wLGU+Pj49MCxuPD1lKXJldHVyblwiXCI7Zm9yKHR8fCh0PVwidXRmOFwiKTs7KXN3aXRjaCh0KXtjYXNlXCJoZXhcIjpyZXR1cm4gTih0aGlzLGUsbik7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIFAodGhpcyxlLG4pO2Nhc2VcImFzY2lpXCI6cmV0dXJuIFIodGhpcyxlLG4pO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBJKHRoaXMsZSxuKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gQyh0aGlzLGUsbik7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIEIodGhpcyxlLG4pO2RlZmF1bHQ6aWYocil0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrdCk7dD0odCtcIlwiKS50b0xvd2VyQ2FzZSgpLHI9ITB9fWZ1bmN0aW9uIG0odCxlLG4pe3ZhciByPXRbZV07dFtlXT10W25dLHRbbl09cn1mdW5jdGlvbiBiKHQsZSxuLHIsbyl7aWYoMD09PXQubGVuZ3RoKXJldHVybi0xO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuPyhyPW4sbj0wKTpuPjIxNDc0ODM2NDc/bj0yMTQ3NDgzNjQ3Om48LTIxNDc0ODM2NDgmJihuPS0yMTQ3NDgzNjQ4KSxuPStuLGlzTmFOKG4pJiYobj1vPzA6dC5sZW5ndGgtMSksbjwwJiYobj10Lmxlbmd0aCtuKSxuPj10Lmxlbmd0aCl7aWYobylyZXR1cm4tMTtuPXQubGVuZ3RoLTF9ZWxzZSBpZihuPDApe2lmKCFvKXJldHVybi0xO249MH1pZihcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9aS5mcm9tKGUscikpLGkuaXNCdWZmZXIoZSkpcmV0dXJuIDA9PT1lLmxlbmd0aD8tMTpFKHQsZSxuLHIsbyk7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpcmV0dXJuIGUmPTI1NSxpLlRZUEVEX0FSUkFZX1NVUFBPUlQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/bz9VaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodCxlLG4pOlVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwodCxlLG4pOkUodCxbZV0sbixyLG8pO3Rocm93IG5ldyBUeXBlRXJyb3IoXCJ2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXJcIil9ZnVuY3Rpb24gRSh0LGUsbixyLG8pe2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4gMT09PXM/dFtlXTp0LnJlYWRVSW50MTZCRShlKnMpfXZhciBzPTEsYT10Lmxlbmd0aCxjPWUubGVuZ3RoO2lmKHZvaWQgMCE9PXImJihcInVjczJcIj09PShyPVN0cmluZyhyKS50b0xvd2VyQ2FzZSgpKXx8XCJ1Y3MtMlwiPT09cnx8XCJ1dGYxNmxlXCI9PT1yfHxcInV0Zi0xNmxlXCI9PT1yKSl7aWYodC5sZW5ndGg8Mnx8ZS5sZW5ndGg8MilyZXR1cm4tMTtzPTIsYS89MixjLz0yLG4vPTJ9dmFyIHU7aWYobyl7dmFyIGg9LTE7Zm9yKHU9bjt1PGE7dSsrKWlmKGkodCx1KT09PWkoZSwtMT09PWg/MDp1LWgpKXtpZigtMT09PWgmJihoPXUpLHUtaCsxPT09YylyZXR1cm4gaCpzfWVsc2UtMSE9PWgmJih1LT11LWgpLGg9LTF9ZWxzZSBmb3IobitjPmEmJihuPWEtYyksdT1uO3U+PTA7dS0tKXtmb3IodmFyIGw9ITAscD0wO3A8YztwKyspaWYoaSh0LHUrcCkhPT1pKGUscCkpe2w9ITE7YnJlYWt9aWYobClyZXR1cm4gdX1yZXR1cm4tMX1mdW5jdGlvbiB3KHQsZSxuLHIpe249TnVtYmVyKG4pfHwwO3ZhciBvPXQubGVuZ3RoLW47cj8ocj1OdW1iZXIocikpPm8mJihyPW8pOnI9bzt2YXIgaT1lLmxlbmd0aDtpZihpJTIhPTApdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgaGV4IHN0cmluZ1wiKTtyPmkvMiYmKHI9aS8yKTtmb3IodmFyIHM9MDtzPHI7KytzKXt2YXIgYT1wYXJzZUludChlLnN1YnN0cigyKnMsMiksMTYpO2lmKGlzTmFOKGEpKXJldHVybiBzO3RbbitzXT1hfXJldHVybiBzfWZ1bmN0aW9uIGsodCxlLG4scil7cmV0dXJuIFcocShlLHQubGVuZ3RoLW4pLHQsbixyKX1mdW5jdGlvbiBUKHQsZSxuLHIpe3JldHVybiBXKHooZSksdCxuLHIpfWZ1bmN0aW9uIFModCxlLG4scil7cmV0dXJuIFQodCxlLG4scil9ZnVuY3Rpb24gXyh0LGUsbixyKXtyZXR1cm4gVyhKKGUpLHQsbixyKX1mdW5jdGlvbiBBKHQsZSxuLHIpe3JldHVybiBXKCQoZSx0Lmxlbmd0aC1uKSx0LG4scil9ZnVuY3Rpb24gQyh0LGUsbil7cmV0dXJuIDA9PT1lJiZuPT09dC5sZW5ndGg/Vi5mcm9tQnl0ZUFycmF5KHQpOlYuZnJvbUJ5dGVBcnJheSh0LnNsaWNlKGUsbikpfWZ1bmN0aW9uIFAodCxlLG4pe249TWF0aC5taW4odC5sZW5ndGgsbik7Zm9yKHZhciByPVtdLG89ZTtvPG47KXt2YXIgaT10W29dLHM9bnVsbCxhPWk+MjM5PzQ6aT4yMjM/MzppPjE5MT8yOjE7aWYobythPD1uKXt2YXIgYyx1LGgsbDtzd2l0Y2goYSl7Y2FzZSAxOmk8MTI4JiYocz1pKTticmVhaztjYXNlIDI6Yz10W28rMV0sMTI4PT0oMTkyJmMpJiYobD0oMzEmaSk8PDZ8NjMmYyk+MTI3JiYocz1sKTticmVhaztjYXNlIDM6Yz10W28rMV0sdT10W28rMl0sMTI4PT0oMTkyJmMpJiYxMjg9PSgxOTImdSkmJihsPSgxNSZpKTw8MTJ8KDYzJmMpPDw2fDYzJnUpPjIwNDcmJihsPDU1Mjk2fHxsPjU3MzQzKSYmKHM9bCk7YnJlYWs7Y2FzZSA0OmM9dFtvKzFdLHU9dFtvKzJdLGg9dFtvKzNdLDEyOD09KDE5MiZjKSYmMTI4PT0oMTkyJnUpJiYxMjg9PSgxOTImaCkmJihsPSgxNSZpKTw8MTh8KDYzJmMpPDwxMnwoNjMmdSk8PDZ8NjMmaCk+NjU1MzUmJmw8MTExNDExMiYmKHM9bCl9fW51bGw9PT1zPyhzPTY1NTMzLGE9MSk6cz42NTUzNSYmKHMtPTY1NTM2LHIucHVzaChzPj4+MTAmMTAyM3w1NTI5Nikscz01NjMyMHwxMDIzJnMpLHIucHVzaChzKSxvKz1hfXJldHVybiBPKHIpfWZ1bmN0aW9uIE8odCl7dmFyIGU9dC5sZW5ndGg7aWYoZTw9USlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdCk7Zm9yKHZhciBuPVwiXCIscj0wO3I8ZTspbis9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdC5zbGljZShyLHIrPVEpKTtyZXR1cm4gbn1mdW5jdGlvbiBSKHQsZSxuKXt2YXIgcj1cIlwiO249TWF0aC5taW4odC5sZW5ndGgsbik7Zm9yKHZhciBvPWU7bzxuOysrbylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDEyNyZ0W29dKTtyZXR1cm4gcn1mdW5jdGlvbiBJKHQsZSxuKXt2YXIgcj1cIlwiO249TWF0aC5taW4odC5sZW5ndGgsbik7Zm9yKHZhciBvPWU7bzxuOysrbylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbb10pO3JldHVybiByfWZ1bmN0aW9uIE4odCxlLG4pe3ZhciByPXQubGVuZ3RoOyghZXx8ZTwwKSYmKGU9MCksKCFufHxuPDB8fG4+cikmJihuPXIpO2Zvcih2YXIgbz1cIlwiLGk9ZTtpPG47KytpKW8rPUgodFtpXSk7cmV0dXJuIG99ZnVuY3Rpb24gQih0LGUsbil7Zm9yKHZhciByPXQuc2xpY2UoZSxuKSxvPVwiXCIsaT0wO2k8ci5sZW5ndGg7aSs9MilvKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHJbaV0rMjU2KnJbaSsxXSk7cmV0dXJuIG99ZnVuY3Rpb24geCh0LGUsbil7aWYodCUxIT0wfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvZmZzZXQgaXMgbm90IHVpbnRcIik7aWYodCtlPm4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpfWZ1bmN0aW9uIFUodCxlLG4scixvLHMpe2lmKCFpLmlzQnVmZmVyKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpO2lmKGU+b3x8ZTxzKXRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpO2lmKG4rcj50Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKX1mdW5jdGlvbiBMKHQsZSxuLHIpe2U8MCYmKGU9NjU1MzUrZSsxKTtmb3IodmFyIG89MCxpPU1hdGgubWluKHQubGVuZ3RoLW4sMik7bzxpOysrbyl0W24rb109KGUmMjU1PDw4KihyP286MS1vKSk+Pj44KihyP286MS1vKX1mdW5jdGlvbiBEKHQsZSxuLHIpe2U8MCYmKGU9NDI5NDk2NzI5NStlKzEpO2Zvcih2YXIgbz0wLGk9TWF0aC5taW4odC5sZW5ndGgtbiw0KTtvPGk7KytvKXRbbitvXT1lPj4+OCoocj9vOjMtbykmMjU1fWZ1bmN0aW9uIGoodCxlLG4scixvLGkpe2lmKG4rcj50Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKTtpZihuPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIil9ZnVuY3Rpb24gTSh0LGUsbixyLG8pe3JldHVybiBvfHxqKHQsZSxuLDQsMy40MDI4MjM0NjYzODUyODg2ZTM4LC0zLjQwMjgyMzQ2NjM4NTI4ODZlMzgpLFgud3JpdGUodCxlLG4sciwyMyw0KSxuKzR9ZnVuY3Rpb24gWSh0LGUsbixyLG8pe3JldHVybiBvfHxqKHQsZSxuLDgsMS43OTc2OTMxMzQ4NjIzMTU3ZTMwOCwtMS43OTc2OTMxMzQ4NjIzMTU3ZTMwOCksWC53cml0ZSh0LGUsbixyLDUyLDgpLG4rOH1mdW5jdGlvbiBGKHQpe2lmKHQ9Ryh0KS5yZXBsYWNlKHR0LFwiXCIpLHQubGVuZ3RoPDIpcmV0dXJuXCJcIjtmb3IoO3QubGVuZ3RoJTQhPTA7KXQrPVwiPVwiO3JldHVybiB0fWZ1bmN0aW9uIEcodCl7cmV0dXJuIHQudHJpbT90LnRyaW0oKTp0LnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIil9ZnVuY3Rpb24gSCh0KXtyZXR1cm4gdDwxNj9cIjBcIit0LnRvU3RyaW5nKDE2KTp0LnRvU3RyaW5nKDE2KX1mdW5jdGlvbiBxKHQsZSl7ZT1lfHwxLzA7Zm9yKHZhciBuLHI9dC5sZW5ndGgsbz1udWxsLGk9W10scz0wO3M8cjsrK3Mpe2lmKChuPXQuY2hhckNvZGVBdChzKSk+NTUyOTUmJm48NTczNDQpe2lmKCFvKXtpZihuPjU2MzE5KXsoZS09Myk+LTEmJmkucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9aWYocysxPT09cil7KGUtPTMpPi0xJiZpLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfW89bjtjb250aW51ZX1pZihuPDU2MzIwKXsoZS09Myk+LTEmJmkucHVzaCgyMzksMTkxLDE4OSksbz1uO2NvbnRpbnVlfW49NjU1MzYrKG8tNTUyOTY8PDEwfG4tNTYzMjApfWVsc2UgbyYmKGUtPTMpPi0xJiZpLnB1c2goMjM5LDE5MSwxODkpO2lmKG89bnVsbCxuPDEyOCl7aWYoKGUtPTEpPDApYnJlYWs7aS5wdXNoKG4pfWVsc2UgaWYobjwyMDQ4KXtpZigoZS09Mik8MClicmVhaztpLnB1c2gobj4+NnwxOTIsNjMmbnwxMjgpfWVsc2UgaWYobjw2NTUzNil7aWYoKGUtPTMpPDApYnJlYWs7aS5wdXNoKG4+PjEyfDIyNCxuPj42JjYzfDEyOCw2MyZufDEyOCl9ZWxzZXtpZighKG48MTExNDExMikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb2RlIHBvaW50XCIpO2lmKChlLT00KTwwKWJyZWFrO2kucHVzaChuPj4xOHwyNDAsbj4+MTImNjN8MTI4LG4+PjYmNjN8MTI4LDYzJm58MTI4KX19cmV0dXJuIGl9ZnVuY3Rpb24geih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7KytuKWUucHVzaCgyNTUmdC5jaGFyQ29kZUF0KG4pKTtyZXR1cm4gZX1mdW5jdGlvbiAkKHQsZSl7Zm9yKHZhciBuLHIsbyxpPVtdLHM9MDtzPHQubGVuZ3RoJiYhKChlLT0yKTwwKTsrK3Mpbj10LmNoYXJDb2RlQXQocykscj1uPj44LG89biUyNTYsaS5wdXNoKG8pLGkucHVzaChyKTtyZXR1cm4gaX1mdW5jdGlvbiBKKHQpe3JldHVybiBWLnRvQnl0ZUFycmF5KEYodCkpfWZ1bmN0aW9uIFcodCxlLG4scil7Zm9yKHZhciBvPTA7bzxyJiYhKG8rbj49ZS5sZW5ndGh8fG8+PXQubGVuZ3RoKTsrK28pZVtvK25dPXRbb107cmV0dXJuIG99ZnVuY3Rpb24gSyh0KXtyZXR1cm4gdCE9PXR9LyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgSW5qYW0gPGluZm9AaW5qYW0uaW8+IDxodHRwczovL2luamFtLmlvPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG52YXIgVj1uKDEwKSxYPW4oMTEpLFo9bigxMik7ZS5CdWZmZXI9aSxlLlNsb3dCdWZmZXI9eSxlLklOU1BFQ1RfTUFYX0JZVEVTPTUwLGkuVFlQRURfQVJSQVlfU1VQUE9SVD12b2lkIDAhPT10LlRZUEVEX0FSUkFZX1NVUFBPUlQ/dC5UWVBFRF9BUlJBWV9TVVBQT1JUOmZ1bmN0aW9uKCl7dHJ5e3ZhciB0PW5ldyBVaW50OEFycmF5KDEpO3JldHVybiB0Ll9fcHJvdG9fXz17X19wcm90b19fOlVpbnQ4QXJyYXkucHJvdG90eXBlLGZvbzpmdW5jdGlvbigpe3JldHVybiA0Mn19LDQyPT09dC5mb28oKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5zdWJhcnJheSYmMD09PXQuc3ViYXJyYXkoMSwxKS5ieXRlTGVuZ3RofWNhdGNoKHQpe3JldHVybiExfX0oKSxlLmtNYXhMZW5ndGg9cigpLGkucG9vbFNpemU9ODE5MixpLl9hdWdtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fcHJvdG9fXz1pLnByb3RvdHlwZSx0fSxpLmZyb209ZnVuY3Rpb24odCxlLG4pe3JldHVybiBzKG51bGwsdCxlLG4pfSxpLlRZUEVEX0FSUkFZX1NVUFBPUlQmJihpLnByb3RvdHlwZS5fX3Byb3RvX189VWludDhBcnJheS5wcm90b3R5cGUsaS5fX3Byb3RvX189VWludDhBcnJheSxcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuc3BlY2llcyYmaVtTeW1ib2wuc3BlY2llc109PT1pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxTeW1ib2wuc3BlY2llcyx7dmFsdWU6bnVsbCxjb25maWd1cmFibGU6ITB9KSksaS5hbGxvYz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGMobnVsbCx0LGUsbil9LGkuYWxsb2NVbnNhZmU9ZnVuY3Rpb24odCl7cmV0dXJuIHUobnVsbCx0KX0saS5hbGxvY1Vuc2FmZVNsb3c9ZnVuY3Rpb24odCl7cmV0dXJuIHUobnVsbCx0KX0saS5pc0J1ZmZlcj1mdW5jdGlvbih0KXtyZXR1cm4hKG51bGw9PXR8fCF0Ll9pc0J1ZmZlcil9LGkuY29tcGFyZT1mdW5jdGlvbih0LGUpe2lmKCFpLmlzQnVmZmVyKHQpfHwhaS5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnRzIG11c3QgYmUgQnVmZmVyc1wiKTtpZih0PT09ZSlyZXR1cm4gMDtmb3IodmFyIG49dC5sZW5ndGgscj1lLmxlbmd0aCxvPTAscz1NYXRoLm1pbihuLHIpO288czsrK28paWYodFtvXSE9PWVbb10pe249dFtvXSxyPWVbb107YnJlYWt9cmV0dXJuIG48cj8tMTpyPG4/MTowfSxpLmlzRW5jb2Rpbmc9ZnVuY3Rpb24odCl7c3dpdGNoKFN0cmluZyh0KS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJoZXhcIjpjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpjYXNlXCJhc2NpaVwiOmNhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcImJhc2U2NFwiOmNhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxpLmNvbmNhdD1mdW5jdGlvbih0LGUpe2lmKCFaKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gaS5hbGxvYygwKTt2YXIgbjtpZih2b2lkIDA9PT1lKWZvcihlPTAsbj0wO248dC5sZW5ndGg7KytuKWUrPXRbbl0ubGVuZ3RoO3ZhciByPWkuYWxsb2NVbnNhZmUoZSksbz0wO2ZvcihuPTA7bjx0Lmxlbmd0aDsrK24pe3ZhciBzPXRbbl07aWYoIWkuaXNCdWZmZXIocykpdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7cy5jb3B5KHIsbyksbys9cy5sZW5ndGh9cmV0dXJuIHJ9LGkuYnl0ZUxlbmd0aD12LGkucHJvdG90eXBlLl9pc0J1ZmZlcj0hMCxpLnByb3RvdHlwZS5zd2FwMTY9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxlbmd0aDtpZih0JTIhPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0c1wiKTtmb3IodmFyIGU9MDtlPHQ7ZSs9MiltKHRoaXMsZSxlKzEpO3JldHVybiB0aGlzfSxpLnByb3RvdHlwZS5zd2FwMzI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxlbmd0aDtpZih0JTQhPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0c1wiKTtmb3IodmFyIGU9MDtlPHQ7ZSs9NCltKHRoaXMsZSxlKzMpLG0odGhpcyxlKzEsZSsyKTtyZXR1cm4gdGhpc30saS5wcm90b3R5cGUuc3dhcDY0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5sZW5ndGg7aWYodCU4IT0wKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHNcIik7Zm9yKHZhciBlPTA7ZTx0O2UrPTgpbSh0aGlzLGUsZSs3KSxtKHRoaXMsZSsxLGUrNiksbSh0aGlzLGUrMixlKzUpLG0odGhpcyxlKzMsZSs0KTtyZXR1cm4gdGhpc30saS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD0wfHRoaXMubGVuZ3RoO3JldHVybiAwPT09dD9cIlwiOjA9PT1hcmd1bWVudHMubGVuZ3RoP1AodGhpcywwLHQpOmcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24odCl7aWYoIWkuaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXJcIik7cmV0dXJuIHRoaXM9PT10fHwwPT09aS5jb21wYXJlKHRoaXMsdCl9LGkucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXt2YXIgdD1cIlwiLG49ZS5JTlNQRUNUX01BWF9CWVRFUztyZXR1cm4gdGhpcy5sZW5ndGg+MCYmKHQ9dGhpcy50b1N0cmluZyhcImhleFwiLDAsbikubWF0Y2goLy57Mn0vZykuam9pbihcIiBcIiksdGhpcy5sZW5ndGg+biYmKHQrPVwiIC4uLiBcIikpLFwiPEJ1ZmZlciBcIit0K1wiPlwifSxpLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7aWYoIWkuaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXJcIik7aWYodm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dD90Lmxlbmd0aDowKSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz10aGlzLmxlbmd0aCksZTwwfHxuPnQubGVuZ3RofHxyPDB8fG8+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvdXQgb2YgcmFuZ2UgaW5kZXhcIik7aWYocj49byYmZT49bilyZXR1cm4gMDtpZihyPj1vKXJldHVybi0xO2lmKGU+PW4pcmV0dXJuIDE7aWYoZT4+Pj0wLG4+Pj49MCxyPj4+PTAsbz4+Pj0wLHRoaXM9PT10KXJldHVybiAwO2Zvcih2YXIgcz1vLXIsYT1uLWUsYz1NYXRoLm1pbihzLGEpLHU9dGhpcy5zbGljZShyLG8pLGg9dC5zbGljZShlLG4pLGw9MDtsPGM7KytsKWlmKHVbbF0hPT1oW2xdKXtzPXVbbF0sYT1oW2xdO2JyZWFrfXJldHVybiBzPGE/LTE6YTxzPzE6MH0saS5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24odCxlLG4pe3JldHVybi0xIT09dGhpcy5pbmRleE9mKHQsZSxuKX0saS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGIodGhpcyx0LGUsbiwhMCl9LGkucHJvdG90eXBlLmxhc3RJbmRleE9mPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gYih0aGlzLHQsZSxuLCExKX0saS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCxlLG4scil7aWYodm9pZCAwPT09ZSlyPVwidXRmOFwiLG49dGhpcy5sZW5ndGgsZT0wO2Vsc2UgaWYodm9pZCAwPT09biYmXCJzdHJpbmdcIj09dHlwZW9mIGUpcj1lLG49dGhpcy5sZW5ndGgsZT0wO2Vsc2V7aWYoIWlzRmluaXRlKGUpKXRocm93IG5ldyBFcnJvcihcIkJ1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkXCIpO2V8PTAsaXNGaW5pdGUobik/KG58PTAsdm9pZCAwPT09ciYmKHI9XCJ1dGY4XCIpKToocj1uLG49dm9pZCAwKX12YXIgbz10aGlzLmxlbmd0aC1lO2lmKCh2b2lkIDA9PT1ufHxuPm8pJiYobj1vKSx0Lmxlbmd0aD4wJiYobjwwfHxlPDApfHxlPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHNcIik7cnx8KHI9XCJ1dGY4XCIpO2Zvcih2YXIgaT0hMTs7KXN3aXRjaChyKXtjYXNlXCJoZXhcIjpyZXR1cm4gdyh0aGlzLHQsZSxuKTtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gayh0aGlzLHQsZSxuKTtjYXNlXCJhc2NpaVwiOnJldHVybiBUKHRoaXMsdCxlLG4pO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBTKHRoaXMsdCxlLG4pO2Nhc2VcImJhc2U2NFwiOnJldHVybiBfKHRoaXMsdCxlLG4pO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiBBKHRoaXMsdCxlLG4pO2RlZmF1bHQ6aWYoaSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrcik7cj0oXCJcIityKS50b0xvd2VyQ2FzZSgpLGk9ITB9fSxpLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIkJ1ZmZlclwiLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX07dmFyIFE9NDA5NjtpLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubGVuZ3RoO3Q9fn50LGU9dm9pZCAwPT09ZT9uOn5+ZSx0PDA/KHQrPW4pPDAmJih0PTApOnQ+biYmKHQ9biksZTwwPyhlKz1uKTwwJiYoZT0wKTplPm4mJihlPW4pLGU8dCYmKGU9dCk7dmFyIHI7aWYoaS5UWVBFRF9BUlJBWV9TVVBQT1JUKXI9dGhpcy5zdWJhcnJheSh0LGUpLHIuX19wcm90b19fPWkucHJvdG90eXBlO2Vsc2V7dmFyIG89ZS10O3I9bmV3IGkobyx2b2lkIDApO2Zvcih2YXIgcz0wO3M8bzsrK3MpcltzXT10aGlzW3MrdF19cmV0dXJuIHJ9LGkucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24odCxlLG4pe3R8PTAsZXw9MCxufHx4KHQsZSx0aGlzLmxlbmd0aCk7Zm9yKHZhciByPXRoaXNbdF0sbz0xLGk9MDsrK2k8ZSYmKG8qPTI1Nik7KXIrPXRoaXNbdCtpXSpvO3JldHVybiByfSxpLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKHQsZSxuKXt0fD0wLGV8PTAsbnx8eCh0LGUsdGhpcy5sZW5ndGgpO2Zvcih2YXIgcj10aGlzW3QrLS1lXSxvPTE7ZT4wJiYobyo9MjU2KTspcis9dGhpc1t0Ky0tZV0qbztyZXR1cm4gcn0saS5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fHgodCwxLHRoaXMubGVuZ3RoKSx0aGlzW3RdfSxpLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8eCh0LDIsdGhpcy5sZW5ndGgpLHRoaXNbdF18dGhpc1t0KzFdPDw4fSxpLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8eCh0LDIsdGhpcy5sZW5ndGgpLHRoaXNbdF08PDh8dGhpc1t0KzFdfSxpLnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8eCh0LDQsdGhpcy5sZW5ndGgpLCh0aGlzW3RdfHRoaXNbdCsxXTw8OHx0aGlzW3QrMl08PDE2KSsxNjc3NzIxNip0aGlzW3QrM119LGkucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHx4KHQsNCx0aGlzLmxlbmd0aCksMTY3NzcyMTYqdGhpc1t0XSsodGhpc1t0KzFdPDwxNnx0aGlzW3QrMl08PDh8dGhpc1t0KzNdKX0saS5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKHQsZSxuKXt0fD0wLGV8PTAsbnx8eCh0LGUsdGhpcy5sZW5ndGgpO2Zvcih2YXIgcj10aGlzW3RdLG89MSxpPTA7KytpPGUmJihvKj0yNTYpOylyKz10aGlzW3QraV0qbztyZXR1cm4gbyo9MTI4LHI+PW8mJihyLT1NYXRoLnBvdygyLDgqZSkpLHJ9LGkucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbih0LGUsbil7dHw9MCxlfD0wLG58fHgodCxlLHRoaXMubGVuZ3RoKTtmb3IodmFyIHI9ZSxvPTEsaT10aGlzW3QrLS1yXTtyPjAmJihvKj0yNTYpOylpKz10aGlzW3QrLS1yXSpvO3JldHVybiBvKj0xMjgsaT49byYmKGktPU1hdGgucG93KDIsOCplKSksaX0saS5wcm90b3R5cGUucmVhZEludDg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8eCh0LDEsdGhpcy5sZW5ndGgpLDEyOCZ0aGlzW3RdPy0xKigyNTUtdGhpc1t0XSsxKTp0aGlzW3RdfSxpLnByb3RvdHlwZS5yZWFkSW50MTZMRT1mdW5jdGlvbih0LGUpe2V8fHgodCwyLHRoaXMubGVuZ3RoKTt2YXIgbj10aGlzW3RdfHRoaXNbdCsxXTw8ODtyZXR1cm4gMzI3Njgmbj80Mjk0OTAxNzYwfG46bn0saS5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24odCxlKXtlfHx4KHQsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1t0KzFdfHRoaXNbdF08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LGkucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fHgodCw0LHRoaXMubGVuZ3RoKSx0aGlzW3RdfHRoaXNbdCsxXTw8OHx0aGlzW3QrMl08PDE2fHRoaXNbdCszXTw8MjR9LGkucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fHgodCw0LHRoaXMubGVuZ3RoKSx0aGlzW3RdPDwyNHx0aGlzW3QrMV08PDE2fHRoaXNbdCsyXTw8OHx0aGlzW3QrM119LGkucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fHgodCw0LHRoaXMubGVuZ3RoKSxYLnJlYWQodGhpcyx0LCEwLDIzLDQpfSxpLnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHx4KHQsNCx0aGlzLmxlbmd0aCksWC5yZWFkKHRoaXMsdCwhMSwyMyw0KX0saS5wcm90b3R5cGUucmVhZERvdWJsZUxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fHgodCw4LHRoaXMubGVuZ3RoKSxYLnJlYWQodGhpcyx0LCEwLDUyLDgpfSxpLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8eCh0LDgsdGhpcy5sZW5ndGgpLFgucmVhZCh0aGlzLHQsITEsNTIsOCl9LGkucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHQ9K3QsZXw9MCxufD0wLCFyKXtVKHRoaXMsdCxlLG4sTWF0aC5wb3coMiw4Km4pLTEsMCl9dmFyIG89MSxpPTA7Zm9yKHRoaXNbZV09MjU1JnQ7KytpPG4mJihvKj0yNTYpOyl0aGlzW2UraV09dC9vJjI1NTtyZXR1cm4gZStufSxpLnByb3RvdHlwZS53cml0ZVVJbnRCRT1mdW5jdGlvbih0LGUsbixyKXtpZih0PSt0LGV8PTAsbnw9MCwhcil7VSh0aGlzLHQsZSxuLE1hdGgucG93KDIsOCpuKS0xLDApfXZhciBvPW4tMSxpPTE7Zm9yKHRoaXNbZStvXT0yNTUmdDstLW8+PTAmJihpKj0yNTYpOyl0aGlzW2Urb109dC9pJjI1NTtyZXR1cm4gZStufSxpLnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlfD0wLG58fFUodGhpcyx0LGUsMSwyNTUsMCksaS5UWVBFRF9BUlJBWV9TVVBQT1JUfHwodD1NYXRoLmZsb29yKHQpKSx0aGlzW2VdPTI1NSZ0LGUrMX0saS5wcm90b3R5cGUud3JpdGVVSW50MTZMRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZXw9MCxufHxVKHRoaXMsdCxlLDIsNjU1MzUsMCksaS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2VdPTI1NSZ0LHRoaXNbZSsxXT10Pj4+OCk6TCh0aGlzLHQsZSwhMCksZSsyfSxpLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlfD0wLG58fFUodGhpcyx0LGUsMiw2NTUzNSwwKSxpLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbZV09dD4+PjgsdGhpc1tlKzFdPTI1NSZ0KTpMKHRoaXMsdCxlLCExKSxlKzJ9LGkucHJvdG90eXBlLndyaXRlVUludDMyTEU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PSt0LGV8PTAsbnx8VSh0aGlzLHQsZSw0LDQyOTQ5NjcyOTUsMCksaS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2UrM109dD4+PjI0LHRoaXNbZSsyXT10Pj4+MTYsdGhpc1tlKzFdPXQ+Pj44LHRoaXNbZV09MjU1JnQpOkQodGhpcyx0LGUsITApLGUrNH0saS5wcm90b3R5cGUud3JpdGVVSW50MzJCRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZXw9MCxufHxVKHRoaXMsdCxlLDQsNDI5NDk2NzI5NSwwKSxpLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbZV09dD4+PjI0LHRoaXNbZSsxXT10Pj4+MTYsdGhpc1tlKzJdPXQ+Pj44LHRoaXNbZSszXT0yNTUmdCk6RCh0aGlzLHQsZSwhMSksZSs0fSxpLnByb3RvdHlwZS53cml0ZUludExFPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHQ9K3QsZXw9MCwhcil7dmFyIG89TWF0aC5wb3coMiw4Km4tMSk7VSh0aGlzLHQsZSxuLG8tMSwtbyl9dmFyIGk9MCxzPTEsYT0wO2Zvcih0aGlzW2VdPTI1NSZ0OysraTxuJiYocyo9MjU2KTspdDwwJiYwPT09YSYmMCE9PXRoaXNbZStpLTFdJiYoYT0xKSx0aGlzW2UraV09KHQvcz4+MCktYSYyNTU7cmV0dXJuIGUrbn0saS5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbih0LGUsbixyKXtpZih0PSt0LGV8PTAsIXIpe3ZhciBvPU1hdGgucG93KDIsOCpuLTEpO1UodGhpcyx0LGUsbixvLTEsLW8pfXZhciBpPW4tMSxzPTEsYT0wO2Zvcih0aGlzW2UraV09MjU1JnQ7LS1pPj0wJiYocyo9MjU2KTspdDwwJiYwPT09YSYmMCE9PXRoaXNbZStpKzFdJiYoYT0xKSx0aGlzW2UraV09KHQvcz4+MCktYSYyNTU7cmV0dXJuIGUrbn0saS5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlfD0wLG58fFUodGhpcyx0LGUsMSwxMjcsLTEyOCksaS5UWVBFRF9BUlJBWV9TVVBQT1JUfHwodD1NYXRoLmZsb29yKHQpKSx0PDAmJih0PTI1NSt0KzEpLHRoaXNbZV09MjU1JnQsZSsxfSxpLnByb3RvdHlwZS53cml0ZUludDE2TEU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PSt0LGV8PTAsbnx8VSh0aGlzLHQsZSwyLDMyNzY3LC0zMjc2OCksaS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2VdPTI1NSZ0LHRoaXNbZSsxXT10Pj4+OCk6TCh0aGlzLHQsZSwhMCksZSsyfSxpLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PSt0LGV8PTAsbnx8VSh0aGlzLHQsZSwyLDMyNzY3LC0zMjc2OCksaS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2VdPXQ+Pj44LHRoaXNbZSsxXT0yNTUmdCk6TCh0aGlzLHQsZSwhMSksZSsyfSxpLnByb3RvdHlwZS53cml0ZUludDMyTEU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PSt0LGV8PTAsbnx8VSh0aGlzLHQsZSw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLGkuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tlXT0yNTUmdCx0aGlzW2UrMV09dD4+PjgsdGhpc1tlKzJdPXQ+Pj4xNix0aGlzW2UrM109dD4+PjI0KTpEKHRoaXMsdCxlLCEwKSxlKzR9LGkucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZXw9MCxufHxVKHRoaXMsdCxlLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksdDwwJiYodD00Mjk0OTY3Mjk1K3QrMSksaS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW2VdPXQ+Pj4yNCx0aGlzW2UrMV09dD4+PjE2LHRoaXNbZSsyXT10Pj4+OCx0aGlzW2UrM109MjU1JnQpOkQodGhpcyx0LGUsITEpLGUrNH0saS5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTSh0aGlzLHQsZSwhMCxuKX0saS5wcm90b3R5cGUud3JpdGVGbG9hdEJFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTSh0aGlzLHQsZSwhMSxuKX0saS5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFkodGhpcyx0LGUsITAsbil9LGkucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBZKHRoaXMsdCxlLCExLG4pfSxpLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQsZSxuLHIpe2lmKG58fChuPTApLHJ8fDA9PT1yfHwocj10aGlzLmxlbmd0aCksZT49dC5sZW5ndGgmJihlPXQubGVuZ3RoKSxlfHwoZT0wKSxyPjAmJnI8biYmKHI9bikscj09PW4pcmV0dXJuIDA7aWYoMD09PXQubGVuZ3RofHwwPT09dGhpcy5sZW5ndGgpcmV0dXJuIDA7aWYoZTwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwidGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kc1wiKTtpZihuPDB8fG4+PXRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kc1wiKTtpZihyPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kc1wiKTtyPnRoaXMubGVuZ3RoJiYocj10aGlzLmxlbmd0aCksdC5sZW5ndGgtZTxyLW4mJihyPXQubGVuZ3RoLWUrbik7dmFyIG8scz1yLW47aWYodGhpcz09PXQmJm48ZSYmZTxyKWZvcihvPXMtMTtvPj0wOy0tbyl0W28rZV09dGhpc1tvK25dO2Vsc2UgaWYoczwxZTN8fCFpLlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKG89MDtvPHM7KytvKXRbbytlXT10aGlzW28rbl07ZWxzZSBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCh0LHRoaXMuc3ViYXJyYXkobixuK3MpLGUpO3JldHVybiBzfSxpLnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgZT8ocj1lLGU9MCxuPXRoaXMubGVuZ3RoKTpcInN0cmluZ1wiPT10eXBlb2YgbiYmKHI9bixuPXRoaXMubGVuZ3RoKSwxPT09dC5sZW5ndGgpe3ZhciBvPXQuY2hhckNvZGVBdCgwKTtvPDI1NiYmKHQ9byl9aWYodm9pZCAwIT09ciYmXCJzdHJpbmdcIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcihcImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHImJiFpLmlzRW5jb2RpbmcocikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK3IpfWVsc2VcIm51bWJlclwiPT10eXBlb2YgdCYmKHQmPTI1NSk7aWYoZTwwfHx0aGlzLmxlbmd0aDxlfHx0aGlzLmxlbmd0aDxuKXRocm93IG5ldyBSYW5nZUVycm9yKFwiT3V0IG9mIHJhbmdlIGluZGV4XCIpO2lmKG48PWUpcmV0dXJuIHRoaXM7ZT4+Pj0wLG49dm9pZCAwPT09bj90aGlzLmxlbmd0aDpuPj4+MCx0fHwodD0wKTt2YXIgcztpZihcIm51bWJlclwiPT10eXBlb2YgdClmb3Iocz1lO3M8bjsrK3MpdGhpc1tzXT10O2Vsc2V7dmFyIGE9aS5pc0J1ZmZlcih0KT90OnEobmV3IGkodCxyKS50b1N0cmluZygpKSxjPWEubGVuZ3RoO2ZvcihzPTA7czxuLWU7KytzKXRoaXNbcytlXT1hW3MlY119cmV0dXJuIHRoaXN9O3ZhciB0dD0vW14rXFwvMC05QS1aYS16LV9dL2d9KS5jYWxsKGUsbigwKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDIpLG89ci5JbnZhbGlkQWN0aW9uRXJyb3IsaT1mdW5jdGlvbih0LGUpe3RoaXMuc29ja2V0PXQsdGhpcy5pZD1lLHRoaXMuc2VudD0hMX07aS5wcm90b3R5cGUuX3Jlc3BvbmQ9ZnVuY3Rpb24odCl7aWYodGhpcy5zZW50KXRocm93IG5ldyBvKFwiUmVzcG9uc2UgXCIrdGhpcy5pZCtcIiBoYXMgYWxyZWFkeSBiZWVuIHNlbnRcIik7dGhpcy5zZW50PSEwLHRoaXMuc29ja2V0LnNlbmQodGhpcy5zb2NrZXQuZW5jb2RlKHQpKX0saS5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKHQpe2lmKHRoaXMuaWQpe3ZhciBlPXtyaWQ6dGhpcy5pZH07dm9pZCAwIT09dCYmKGUuZGF0YT10KSx0aGlzLl9yZXNwb25kKGUpfX0saS5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmlkKXt2YXIgbj1yLmRlaHlkcmF0ZUVycm9yKHQpLG89e3JpZDp0aGlzLmlkLGVycm9yOm59O3ZvaWQgMCE9PWUmJihvLmRhdGE9ZSksdGhpcy5fcmVzcG9uZChvKX19LGkucHJvdG90eXBlLmNhbGxiYWNrPWZ1bmN0aW9uKHQsZSl7dD90aGlzLmVycm9yKHQsZSk6dGhpcy5lbmQoZSl9LHQuZXhwb3J0cy5SZXNwb25zZT1pfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZS5kZWNvZGU9ZS5wYXJzZT1uKDE4KSxlLmVuY29kZT1lLnN0cmluZ2lmeT1uKDE5KX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiByKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfXZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCkscz1uKDgpLGE9big5KSxjPW4oMjcpLkV2ZW50RW1pdHRlcjt0LkluamFtPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGModCl7ZSh0aGlzLGMpO3ZhciBuPXIodGhpcywoYy5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihjKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gbi5jcmVkZW50aWFscz10LG59cmV0dXJuIG8oYyxuKSxpKGMsW3trZXk6XCJjb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3QuU29ja2V0PWEuY29ubmVjdCh7aG9zdG5hbWU6cy5ob3N0LHNlY3VyZTpzLnNlY3VyZSxwb3J0OnMucG9ydCxwYXRoOnMucGF0aCxhdXRoVG9rZW5OYW1lOlwiSW5qYW0uYXV0aFRva2VuXCJ9KSx0LmJhdGNoUG9zaXRpb25zPVtdLFNvY2tldC5vbihcImNvbm5lY3RpbmdcIixmdW5jdGlvbigpe2UuZW1pdChcImNvbm5lY3RpbmdcIil9KS5vbihcImNvbm5lY3RcIixmdW5jdGlvbih0KXtlLmVtaXQoXCJjb25uZWN0ZWRcIiksdC5pc0F1dGhlbnRpY2F0ZWR8fChlLmVtaXQoXCJ1bmF1dGhvcml6ZWRcIiksZS5jcmVkZW50aWFscy5wYWNrYWdlX25hbWU9ZS5nZXRQYWNrYWdlTmFtZSgpLFNvY2tldC5lbWl0KFwibG9naW5cIixlLmNyZWRlbnRpYWxzLGZ1bmN0aW9uKHQpe30pKX0pLm9uKFwidG9TdWJzY3JpYmVcIixmdW5jdGlvbih0KXtlLnN1YnNjcmliZSh0KX0pLm9uKFwic3Vic2NyaWJlXCIsZnVuY3Rpb24odCl7ZS5lbWl0KFwic3Vic2NyaWJlZFwiLHQpfSkub24oXCJzdWJzY3JpYmVGYWlsXCIsZnVuY3Rpb24odCl7ZS5lbWl0KFwic3Vic2NyaWJlRmFpbFwiLHQpfSkub24oXCJ1bnN1YnNjcmliZVwiLGZ1bmN0aW9uKHQpe2UuZW1pdChcInVuc3Vic2NyaWJlZFwiLHQpfSkub24oXCJhdXRoZW50aWNhdGVcIixmdW5jdGlvbih0KXtlLmVtaXQoXCJhdXRoZW50aWNhdGVkXCIsdCl9KS5vbihcImRlYXV0aGVudGljYXRlXCIsZnVuY3Rpb24oKXtlLmVtaXQoXCJ1bmF1dGhvcml6ZWRcIiksU29ja2V0LmVtaXQoXCJsb2dpblwiLGUuY3JlZGVudGlhbHMsZnVuY3Rpb24odCl7fSl9KS5vbihcImRpc2Nvbm5lY3RcIixmdW5jdGlvbih0KXtlLmVtaXQoXCJkaXNjb25uZWN0ZWRcIix0KX0pLm9uKFwiY2xvc2VcIixmdW5jdGlvbih0KXtlLmVtaXQoXCJjbG9zZWRcIix0KX0pfX0se2tleTpcIndhdGNoTG9jYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlLG4pe2U9dm9pZCAwPT09ZXx8ZSxuPXZvaWQgMCE9PW4mJm47dmFyIHI9dGhpcyxvPXt0aW1lb3V0OjVlMyxlbmFibGVIaWdoQWNjdXJhY3k6ITAsbWF4aW11bUFnZToxLzB9O2U/KHQud2F0Y2hMb2NhdGlvbkludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dC5nZXRDdXJyZW50UG9zaXRpb249bmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihyLnNldEJhdGNoUG9zaXRpb25zLHRoaXMuZ2VvbG9jYXRpb25FcnJvcixvKX0sNTAwKSx0LmVtaXROZXdQb3NpdGlvbkludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dC5iYXRjaFBvc2l0aW9ucy5sZW5ndGgmJihyLmVtaXQoXCJuZXdQb3NpdGlvblwiLHtjb29yZGluYXRlczpoKHQuYmF0Y2hQb3NpdGlvbnMpfSksdC5iYXRjaFBvc2l0aW9ucz1bXSl9LDVlMykpOm4mJm4+PTNlMz90LmVtaXROZXdQb3NpdGlvbkludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dC5nZXRDdXJyZW50UG9zaXRpb249bmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihmdW5jdGlvbih0KXtyLmVtaXQoXCJuZXdQb3NpdGlvblwiLHtsYXQ6dC5jb29yZHMubGF0aXR1ZGUsbG5nOnQuY29vcmRzLmxvbmdpdHVkZX0pfSx0aGlzLmdlb2xvY2F0aW9uRXJyb3Isbyl9LG4pOnQud2F0Y2hQb3NpdGlvbj1uYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbihmdW5jdGlvbih0KXtyLmVtaXQoXCJuZXdQb3NpdGlvblwiLHtsYXQ6dC5jb29yZHMubGF0aXR1ZGUsbG5nOnQuY29vcmRzLmxvbmdpdHVkZX0pfSx0aGlzLmdlb2xvY2F0aW9uRXJyb3Isbyl9fSx7a2V5Olwic3RvcFdhdGNoTG9jYXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe25hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHQud2F0Y2hQb3NpdGlvbiksY2xlYXJJbnRlcnZhbCh0LndhdGNoTG9jYXRpb25JbnRlcnZhbCksY2xlYXJJbnRlcnZhbCh0LmVtaXROZXdQb3NpdGlvbkludGVydmFsKX19LHtrZXk6XCJ1cGRhdGVMb2NhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe1NvY2tldC5lbWl0KFwibmV3UG9zaXRpb25cIix0KX19LHtrZXk6XCJzdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO1NvY2tldC5zdWJzY3JpYmUodCx7d2FpdEZvckF1dGg6ITB9KS53YXRjaChmdW5jdGlvbihuKXtlLndhdGNoRGF0YSh0LG4pfSl9fSx7a2V5OlwidW5zdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbih0KXtTb2NrZXQudW5zdWJzY3JpYmUodCl9fSx7a2V5Olwid2F0Y2hcIix2YWx1ZTpmdW5jdGlvbih0KXtTb2NrZXQud2F0Y2goZnVuY3Rpb24oZSl7JHRoaXMud2F0Y2hEYXRhKHQsZSl9KX19LHtrZXk6XCJ1bndhdGNoXCIsdmFsdWU6ZnVuY3Rpb24odCl7U29ja2V0LnVud2F0Y2godCl9fSx7a2V5OlwiaXNTdWJzY3JpYmVkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPXZvaWQgMD09PWV8fGUsU29ja2V0LmlzU3Vic2NyaWJlZCh0LGUpfX0se2tleTpcInB1Ymxpc2hcIix2YWx1ZTpmdW5jdGlvbih0KXtTb2NrZXQucHVibGlzaCh0aGlzLmNyZWRlbnRpYWxzLnBoeXNpY2FsX2lkLHQpfX0se2tleTpcIndhdGNoRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih1KGUpPyhlPUpTT04ucGFyc2UoZSksZS5jaGFubmVsPXQpOmU9e2NoYW5uZWw6dCxkYXRhOmV9LGUubG9jYXRpb24paWYoZS5sb2NhdGlvbi5jb29yZGluYXRlcyl7dmFyIHI9ZS5sb2NhdGlvbi5jb29yZGluYXRlcztkZWxldGUgZS5sb2NhdGlvbi5jb29yZGluYXRlcyxmdW5jdGlvbiB0KCl7c2V0VGltZW91dChmdW5jdGlvbigpeysrbzxyLmxlbmd0aCYmKGUubG9jYXRpb24ubGF0PXJbb10ubGF0LGUubG9jYXRpb24ubG5nPXJbb10ubG5nLG4uZW1pdChcInRyYWNraW5nXCIsZSksdCgpKX0sNTAwKX0oKTt2YXIgbz0wfWVsc2Ugbi5lbWl0KFwidHJhY2tpbmdcIixlKTtlbHNlIG4uZW1pdChcInJhd0RhdGFcIixlKX19LHtrZXk6XCJnZW9sb2NhdGlvbkVycm9yXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5sZW5ndGg+MCYmY29uc29sZS5sb2coXCJHZW8gRXJyb3I6IFwiK0pTT04uc3RyaW5naWZ5KHQpKX19LHtrZXk6XCJzZXRCYXRjaFBvc2l0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXtsYXQ6ZS5jb29yZHMubGF0aXR1ZGUsbG5nOmUuY29vcmRzLmxvbmdpdHVkZX07dC5iYXRjaFBvc2l0aW9ucy5wdXNoKG4pLHQuYmF0Y2hQb3NpdGlvbnMubGVuZ3RoPjUwJiYodC5iYXRjaFBvc2l0aW9ucz10LmJhdGNoUG9zaXRpb25zLnNsaWNlKHQuYmF0Y2hQb3NpdGlvbnMubGVuZ3RoLTUwLHQuYmF0Y2hQb3NpdGlvbnMubGVuZ3RoKSl9fSx7a2V5OlwiZGlzY29ubmVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7U29ja2V0LmRlc3Ryb3koKSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcImNvbm5lY3RpbmdcIiksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJjb25uZWN0ZWRcIiksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJhdXRoZW50aWNhdGVkXCIpLHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKFwidW5hdXRob3JpemVkXCIpLHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKFwic3Vic2NyaWJlZFwiKSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcInN1YnNjcmliZUZhaWxcIiksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJ1bnN1YnNjcmliZWRcIiksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyYXdEYXRhXCIpLHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKFwidHJhY2tpbmdcIiksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJuZXdQb3NpdGlvblwiKSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcImRpc2Nvbm5lY3RlZFwiKSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcImNsb3NlZFwiKSxjbGVhckludGVydmFsKHQud2F0Y2hMb2NhdGlvbkludGVydmFsKSxjbGVhckludGVydmFsKHQuZW1pdE5ld1Bvc2l0aW9uSW50ZXJ2YWwpfX0se2tleTpcImdldFBhY2thZ2VOYW1lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5sb2NhdGlvbiYmXCJcIiE9dC5sb2NhdGlvbi5ob3N0bmFtZT90LmxvY2F0aW9uLmhvc3RuYW1lOlwibG9jYWxob3N0XCJ9fSx7a2V5OlwiY2xlYXJUb2tlblwiLHZhbHVlOmZ1bmN0aW9uKCl7dC5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcIkluamFtLmF1dGhUb2tlblwiKX19XSksY30oYyk7dmFyIHU9ZnVuY3Rpb24odCl7dHJ5e0pTT04ucGFyc2UodCl9Y2F0Y2godCl7cmV0dXJuITF9cmV0dXJuITB9LGg9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49e30scj0wLG89dC5sZW5ndGg7cjxvO3IrKyluW3Rbcl1bZV1dfHwoblt0W3JdW2VdXT10W3JdKTt2YXIgaT1bXTtmb3IodmFyIHMgaW4gbilpLnB1c2gobltzXSk7cmV0dXJuIGl9O0FycmF5LnByb3RvdHlwZS5pbmRleE9mfHwoQXJyYXkucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24odCxlKXt2YXIgbjtpZihudWxsPT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3IoJ1widGhpc1wiIGlzIG51bGwgb3Igbm90IGRlZmluZWQnKTt2YXIgcj1PYmplY3QodGhpcyksbz1yLmxlbmd0aD4+PjA7aWYoMD09PW8pcmV0dXJuLTE7aWYobj0rZXx8MCwxLzA9PT1NYXRoLmFicyhuKSYmKG49MCksbj49bylyZXR1cm4tMTtmb3Iobj1NYXRoLm1heCgwPD1uP246by1NYXRoLmFicyhuKSwwKTtuPG87KXtpZihuIGluIHImJnJbbl09PT10KXJldHVybiBuO24rK31yZXR1cm4tMX0pfSkuY2FsbChlLG4oMCkpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17aG9zdDpcImNvcmUuaW5qYW0uaW9cIixwb3J0OjgwODAscGF0aDpcIi9zXCIsc2VjdXJlOiEwfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMyksbz1uKDI2KTt0LmV4cG9ydHMuU0NTb2NrZXRDcmVhdG9yPW8sdC5leHBvcnRzLlNDU29ja2V0PXIsdC5leHBvcnRzLkVtaXR0ZXI9bigxKSx0LmV4cG9ydHMuY29ubmVjdD1mdW5jdGlvbih0KXtyZXR1cm4gby5jb25uZWN0KHQpfSx0LmV4cG9ydHMuZGVzdHJveT1mdW5jdGlvbih0KXtyZXR1cm4gby5kZXN0cm95KHQpfSx0LmV4cG9ydHMuY29ubmVjdGlvbnM9by5jb25uZWN0aW9ucyx0LmV4cG9ydHMudmVyc2lvbj1cIjcuMC4yXCJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe3ZhciBlPXQubGVuZ3RoO2lmKGUlND4wKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDRcIik7cmV0dXJuXCI9XCI9PT10W2UtMl0/MjpcIj1cIj09PXRbZS0xXT8xOjB9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gMyp0Lmxlbmd0aC80LXIodCl9ZnVuY3Rpb24gaSh0KXt2YXIgZSxuLG8saSxzLGE9dC5sZW5ndGg7aT1yKHQpLHM9bmV3IGwoMyphLzQtaSksbj1pPjA/YS00OmE7dmFyIGM9MDtmb3IoZT0wO2U8bjtlKz00KW89aFt0LmNoYXJDb2RlQXQoZSldPDwxOHxoW3QuY2hhckNvZGVBdChlKzEpXTw8MTJ8aFt0LmNoYXJDb2RlQXQoZSsyKV08PDZ8aFt0LmNoYXJDb2RlQXQoZSszKV0sc1tjKytdPW8+PjE2JjI1NSxzW2MrK109bz4+OCYyNTUsc1tjKytdPTI1NSZvO3JldHVybiAyPT09aT8obz1oW3QuY2hhckNvZGVBdChlKV08PDJ8aFt0LmNoYXJDb2RlQXQoZSsxKV0+PjQsc1tjKytdPTI1NSZvKToxPT09aSYmKG89aFt0LmNoYXJDb2RlQXQoZSldPDwxMHxoW3QuY2hhckNvZGVBdChlKzEpXTw8NHxoW3QuY2hhckNvZGVBdChlKzIpXT4+MixzW2MrK109bz4+OCYyNTUsc1tjKytdPTI1NSZvKSxzfWZ1bmN0aW9uIHModCl7cmV0dXJuIHVbdD4+MTgmNjNdK3VbdD4+MTImNjNdK3VbdD4+NiY2M10rdVs2MyZ0XX1mdW5jdGlvbiBhKHQsZSxuKXtmb3IodmFyIHIsbz1bXSxpPWU7aTxuO2krPTMpcj0odFtpXTw8MTYpKyh0W2krMV08PDgpK3RbaSsyXSxvLnB1c2gocyhyKSk7cmV0dXJuIG8uam9pbihcIlwiKX1mdW5jdGlvbiBjKHQpe2Zvcih2YXIgZSxuPXQubGVuZ3RoLHI9biUzLG89XCJcIixpPVtdLHM9MCxjPW4tcjtzPGM7cys9MTYzODMpaS5wdXNoKGEodCxzLHMrMTYzODM+Yz9jOnMrMTYzODMpKTtyZXR1cm4gMT09PXI/KGU9dFtuLTFdLG8rPXVbZT4+Ml0sbys9dVtlPDw0JjYzXSxvKz1cIj09XCIpOjI9PT1yJiYoZT0odFtuLTJdPDw4KSt0W24tMV0sbys9dVtlPj4xMF0sbys9dVtlPj40JjYzXSxvKz11W2U8PDImNjNdLG8rPVwiPVwiKSxpLnB1c2gobyksaS5qb2luKFwiXCIpfWUuYnl0ZUxlbmd0aD1vLGUudG9CeXRlQXJyYXk9aSxlLmZyb21CeXRlQXJyYXk9Yztmb3IodmFyIHU9W10saD1bXSxsPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5P1VpbnQ4QXJyYXk6QXJyYXkscD1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIixmPTAsZD1wLmxlbmd0aDtmPGQ7KytmKXVbZl09cFtmXSxoW3AuY2hhckNvZGVBdChmKV09ZjtoW1wiLVwiLmNoYXJDb2RlQXQoMCldPTYyLGhbXCJfXCIuY2hhckNvZGVBdCgwKV09NjN9LGZ1bmN0aW9uKHQsZSl7ZS5yZWFkPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGkscyxhPTgqby1yLTEsYz0oMTw8YSktMSx1PWM+PjEsaD0tNyxsPW4/by0xOjAscD1uPy0xOjEsZj10W2UrbF07Zm9yKGwrPXAsaT1mJigxPDwtaCktMSxmPj49LWgsaCs9YTtoPjA7aT0yNTYqaSt0W2UrbF0sbCs9cCxoLT04KTtmb3Iocz1pJigxPDwtaCktMSxpPj49LWgsaCs9cjtoPjA7cz0yNTYqcyt0W2UrbF0sbCs9cCxoLT04KTtpZigwPT09aSlpPTEtdTtlbHNle2lmKGk9PT1jKXJldHVybiBzP05hTjoxLzAqKGY/LTE6MSk7cys9TWF0aC5wb3coMixyKSxpLT11fXJldHVybihmPy0xOjEpKnMqTWF0aC5wb3coMixpLXIpfSxlLndyaXRlPWZ1bmN0aW9uKHQsZSxuLHIsbyxpKXt2YXIgcyxhLGMsdT04Kmktby0xLGg9KDE8PHUpLTEsbD1oPj4xLHA9MjM9PT1vP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MCxmPXI/MDppLTEsZD1yPzE6LTEseT1lPDB8fDA9PT1lJiYxL2U8MD8xOjA7Zm9yKGU9TWF0aC5hYnMoZSksaXNOYU4oZSl8fGU9PT0xLzA/KGE9aXNOYU4oZSk/MTowLHM9aCk6KHM9TWF0aC5mbG9vcihNYXRoLmxvZyhlKS9NYXRoLkxOMiksZSooYz1NYXRoLnBvdygyLC1zKSk8MSYmKHMtLSxjKj0yKSxlKz1zK2w+PTE/cC9jOnAqTWF0aC5wb3coMiwxLWwpLGUqYz49MiYmKHMrKyxjLz0yKSxzK2w+PWg/KGE9MCxzPWgpOnMrbD49MT8oYT0oZSpjLTEpKk1hdGgucG93KDIsbykscys9bCk6KGE9ZSpNYXRoLnBvdygyLGwtMSkqTWF0aC5wb3coMixvKSxzPTApKTtvPj04O3RbbitmXT0yNTUmYSxmKz1kLGEvPTI1NixvLT04KTtmb3Iocz1zPDxvfGEsdSs9bzt1PjA7dFtuK2ZdPTI1NSZzLGYrPWQscy89MjU2LHUtPTgpO3RbbitmLWRdfD0xMjgqeX19LGZ1bmN0aW9uKHQsZSl7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09bi5jYWxsKHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1mdW5jdGlvbih0LGUsbil7ci5jYWxsKHRoaXMpLHRoaXMuUEVORElORz1cInBlbmRpbmdcIix0aGlzLlNVQlNDUklCRUQ9XCJzdWJzY3JpYmVkXCIsdGhpcy5VTlNVQlNDUklCRUQ9XCJ1bnN1YnNjcmliZWRcIix0aGlzLm5hbWU9dCx0aGlzLnN0YXRlPXRoaXMuVU5TVUJTQ1JJQkVELHRoaXMuY2xpZW50PWUsdGhpcy5vcHRpb25zPW58fHt9LHRoaXMuc2V0T3B0aW9ucyh0aGlzLm9wdGlvbnMpfTtvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxvLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3R8fCh0PXt9KSx0aGlzLndhaXRGb3JBdXRoPXQud2FpdEZvckF1dGh8fCExLHZvaWQgMCE9PXQuZGF0YSYmKHRoaXMuZGF0YT10LmRhdGEpfSxvLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlfSxvLnByb3RvdHlwZS5zdWJzY3JpYmU9ZnVuY3Rpb24odCl7dGhpcy5jbGllbnQuc3Vic2NyaWJlKHRoaXMubmFtZSx0KX0sby5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt0aGlzLmNsaWVudC51bnN1YnNjcmliZSh0aGlzLm5hbWUpfSxvLnByb3RvdHlwZS5pc1N1YnNjcmliZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xpZW50LmlzU3Vic2NyaWJlZCh0aGlzLm5hbWUsdCl9LG8ucHJvdG90eXBlLnB1Ymxpc2g9ZnVuY3Rpb24odCxlKXt0aGlzLmNsaWVudC5wdWJsaXNoKHRoaXMubmFtZSx0LGUpfSxvLnByb3RvdHlwZS53YXRjaD1mdW5jdGlvbih0KXt0aGlzLmNsaWVudC53YXRjaCh0aGlzLm5hbWUsdCl9LG8ucHJvdG90eXBlLnVud2F0Y2g9ZnVuY3Rpb24odCl7dGhpcy5jbGllbnQudW53YXRjaCh0aGlzLm5hbWUsdCl9LG8ucHJvdG90eXBlLndhdGNoZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xpZW50LndhdGNoZXJzKHRoaXMubmFtZSl9LG8ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNsaWVudC5kZXN0cm95Q2hhbm5lbCh0aGlzLm5hbWUpfSx0LmV4cG9ydHMuU0NDaGFubmVsPW99LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdLG49W107cmV0dXJuIGZ1bmN0aW9uIHQocixvKXt2YXIgaSxzLGE7aWYoIShcIm9iamVjdFwiIT10eXBlb2Ygcnx8bnVsbD09PXJ8fHIgaW5zdGFuY2VvZiBCb29sZWFufHxyIGluc3RhbmNlb2YgRGF0ZXx8ciBpbnN0YW5jZW9mIE51bWJlcnx8ciBpbnN0YW5jZW9mIFJlZ0V4cHx8ciBpbnN0YW5jZW9mIFN0cmluZykpe2ZvcihpPTA7aTxlLmxlbmd0aDtpKz0xKWlmKGVbaV09PT1yKXJldHVybnskcmVmOm5baV19O2lmKGUucHVzaChyKSxuLnB1c2gobyksXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShyKSlmb3IoYT1bXSxpPTA7aTxyLmxlbmd0aDtpKz0xKWFbaV09dChyW2ldLG8rXCJbXCIraStcIl1cIik7ZWxzZXthPXt9O2ZvcihzIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIscykmJihhW3NdPXQocltzXSxvK1wiW1wiK0pTT04uc3RyaW5naWZ5KHMpK1wiXVwiKSl9cmV0dXJuIGF9cmV0dXJuIHJ9KHQsXCIkXCIpfX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXt2YXIgbj1mdW5jdGlvbigpe3RoaXMuX2ludGVybmFsU3RvcmFnZT17fSx0aGlzLmlzTG9jYWxTdG9yYWdlRW5hYmxlZD10aGlzLl9jaGVja0xvY2FsU3RvcmFnZUVuYWJsZWQoKX07bi5wcm90b3R5cGUuX2NoZWNrTG9jYWxTdG9yYWdlRW5hYmxlZD1mdW5jdGlvbigpe3ZhciB0O3RyeXtlLmxvY2FsU3RvcmFnZSxlLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiX19zY0xvY2FsU3RvcmFnZVRlc3RcIiwxKSxlLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiX19zY0xvY2FsU3RvcmFnZVRlc3RcIil9Y2F0Y2goZSl7dD1lfXJldHVybiF0fSxuLnByb3RvdHlwZS5zYXZlVG9rZW49ZnVuY3Rpb24odCxuLHIsbyl7dGhpcy5pc0xvY2FsU3RvcmFnZUVuYWJsZWQmJmUubG9jYWxTdG9yYWdlP2UubG9jYWxTdG9yYWdlLnNldEl0ZW0odCxuKTp0aGlzLl9pbnRlcm5hbFN0b3JhZ2VbdF09bixvJiZvKG51bGwsbil9LG4ucHJvdG90eXBlLnJlbW92ZVRva2VuPWZ1bmN0aW9uKHQsbil7dmFyIHI7dGhpcy5sb2FkVG9rZW4odCxmdW5jdGlvbih0LGUpe3I9ZX0pLHRoaXMuaXNMb2NhbFN0b3JhZ2VFbmFibGVkJiZlLmxvY2FsU3RvcmFnZT9lLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHQpOmRlbGV0ZSB0aGlzLl9pbnRlcm5hbFN0b3JhZ2VbdF0sbiYmbihudWxsLHIpfSxuLnByb3RvdHlwZS5sb2FkVG9rZW49ZnVuY3Rpb24odCxuKXt2YXIgcjtyPXRoaXMuaXNMb2NhbFN0b3JhZ2VFbmFibGVkJiZlLmxvY2FsU3RvcmFnZT9lLmxvY2FsU3RvcmFnZS5nZXRJdGVtKHQpOnRoaXMuX2ludGVybmFsU3RvcmFnZVt0XXx8bnVsbCxuKG51bGwscil9LHQuZXhwb3J0cy5BdXRoRW5naW5lPW59KS5jYWxsKGUsbigwKSl9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7dmFyIG49XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIscj0vXlsgXFxuXFxyXFx0XSpbe1xcW10vLG89ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBVaW50OEFycmF5KHQpLHI9ZS5sZW5ndGgsbz1cIlwiLGk9MDtpPHI7aSs9MylvKz1uW2VbaV0+PjJdLG8rPW5bKDMmZVtpXSk8PDR8ZVtpKzFdPj40XSxvKz1uWygxNSZlW2krMV0pPDwyfGVbaSsyXT4+Nl0sbys9bls2MyZlW2krMl1dO3JldHVybiByJTM9PTI/bz1vLnN1YnN0cmluZygwLG8ubGVuZ3RoLTEpK1wiPVwiOnIlMz09MSYmKG89by5zdWJzdHJpbmcoMCxvLmxlbmd0aC0yKStcIj09XCIpLG99LGk9ZnVuY3Rpb24odCxuKXtpZihlLkFycmF5QnVmZmVyJiZuIGluc3RhbmNlb2YgZS5BcnJheUJ1ZmZlcilyZXR1cm57YmFzZTY0OiEwLGRhdGE6byhuKX07aWYoZS5CdWZmZXIpe2lmKG4gaW5zdGFuY2VvZiBlLkJ1ZmZlcilyZXR1cm57YmFzZTY0OiEwLGRhdGE6bi50b1N0cmluZyhcImJhc2U2NFwiKX07aWYobiYmXCJCdWZmZXJcIj09PW4udHlwZSYmQXJyYXkuaXNBcnJheShuLmRhdGEpKXt2YXIgcjtyZXR1cm4gcj1lLkJ1ZmZlci5mcm9tP2UuQnVmZmVyLmZyb20obi5kYXRhKTpuZXcgZS5CdWZmZXIobi5kYXRhKSx7YmFzZTY0OiEwLGRhdGE6ci50b1N0cmluZyhcImJhc2U2NFwiKX19fXJldHVybiBufTt0LmV4cG9ydHMuZGVjb2RlPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXQpcmV0dXJuIG51bGw7aWYoXCIjMVwiPT09dHx8XCIjMlwiPT09dClyZXR1cm4gdDt2YXIgZT10LnRvU3RyaW5nKCk7aWYoIXIudGVzdChlKSlyZXR1cm4gZTt0cnl7cmV0dXJuIEpTT04ucGFyc2UoZSl9Y2F0Y2godCl7fXJldHVybiBlfSx0LmV4cG9ydHMuZW5jb2RlPWZ1bmN0aW9uKHQpe3JldHVyblwiIzFcIj09PXR8fFwiIzJcIj09PXQ/dDpKU09OLnN0cmluZ2lmeSh0LGkpfX0pLmNhbGwoZSxuKDApKX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXt2YXIgcixvLGk9bigxKSxzPW4oNSkuUmVzcG9uc2UsYT1uKDYpO2UuV2ViU29ja2V0PyhyPWUuV2ViU29ja2V0LG89ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHIodCl9KToocj1uKDIwKSxvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyByKHQsbnVsbCxlKX0pO3ZhciBjPW4oMiksdT1jLlRpbWVvdXRFcnJvcixoPWMuQmFkQ29ubmVjdGlvbkVycm9yLGw9ZnVuY3Rpb24odCxlLG4pe3RoaXMuc3RhdGU9dGhpcy5DTE9TRUQsdGhpcy5hdXRoPXQsdGhpcy5jb2RlYz1lLHRoaXMub3B0aW9ucz1uLHRoaXMuY29ubmVjdFRpbWVvdXQ9bi5jb25uZWN0VGltZW91dCx0aGlzLnBpbmdUaW1lb3V0PW4uYWNrVGltZW91dCx0aGlzLmNhbGxJZEdlbmVyYXRvcj1uLmNhbGxJZEdlbmVyYXRvcix0aGlzLmF1dGhUb2tlbk5hbWU9bi5hdXRoVG9rZW5OYW1lLHRoaXMuX3BpbmdUaW1lb3V0VGlja2VyPW51bGwsdGhpcy5fY2FsbGJhY2tNYXA9e30sdGhpcy5vcGVuKCl9O2wucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLGwuQ09OTkVDVElORz1sLnByb3RvdHlwZS5DT05ORUNUSU5HPVwiY29ubmVjdGluZ1wiLGwuT1BFTj1sLnByb3RvdHlwZS5PUEVOPVwib3BlblwiLGwuQ0xPU0VEPWwucHJvdG90eXBlLkNMT1NFRD1cImNsb3NlZFwiLGwucHJvdG90eXBlLnVyaT1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5xdWVyeXx8e30sZT10aGlzLm9wdGlvbnMuc2VjdXJlP1wid3NzXCI6XCJ3c1wiO3RoaXMub3B0aW9ucy50aW1lc3RhbXBSZXF1ZXN0cyYmKHRbdGhpcy5vcHRpb25zLnRpbWVzdGFtcFBhcmFtXT0obmV3IERhdGUpLmdldFRpbWUoKSksdD1hLmVuY29kZSh0KSx0Lmxlbmd0aCYmKHQ9XCI/XCIrdCk7dmFyIG47aWYodGhpcy5vcHRpb25zLmhvc3Qpbj10aGlzLm9wdGlvbnMuaG9zdDtlbHNle3ZhciByPVwiXCI7dGhpcy5vcHRpb25zLnBvcnQmJihcIndzc1wiPT1lJiY0NDMhPXRoaXMub3B0aW9ucy5wb3J0fHxcIndzXCI9PWUmJjgwIT10aGlzLm9wdGlvbnMucG9ydCkmJihyPVwiOlwiK3RoaXMub3B0aW9ucy5wb3J0KSxuPXRoaXMub3B0aW9ucy5ob3N0bmFtZStyfXJldHVybiBlK1wiOi8vXCIrbit0aGlzLm9wdGlvbnMucGF0aCt0fSxsLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnN0YXRlPXRoaXMuQ09OTkVDVElORzt2YXIgZT10aGlzLnVyaSgpLG49byhlLHRoaXMub3B0aW9ucyk7bi5iaW5hcnlUeXBlPXRoaXMub3B0aW9ucy5iaW5hcnlUeXBlLHRoaXMuc29ja2V0PW4sbi5vbm9wZW49ZnVuY3Rpb24oKXt0Ll9vbk9wZW4oKX0sbi5vbmNsb3NlPWZ1bmN0aW9uKGUpe3ZhciBuO249bnVsbD09ZS5jb2RlPzEwMDU6ZS5jb2RlLHQuX29uQ2xvc2UobixlLnJlYXNvbil9LG4ub25tZXNzYWdlPWZ1bmN0aW9uKGUsbil7dC5fb25NZXNzYWdlKGUuZGF0YSl9LG4ub25lcnJvcj1mdW5jdGlvbihlKXt0LnN0YXRlPT09dC5DT05ORUNUSU5HJiZ0Ll9vbkNsb3NlKDEwMDYpfSx0aGlzLl9jb25uZWN0VGltZW91dFJlZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fb25DbG9zZSg0MDA3KSx0LnNvY2tldC5jbG9zZSg0MDA3KX0sdGhpcy5jb25uZWN0VGltZW91dCl9LGwucHJvdG90eXBlLl9vbk9wZW49ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2NsZWFyVGltZW91dCh0aGlzLl9jb25uZWN0VGltZW91dFJlZiksdGhpcy5fcmVzZXRQaW5nVGltZW91dCgpLHRoaXMuX2hhbmRzaGFrZShmdW5jdGlvbihlLG4pe2U/KHQuX29uRXJyb3IoZSksdC5fb25DbG9zZSg0MDAzKSx0LnNvY2tldC5jbG9zZSg0MDAzKSk6KHQuc3RhdGU9dC5PUEVOLGkucHJvdG90eXBlLmVtaXQuY2FsbCh0LFwib3BlblwiLG4pLHQuX3Jlc2V0UGluZ1RpbWVvdXQoKSl9KX0sbC5wcm90b3R5cGUuX2hhbmRzaGFrZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuYXV0aC5sb2FkVG9rZW4odGhpcy5hdXRoVG9rZW5OYW1lLGZ1bmN0aW9uKG4scil7aWYobil0KG4pO2Vsc2V7dmFyIG89e2ZvcmNlOiEwfTtlLmVtaXQoXCIjaGFuZHNoYWtlXCIse2F1dGhUb2tlbjpyfSxvLGZ1bmN0aW9uKGUsbil7biYmKG4uYXV0aFRva2VuPXIsbi5hdXRoRXJyb3ImJihuLmF1dGhFcnJvcj1jLmh5ZHJhdGVFcnJvcihuLmF1dGhFcnJvcikpKSx0KGUsbil9KX19KX0sbC5wcm90b3R5cGUuX2Fib3J0QWxsUGVuZGluZ0V2ZW50c0R1ZVRvQmFkQ29ubmVjdGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5fY2FsbGJhY2tNYXApaWYodGhpcy5fY2FsbGJhY2tNYXAuaGFzT3duUHJvcGVydHkoZSkpe3ZhciBuPXRoaXMuX2NhbGxiYWNrTWFwW2VdO2RlbGV0ZSB0aGlzLl9jYWxsYmFja01hcFtlXSxjbGVhclRpbWVvdXQobi50aW1lb3V0KSxkZWxldGUgbi50aW1lb3V0O3ZhciByPVwiRXZlbnQgJ1wiK24uZXZlbnQrXCInIHdhcyBhYm9ydGVkIGR1ZSB0byBhIGJhZCBjb25uZWN0aW9uXCIsbz1uZXcgaChyLHQpLGk9bi5jYWxsYmFjaztkZWxldGUgbi5jYWxsYmFjayxpLmNhbGwobixvLG4pfX0sbC5wcm90b3R5cGUuX29uQ2xvc2U9ZnVuY3Rpb24odCxlKXtkZWxldGUgdGhpcy5zb2NrZXQub25vcGVuLGRlbGV0ZSB0aGlzLnNvY2tldC5vbmNsb3NlLGRlbGV0ZSB0aGlzLnNvY2tldC5vbm1lc3NhZ2UsZGVsZXRlIHRoaXMuc29ja2V0Lm9uZXJyb3IsY2xlYXJUaW1lb3V0KHRoaXMuX2Nvbm5lY3RUaW1lb3V0UmVmKSx0aGlzLnN0YXRlPT10aGlzLk9QRU4/KHRoaXMuc3RhdGU9dGhpcy5DTE9TRUQsaS5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJjbG9zZVwiLHQsZSksdGhpcy5fYWJvcnRBbGxQZW5kaW5nRXZlbnRzRHVlVG9CYWRDb25uZWN0aW9uKFwiZGlzY29ubmVjdFwiKSk6dGhpcy5zdGF0ZT09dGhpcy5DT05ORUNUSU5HJiYodGhpcy5zdGF0ZT10aGlzLkNMT1NFRCxpLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcIm9wZW5BYm9ydFwiLHQsZSksdGhpcy5fYWJvcnRBbGxQZW5kaW5nRXZlbnRzRHVlVG9CYWRDb25uZWN0aW9uKFwiY29ubmVjdEFib3J0XCIpKX0sbC5wcm90b3R5cGUuX29uTWVzc2FnZT1mdW5jdGlvbih0KXtpLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcImV2ZW50XCIsXCJtZXNzYWdlXCIsdCk7dmFyIGU9dGhpcy5kZWNvZGUodCk7aWYoXCIjMVwiPT1lKXRoaXMuX3Jlc2V0UGluZ1RpbWVvdXQoKSx0aGlzLnNvY2tldC5yZWFkeVN0YXRlPT10aGlzLnNvY2tldC5PUEVOJiZ0aGlzLnNlbmRPYmplY3QoXCIjMlwiKTtlbHNle3ZhciBuPWUuZXZlbnQ7aWYobil7dmFyIHI9bmV3IHModGhpcyxlLmNpZCk7aS5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJldmVudFwiLG4sZS5kYXRhLHIpfWVsc2UgaWYobnVsbCE9ZS5yaWQpe3ZhciBvPXRoaXMuX2NhbGxiYWNrTWFwW2UucmlkXTtpZihvJiYoY2xlYXJUaW1lb3V0KG8udGltZW91dCksZGVsZXRlIG8udGltZW91dCxkZWxldGUgdGhpcy5fY2FsbGJhY2tNYXBbZS5yaWRdLG8uY2FsbGJhY2spKXt2YXIgYT1jLmh5ZHJhdGVFcnJvcihlLmVycm9yKTtvLmNhbGxiYWNrKGEsZS5kYXRhKX19ZWxzZSBpLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcImV2ZW50XCIsXCJyYXdcIixlKX19LGwucHJvdG90eXBlLl9vbkVycm9yPWZ1bmN0aW9uKHQpe2kucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLFwiZXJyb3JcIix0KX0sbC5wcm90b3R5cGUuX3Jlc2V0UGluZ1RpbWVvdXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzOyhuZXcgRGF0ZSkuZ2V0VGltZSgpO2NsZWFyVGltZW91dCh0aGlzLl9waW5nVGltZW91dFRpY2tlciksdGhpcy5fcGluZ1RpbWVvdXRUaWNrZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3QuX29uQ2xvc2UoNGUzKSx0LnNvY2tldC5jbG9zZSg0ZTMpfSx0aGlzLnBpbmdUaW1lb3V0KX0sbC5wcm90b3R5cGUuZ2V0Qnl0ZXNSZWNlaXZlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvY2tldC5ieXRlc1JlY2VpdmVkfSxsLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbih0LGUpe2lmKHQ9dHx8MWUzLHRoaXMuc3RhdGU9PXRoaXMuT1BFTil7dmFyIG49e2NvZGU6dCxkYXRhOmV9O3RoaXMuZW1pdChcIiNkaXNjb25uZWN0XCIsbiksdGhpcy5fb25DbG9zZSh0LGUpLHRoaXMuc29ja2V0LmNsb3NlKHQpfWVsc2UgdGhpcy5zdGF0ZT09dGhpcy5DT05ORUNUSU5HJiYodGhpcy5fb25DbG9zZSh0LGUpLHRoaXMuc29ja2V0LmNsb3NlKHQpKX0sbC5wcm90b3R5cGUuZW1pdE9iamVjdD1mdW5jdGlvbih0KXt2YXIgZT17ZXZlbnQ6dC5ldmVudCxkYXRhOnQuZGF0YX07cmV0dXJuIHQuY2FsbGJhY2smJihlLmNpZD10LmNpZD10aGlzLmNhbGxJZEdlbmVyYXRvcigpLHRoaXMuX2NhbGxiYWNrTWFwW3QuY2lkXT10KSx0aGlzLnNlbmRPYmplY3QoZSksdC5jaWR8fG51bGx9LGwucHJvdG90eXBlLl9oYW5kbGVFdmVudEFja1RpbWVvdXQ9ZnVuY3Rpb24odCl7dC5jaWQmJmRlbGV0ZSB0aGlzLl9jYWxsYmFja01hcFt0LmNpZF0sZGVsZXRlIHQudGltZW91dDt2YXIgZT10LmNhbGxiYWNrO2lmKGUpe2RlbGV0ZSB0LmNhbGxiYWNrO3ZhciBuPW5ldyB1KFwiRXZlbnQgcmVzcG9uc2UgZm9yICdcIit0LmV2ZW50K1wiJyB0aW1lZCBvdXRcIik7ZS5jYWxsKHQsbix0KX19LGwucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCxlLG4scil7dmFyIG8saSxzPXRoaXM7cj8oaT1uLG89cik6biBpbnN0YW5jZW9mIEZ1bmN0aW9uPyhpPXt9LG89bik6aT1uO3ZhciBhPXtldmVudDp0LGRhdGE6ZSxjYWxsYmFjazpvfTtvJiYhaS5ub1RpbWVvdXQmJihhLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe3MuX2hhbmRsZUV2ZW50QWNrVGltZW91dChhKX0sdGhpcy5vcHRpb25zLmFja1RpbWVvdXQpKTt2YXIgYz1udWxsO3JldHVybih0aGlzLnN0YXRlPT10aGlzLk9QRU58fGkuZm9yY2UpJiYoYz10aGlzLmVtaXRPYmplY3QoYSkpLGN9LGwucHJvdG90eXBlLmNhbmNlbFBlbmRpbmdSZXNwb25zZT1mdW5jdGlvbih0KXtkZWxldGUgdGhpcy5fY2FsbGJhY2tNYXBbdF19LGwucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb2RlYy5kZWNvZGUodCl9LGwucHJvdG90eXBlLmVuY29kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb2RlYy5lbmNvZGUodCl9LGwucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24odCl7dGhpcy5zb2NrZXQucmVhZHlTdGF0ZSE9dGhpcy5zb2NrZXQuT1BFTj90aGlzLl9vbkNsb3NlKDEwMDUpOnRoaXMuc29ja2V0LnNlbmQodCl9LGwucHJvdG90eXBlLnNlcmlhbGl6ZU9iamVjdD1mdW5jdGlvbih0KXt2YXIgZSxuO3RyeXtlPXRoaXMuZW5jb2RlKHQpfWNhdGNoKHQpe249dCx0aGlzLl9vbkVycm9yKG4pfXJldHVybiBuP251bGw6ZX0sbC5wcm90b3R5cGUuc2VuZE9iamVjdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnNlcmlhbGl6ZU9iamVjdCh0KTtudWxsIT1lJiZ0aGlzLnNlbmQoZSl9LHQuZXhwb3J0cy5TQ1RyYW5zcG9ydD1sfSkuY2FsbChlLG4oMCkpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX10LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4saSl7ZT1lfHxcIiZcIixuPW58fFwiPVwiO3ZhciBzPXt9O2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0fHwwPT09dC5sZW5ndGgpcmV0dXJuIHM7dmFyIGE9L1xcKy9nO3Q9dC5zcGxpdChlKTt2YXIgYz0xZTM7aSYmXCJudW1iZXJcIj09dHlwZW9mIGkubWF4S2V5cyYmKGM9aS5tYXhLZXlzKTt2YXIgdT10Lmxlbmd0aDtjPjAmJnU+YyYmKHU9Yyk7Zm9yKHZhciBoPTA7aDx1OysraCl7dmFyIGwscCxmLGQseT10W2hdLnJlcGxhY2UoYSxcIiUyMFwiKSx2PXkuaW5kZXhPZihuKTt2Pj0wPyhsPXkuc3Vic3RyKDAsdikscD15LnN1YnN0cih2KzEpKToobD15LHA9XCJcIiksZj1kZWNvZGVVUklDb21wb25lbnQobCksZD1kZWNvZGVVUklDb21wb25lbnQocCkscihzLGYpP28oc1tmXSk/c1tmXS5wdXNoKGQpOnNbZl09W3NbZl0sZF06c1tmXT1kfXJldHVybiBzfTt2YXIgbz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe2lmKHQubWFwKXJldHVybiB0Lm1hcChlKTtmb3IodmFyIG49W10scj0wO3I8dC5sZW5ndGg7cisrKW4ucHVzaChlKHRbcl0scikpO3JldHVybiBufXZhciBvPWZ1bmN0aW9uKHQpe3N3aXRjaCh0eXBlb2YgdCl7Y2FzZVwic3RyaW5nXCI6cmV0dXJuIHQ7Y2FzZVwiYm9vbGVhblwiOnJldHVybiB0P1widHJ1ZVwiOlwiZmFsc2VcIjtjYXNlXCJudW1iZXJcIjpyZXR1cm4gaXNGaW5pdGUodCk/dDpcIlwiO2RlZmF1bHQ6cmV0dXJuXCJcIn19O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixhKXtyZXR1cm4gZT1lfHxcIiZcIixuPW58fFwiPVwiLG51bGw9PT10JiYodD12b2lkIDApLFwib2JqZWN0XCI9PXR5cGVvZiB0P3Iocyh0KSxmdW5jdGlvbihzKXt2YXIgYT1lbmNvZGVVUklDb21wb25lbnQobyhzKSkrbjtyZXR1cm4gaSh0W3NdKT9yKHRbc10sZnVuY3Rpb24odCl7cmV0dXJuIGErZW5jb2RlVVJJQ29tcG9uZW50KG8odCkpfSkuam9pbihlKTphK2VuY29kZVVSSUNvbXBvbmVudChvKHRbc10pKX0pLmpvaW4oZSk6YT9lbmNvZGVVUklDb21wb25lbnQobyhhKSkrbitlbmNvZGVVUklDb21wb25lbnQobyh0KSk6XCJcIn07dmFyIGk9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSxzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmZS5wdXNoKG4pO3JldHVybiBlfX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSxuKXtyZXR1cm4gZT9uZXcgbyh0LGUpOm5ldyBvKHQpfXZhciByO3I9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93fHxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpO3ZhciBvPXIuV2ViU29ja2V0fHxyLk1veldlYlNvY2tldDtvJiYobi5wcm90b3R5cGU9by5wcm90b3R5cGUpLHQuZXhwb3J0cz1vP246bnVsbH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1uKDIyKX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiByLmZyb20oYXJndW1lbnRzKX1mdW5jdGlvbiBvKCl7fXZhciBpO2k9XCJBbiBhcmd1bWVudCB3aXRob3V0IGFwcGVuZCwgcHJlcGVuZCwgb3IgZGV0YWNoIG1ldGhvZHMgd2FzIGdpdmVuIHRvIGBMaXN0XCI7dmFyIHM7cz1yLnByb3RvdHlwZSxyLm9mPWZ1bmN0aW9uKCl7cmV0dXJuIHIuZnJvbS5jYWxsKHRoaXMsYXJndW1lbnRzKX0sci5mcm9tPWZ1bmN0aW9uKHQpe3ZhciBlLG4scixvPW5ldyB0aGlzO2lmKHQmJihlPXQubGVuZ3RoKSlmb3Iobj0tMTsrK248ZTspbnVsbCE9PShyPXRbbl0pJiZ2b2lkIDAhPT1yJiZvLmFwcGVuZChyKTtyZXR1cm4gb30scy5oZWFkPW51bGwscy50YWlsPW51bGwscy50b0FycmF5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuaGVhZCxlPVtdO3Q7KWUucHVzaCh0KSx0PXQubmV4dDtyZXR1cm4gZX0scy5wcmVwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiExO2lmKCF0LmFwcGVuZHx8IXQucHJlcGVuZHx8IXQuZGV0YWNoKXRocm93IG5ldyBFcnJvcihpK1wiI3ByZXBlbmRgLlwiKTt2YXIgZSxuO3JldHVybiBlPXRoaXMsKG49ZS5oZWFkKT9uLnByZXBlbmQodCk6KHQuZGV0YWNoKCksdC5saXN0PWUsZS5oZWFkPXQsdCl9LHMuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiExO2lmKCF0LmFwcGVuZHx8IXQucHJlcGVuZHx8IXQuZGV0YWNoKXRocm93IG5ldyBFcnJvcihpK1wiI2FwcGVuZGAuXCIpO3ZhciBlLG4scjtyZXR1cm4gZT10aGlzLChyPWUudGFpbCk/ci5hcHBlbmQodCk6KG49ZS5oZWFkKT9uLmFwcGVuZCh0KToodC5kZXRhY2goKSx0Lmxpc3Q9ZSxlLmhlYWQ9dCx0KX0sci5JdGVtPW87dmFyIGE9by5wcm90b3R5cGU7YS5uZXh0PW51bGwsYS5wcmV2PW51bGwsYS5saXN0PW51bGwsYS5kZXRhY2g9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC5saXN0LG49dC5wcmV2LHI9dC5uZXh0O3JldHVybiBlPyhlLnRhaWw9PT10JiYoZS50YWlsPW4pLGUuaGVhZD09PXQmJihlLmhlYWQ9ciksZS50YWlsPT09ZS5oZWFkJiYoZS50YWlsPW51bGwpLG4mJihuLm5leHQ9ciksciYmKHIucHJldj1uKSx0LnByZXY9dC5uZXh0PXQubGlzdD1udWxsLHQpOnR9LGEucHJlcGVuZD1mdW5jdGlvbih0KXtpZighKHQmJnQuYXBwZW5kJiZ0LnByZXBlbmQmJnQuZGV0YWNoKSl0aHJvdyBuZXcgRXJyb3IoaStcIkl0ZW0jcHJlcGVuZGAuXCIpO3ZhciBlPXRoaXMsbj1lLmxpc3Qscj1lLnByZXY7cmV0dXJuISFuJiYodC5kZXRhY2goKSxyJiYodC5wcmV2PXIsci5uZXh0PXQpLHQubmV4dD1lLHQubGlzdD1uLGUucHJldj10LGU9PT1uLmhlYWQmJihuLmhlYWQ9dCksbi50YWlsfHwobi50YWlsPWUpLHQpfSxhLmFwcGVuZD1mdW5jdGlvbih0KXtpZighKHQmJnQuYXBwZW5kJiZ0LnByZXBlbmQmJnQuZGV0YWNoKSl0aHJvdyBuZXcgRXJyb3IoaStcIkl0ZW0jYXBwZW5kYC5cIik7dmFyIGU9dGhpcyxuPWUubGlzdCxyPWUubmV4dDtyZXR1cm4hIW4mJih0LmRldGFjaCgpLHImJih0Lm5leHQ9cixyLnByZXY9dCksdC5wcmV2PWUsdC5saXN0PW4sZS5uZXh0PXQsZSE9PW4udGFpbCYmbi50YWlsfHwobi50YWlsPXQpLHQpfSx0LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbih0LHIpe3ZhciBvOyFmdW5jdGlvbihpKXt2YXIgcz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZSxhPShcIm9iamVjdFwiPT10eXBlb2YgdCYmdCYmdC5leHBvcnRzLFwib2JqZWN0XCI9PXR5cGVvZiByJiZyKTt2YXIgYz1mdW5jdGlvbih0KXt0aGlzLm1lc3NhZ2U9dH07Yy5wcm90b3R5cGU9bmV3IEVycm9yLGMucHJvdG90eXBlLm5hbWU9XCJJbnZhbGlkQ2hhcmFjdGVyRXJyb3JcIjt2YXIgdT1mdW5jdGlvbih0KXt0aHJvdyBuZXcgYyh0KX0saD1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIixsPS9bXFx0XFxuXFxmXFxyIF0vZyxwPWZ1bmN0aW9uKHQpe3Q9U3RyaW5nKHQpLnJlcGxhY2UobCxcIlwiKTt2YXIgZT10Lmxlbmd0aDtlJTQ9PTAmJih0PXQucmVwbGFjZSgvPT0/JC8sXCJcIiksZT10Lmxlbmd0aCksKGUlND09MXx8L1teK2EtekEtWjAtOVxcL10vLnRlc3QodCkpJiZ1KFwiSW52YWxpZCBjaGFyYWN0ZXI6IHRoZSBzdHJpbmcgdG8gYmUgZGVjb2RlZCBpcyBub3QgY29ycmVjdGx5IGVuY29kZWQuXCIpO2Zvcih2YXIgbixyLG89MCxpPVwiXCIscz0tMTsrK3M8ZTspcj1oLmluZGV4T2YodC5jaGFyQXQocykpLG49byU0PzY0Km4rcjpyLG8rKyU0JiYoaSs9U3RyaW5nLmZyb21DaGFyQ29kZSgyNTUmbj4+KC0yKm8mNikpKTtyZXR1cm4gaX0sZj1mdW5jdGlvbih0KXt0PVN0cmluZyh0KSwvW15cXDAtXFx4RkZdLy50ZXN0KHQpJiZ1KFwiVGhlIHN0cmluZyB0byBiZSBlbmNvZGVkIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3V0c2lkZSBvZiB0aGUgTGF0aW4xIHJhbmdlLlwiKTtmb3IodmFyIGUsbixyLG8saT10Lmxlbmd0aCUzLHM9XCJcIixhPS0xLGM9dC5sZW5ndGgtaTsrK2E8YzspZT10LmNoYXJDb2RlQXQoYSk8PDE2LG49dC5jaGFyQ29kZUF0KCsrYSk8PDgscj10LmNoYXJDb2RlQXQoKythKSxvPWUrbityLHMrPWguY2hhckF0KG8+PjE4JjYzKStoLmNoYXJBdChvPj4xMiY2MykraC5jaGFyQXQobz4+NiY2MykraC5jaGFyQXQoNjMmbyk7cmV0dXJuIDI9PWk/KGU9dC5jaGFyQ29kZUF0KGEpPDw4LG49dC5jaGFyQ29kZUF0KCsrYSksbz1lK24scys9aC5jaGFyQXQobz4+MTApK2guY2hhckF0KG8+PjQmNjMpK2guY2hhckF0KG88PDImNjMpK1wiPVwiKToxPT1pJiYobz10LmNoYXJDb2RlQXQoYSkscys9aC5jaGFyQXQobz4+MikraC5jaGFyQXQobzw8NCY2MykrXCI9PVwiKSxzfSxkPXtlbmNvZGU6ZixkZWNvZGU6cCx2ZXJzaW9uOlwiMC4xLjBcIn07dm9pZCAwIT09KG89ZnVuY3Rpb24oKXtyZXR1cm4gZH0uY2FsbChlLG4sZSx0KSkmJih0LmV4cG9ydHM9byl9KCl9KS5jYWxsKGUsbigyNCkodCksbigwKSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0LndlYnBhY2tQb2x5ZmlsbHx8KHQuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSx0LnBhdGhzPVtdLHQuY2hpbGRyZW58fCh0LmNoaWxkcmVuPVtdKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImxvYWRlZFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0Lmx9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJpZFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0Lml9fSksdC53ZWJwYWNrUG9seWZpbGw9MSksdH19LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7dmFyIG49ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KHQsZSl7cmV0dXJuIG51bGwhPWUmJnQgaW5zdGFuY2VvZiBlfWZ1bmN0aW9uIG4ocixvLGkscyxsKXtmdW5jdGlvbiBwKHIsaSl7aWYobnVsbD09PXIpcmV0dXJuIG51bGw7aWYoMD09PWkpcmV0dXJuIHI7dmFyIHYsZztpZihcIm9iamVjdFwiIT10eXBlb2YgcilyZXR1cm4gcjtpZih0KHIsYykpdj1uZXcgYztlbHNlIGlmKHQocix1KSl2PW5ldyB1O2Vsc2UgaWYodChyLGgpKXY9bmV3IGgoZnVuY3Rpb24odCxlKXtyLnRoZW4oZnVuY3Rpb24oZSl7dChwKGUsaS0xKSl9LGZ1bmN0aW9uKHQpe2UocCh0LGktMSkpfSl9KTtlbHNlIGlmKG4uX19pc0FycmF5KHIpKXY9W107ZWxzZSBpZihuLl9faXNSZWdFeHAocikpdj1uZXcgUmVnRXhwKHIuc291cmNlLGEocikpLHIubGFzdEluZGV4JiYodi5sYXN0SW5kZXg9ci5sYXN0SW5kZXgpO2Vsc2UgaWYobi5fX2lzRGF0ZShyKSl2PW5ldyBEYXRlKHIuZ2V0VGltZSgpKTtlbHNle2lmKHkmJmUuaXNCdWZmZXIocikpcmV0dXJuIHY9bmV3IGUoci5sZW5ndGgpLHIuY29weSh2KSx2O3QocixFcnJvcik/dj1PYmplY3QuY3JlYXRlKHIpOnZvaWQgMD09PXM/KGc9T2JqZWN0LmdldFByb3RvdHlwZU9mKHIpLHY9T2JqZWN0LmNyZWF0ZShnKSk6KHY9T2JqZWN0LmNyZWF0ZShzKSxnPXMpfWlmKG8pe3ZhciBtPWYuaW5kZXhPZihyKTtpZigtMSE9bSlyZXR1cm4gZFttXTtmLnB1c2gociksZC5wdXNoKHYpfXQocixjKSYmci5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49cChlLGktMSkscj1wKHQsaS0xKTt2LnNldChuLHIpfSksdChyLHUpJiZyLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9cCh0LGktMSk7di5hZGQoZSl9KTtmb3IodmFyIGIgaW4gcil7dmFyIEU7ZyYmKEU9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihnLGIpKSxFJiZudWxsPT1FLnNldHx8KHZbYl09cChyW2JdLGktMSkpfWlmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpZm9yKHZhciB3PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMociksYj0wO2I8dy5sZW5ndGg7YisrKXt2YXIgaz13W2JdLFQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLGspOyghVHx8VC5lbnVtZXJhYmxlfHxsKSYmKHZba109cChyW2tdLGktMSksVC5lbnVtZXJhYmxlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodixrLHtlbnVtZXJhYmxlOiExfSkpfWlmKGwpZm9yKHZhciBTPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHIpLGI9MDtiPFMubGVuZ3RoO2IrKyl7dmFyIF89U1tiXSxUPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocixfKTtUJiZULmVudW1lcmFibGV8fCh2W19dPXAocltfXSxpLTEpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2LF8se2VudW1lcmFibGU6ITF9KSl9cmV0dXJuIHZ9XCJvYmplY3RcIj09dHlwZW9mIG8mJihpPW8uZGVwdGgscz1vLnByb3RvdHlwZSxsPW8uaW5jbHVkZU5vbkVudW1lcmFibGUsbz1vLmNpcmN1bGFyKTt2YXIgZj1bXSxkPVtdLHk9dm9pZCAwIT09ZTtyZXR1cm4gdm9pZCAwPT09byYmKG89ITApLHZvaWQgMD09PWkmJihpPTEvMCkscChyLGkpfWZ1bmN0aW9uIHIodCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiBvKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0JiZcIltvYmplY3QgRGF0ZV1cIj09PXIodCl9ZnVuY3Rpb24gaSh0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdCYmXCJbb2JqZWN0IEFycmF5XVwiPT09cih0KX1mdW5jdGlvbiBzKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0JiZcIltvYmplY3QgUmVnRXhwXVwiPT09cih0KX1mdW5jdGlvbiBhKHQpe3ZhciBlPVwiXCI7cmV0dXJuIHQuZ2xvYmFsJiYoZSs9XCJnXCIpLHQuaWdub3JlQ2FzZSYmKGUrPVwiaVwiKSx0Lm11bHRpbGluZSYmKGUrPVwibVwiKSxlfXZhciBjO3RyeXtjPU1hcH1jYXRjaCh0KXtjPWZ1bmN0aW9uKCl7fX12YXIgdTt0cnl7dT1TZXR9Y2F0Y2godCl7dT1mdW5jdGlvbigpe319dmFyIGg7dHJ5e2g9UHJvbWlzZX1jYXRjaCh0KXtoPWZ1bmN0aW9uKCl7fX1yZXR1cm4gbi5jbG9uZVByb3RvdHlwZT1mdW5jdGlvbih0KXtpZihudWxsPT09dClyZXR1cm4gbnVsbDt2YXIgZT1mdW5jdGlvbigpe307cmV0dXJuIGUucHJvdG90eXBlPXQsbmV3IGV9LG4uX19vYmpUb1N0cj1yLG4uX19pc0RhdGU9byxuLl9faXNBcnJheT1pLG4uX19pc1JlZ0V4cD1zLG4uX19nZXRSZWdFeHBGbGFncz1hLG59KCk7XCJvYmplY3RcIj09dHlwZW9mIHQmJnQuZXhwb3J0cyYmKHQuZXhwb3J0cz1uKX0pLmNhbGwoZSxuKDQpLkJ1ZmZlcil9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcih0KXt2YXIgZT10LnNlY3VyZT9cImh0dHBzOi8vXCI6XCJodHRwOi8vXCIsbj1cIlwiO2lmKHQucXVlcnkpaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQucXVlcnkpbj10LnF1ZXJ5O2Vsc2V7dmFyIHI9W10sbz10LnF1ZXJ5O2Zvcih2YXIgaSBpbiBvKW8uaGFzT3duUHJvcGVydHkoaSkmJnIucHVzaChpK1wiPVwiK29baV0pO3IubGVuZ3RoJiYobj1cIj9cIityLmpvaW4oXCImXCIpKX12YXIgcztyZXR1cm4gcz10Lmhvc3Q/dC5ob3N0OnQuaG9zdG5hbWUrXCI6XCIrdC5wb3J0LGUrcyt0LnBhdGgrbn1mdW5jdGlvbiBvKCl7cmV0dXJuIGUubG9jYXRpb24mJlwiaHR0cHM6XCI9PWxvY2F0aW9uLnByb3RvY29sfWZ1bmN0aW9uIGkodCxuKXt2YXIgcj1udWxsPT10LnNlY3VyZT9uOnQuc2VjdXJlO3JldHVybiB0LnBvcnR8fChlLmxvY2F0aW9uJiZsb2NhdGlvbi5wb3J0P2xvY2F0aW9uLnBvcnQ6cj80NDM6ODApfWZ1bmN0aW9uIHModCl7aWYodD10fHx7fSx0Lmhvc3QmJnQucG9ydCl0aHJvdyBuZXcgaChcIlRoZSBob3N0IG9wdGlvbiBzaG91bGQgYWxyZWFkeSBpbmNsdWRlIHRoZSBwb3J0IG51bWJlciBpbiB0aGUgZm9ybWF0IGhvc3RuYW1lOnBvcnQgLSBCZWNhdXNlIG9mIHRoaXMsIHRoZSBob3N0IGFuZCBwb3J0IG9wdGlvbnMgY2Fubm90IGJlIHNwZWNpZmllZCB0b2dldGhlcjsgdXNlIHRoZSBob3N0bmFtZSBvcHRpb24gaW5zdGVhZFwiKTt2YXIgbj1vKCkscz17cG9ydDppKHQsbiksaG9zdG5hbWU6ZS5sb2NhdGlvbiYmbG9jYXRpb24uaG9zdG5hbWUscGF0aDpcIi9zL1wiLHNlY3VyZTpuLGF1dG9Db25uZWN0OiEwLGF1dG9SZWNvbm5lY3Q6ITAsYXV0b1N1YnNjcmliZU9uQ29ubmVjdDohMCxjb25uZWN0VGltZW91dDoyZTQsYWNrVGltZW91dDoxZTQsdGltZXN0YW1wUmVxdWVzdHM6ITEsdGltZXN0YW1wUGFyYW06XCJ0XCIsYXV0aEVuZ2luZTpudWxsLGF1dGhUb2tlbk5hbWU6XCJJbmphbS5hdXRoVG9rZW5cIixiaW5hcnlUeXBlOlwiYXJyYXlidWZmZXJcIixtdWx0aXBsZXg6ITAsY2xvbmVEYXRhOiExfTtmb3IodmFyIGEgaW4gdCl0Lmhhc093blByb3BlcnR5KGEpJiYoc1thXT10W2FdKTt2YXIgdT1yKHMpO3JldHVybiExPT09cy5tdWx0aXBsZXg/bmV3IGMocyk6KGxbdV0/bFt1XS5jb25uZWN0KCk6bFt1XT1uZXcgYyhzKSxsW3VdKX1mdW5jdGlvbiBhKHQpe3Q9dHx8e307dmFyIG49bygpLHM9e3BvcnQ6aSh0LG4pLGhvc3RuYW1lOmUubG9jYXRpb24mJmxvY2F0aW9uLmhvc3RuYW1lLHBhdGg6XCIvcy9cIixzZWN1cmU6bn07Zm9yKHZhciBhIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShhKSYmKHNbYV09dFthXSk7dmFyIGM9cihzKSx1PWxbY107dSYmdS5kZXN0cm95KCksZGVsZXRlIGxbY119dmFyIGM9bigzKSx1PW4oMiksaD11LkludmFsaWRBcmd1bWVudHNFcnJvcixsPXt9O3QuZXhwb3J0cz17Y29ubmVjdDpzLGRlc3Ryb3k6YSxjb25uZWN0aW9uczpsfX0pLmNhbGwoZSxuKDApKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdGhpcy5fbWF4TGlzdGVuZXJzPXRoaXMuX21heExpc3RlbmVyc3x8dm9pZCAwfWZ1bmN0aW9uIHIodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdH1mdW5jdGlvbiBvKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGkodCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10fWZ1bmN0aW9uIHModCl7cmV0dXJuIHZvaWQgMD09PXR9dC5leHBvcnRzPW4sbi5FdmVudEVtaXR0ZXI9bixuLnByb3RvdHlwZS5fZXZlbnRzPXZvaWQgMCxuLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzPXZvaWQgMCxuLmRlZmF1bHRNYXhMaXN0ZW5lcnM9MTAsbi5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKHQpe2lmKCFvKHQpfHx0PDB8fGlzTmFOKHQpKXRocm93IFR5cGVFcnJvcihcIm4gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtyZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzPXQsdGhpc30sbi5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0KXt2YXIgZSxuLG8sYSxjLHU7aWYodGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSxcImVycm9yXCI9PT10JiYoIXRoaXMuX2V2ZW50cy5lcnJvcnx8aSh0aGlzLl9ldmVudHMuZXJyb3IpJiYhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpe2lmKChlPWFyZ3VtZW50c1sxXSlpbnN0YW5jZW9mIEVycm9yKXRocm93IGU7dmFyIGg9bmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LiAoJytlK1wiKVwiKTt0aHJvdyBoLmNvbnRleHQ9ZSxofWlmKG49dGhpcy5fZXZlbnRzW3RdLHMobikpcmV0dXJuITE7aWYocihuKSlzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAxOm4uY2FsbCh0aGlzKTticmVhaztjYXNlIDI6bi5jYWxsKHRoaXMsYXJndW1lbnRzWzFdKTticmVhaztjYXNlIDM6bi5jYWxsKHRoaXMsYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSk7YnJlYWs7ZGVmYXVsdDphPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxuLmFwcGx5KHRoaXMsYSl9ZWxzZSBpZihpKG4pKWZvcihhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSx1PW4uc2xpY2UoKSxvPXUubGVuZ3RoLGM9MDtjPG87YysrKXVbY10uYXBwbHkodGhpcyxhKTtyZXR1cm4hMH0sbi5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24odCxlKXt2YXIgbztpZighcihlKSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSksdGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyJiZ0aGlzLmVtaXQoXCJuZXdMaXN0ZW5lclwiLHQscihlLmxpc3RlbmVyKT9lLmxpc3RlbmVyOmUpLHRoaXMuX2V2ZW50c1t0XT9pKHRoaXMuX2V2ZW50c1t0XSk/dGhpcy5fZXZlbnRzW3RdLnB1c2goZSk6dGhpcy5fZXZlbnRzW3RdPVt0aGlzLl9ldmVudHNbdF0sZV06dGhpcy5fZXZlbnRzW3RdPWUsaSh0aGlzLl9ldmVudHNbdF0pJiYhdGhpcy5fZXZlbnRzW3RdLndhcm5lZCYmKG89cyh0aGlzLl9tYXhMaXN0ZW5lcnMpP24uZGVmYXVsdE1heExpc3RlbmVyczp0aGlzLl9tYXhMaXN0ZW5lcnMpJiZvPjAmJnRoaXMuX2V2ZW50c1t0XS5sZW5ndGg+byYmKHRoaXMuX2V2ZW50c1t0XS53YXJuZWQ9ITAsY29uc29sZS5lcnJvcihcIihub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuXCIsdGhpcy5fZXZlbnRzW3RdLmxlbmd0aCksXCJmdW5jdGlvblwiPT10eXBlb2YgY29uc29sZS50cmFjZSYmY29uc29sZS50cmFjZSgpKSx0aGlzfSxuLnByb3RvdHlwZS5vbj1uLnByb3RvdHlwZS5hZGRMaXN0ZW5lcixuLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMucmVtb3ZlTGlzdGVuZXIodCxuKSxvfHwobz0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9aWYoIXIoZSkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciBvPSExO3JldHVybiBuLmxpc3RlbmVyPWUsdGhpcy5vbih0LG4pLHRoaXN9LG4ucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7dmFyIG4sbyxzLGE7aWYoIXIoZSkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO2lmKCF0aGlzLl9ldmVudHN8fCF0aGlzLl9ldmVudHNbdF0pcmV0dXJuIHRoaXM7aWYobj10aGlzLl9ldmVudHNbdF0scz1uLmxlbmd0aCxvPS0xLG49PT1lfHxyKG4ubGlzdGVuZXIpJiZuLmxpc3RlbmVyPT09ZSlkZWxldGUgdGhpcy5fZXZlbnRzW3RdLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIix0LGUpO2Vsc2UgaWYoaShuKSl7Zm9yKGE9czthLS0gPjA7KWlmKG5bYV09PT1lfHxuW2FdLmxpc3RlbmVyJiZuW2FdLmxpc3RlbmVyPT09ZSl7bz1hO2JyZWFrfWlmKG88MClyZXR1cm4gdGhpczsxPT09bi5sZW5ndGg/KG4ubGVuZ3RoPTAsZGVsZXRlIHRoaXMuX2V2ZW50c1t0XSk6bi5zcGxpY2UobywxKSx0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsdCxlKX1yZXR1cm4gdGhpc30sbi5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3ZhciBlLG47aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpcztpZighdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLl9ldmVudHM9e306dGhpcy5fZXZlbnRzW3RdJiZkZWxldGUgdGhpcy5fZXZlbnRzW3RdLHRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe2ZvcihlIGluIHRoaXMuX2V2ZW50cylcInJlbW92ZUxpc3RlbmVyXCIhPT1lJiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhlKTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9e30sdGhpc31pZihuPXRoaXMuX2V2ZW50c1t0XSxyKG4pKXRoaXMucmVtb3ZlTGlzdGVuZXIodCxuKTtlbHNlIGlmKG4pZm9yKDtuLmxlbmd0aDspdGhpcy5yZW1vdmVMaXN0ZW5lcih0LG5bbi5sZW5ndGgtMV0pO3JldHVybiBkZWxldGUgdGhpcy5fZXZlbnRzW3RdLHRoaXN9LG4ucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbdF0/cih0aGlzLl9ldmVudHNbdF0pP1t0aGlzLl9ldmVudHNbdF1dOnRoaXMuX2V2ZW50c1t0XS5zbGljZSgpOltdfSxuLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2V2ZW50cyl7dmFyIGU9dGhpcy5fZXZlbnRzW3RdO2lmKHIoZSkpcmV0dXJuIDE7aWYoZSlyZXR1cm4gZS5sZW5ndGh9cmV0dXJuIDB9LG4ubGlzdGVuZXJDb3VudD1mdW5jdGlvbih0LGUpe3JldHVybiB0Lmxpc3RlbmVyQ291bnQoZSl9fV0pOyIsInZhciBpbmphbVNkayA9IHJlcXVpcmUoJ2luamFtLXNkaycpXG5cblxuXG53aW5kb3cubWFya2VycyA9IFtdXG5cblxuXG4vLyBQdXQgeW91ciBwaHlzaWNhbCBpZCBhbmQgYXBwbGljYXRpb24ga2V5XG5cbndpbmRvdy5jcmVkZW50aWFscyA9IHtcbiAgICBwaHlzaWNhbF9pZDogJ2RlbW9seDg1YicsXG4gICAgY2hhbm5lbHM6IFtdLFxuICAgIGFwcGxpY2F0aW9uX2tleTogJ2QxNDRkZDQwLWY3YWQtMTFlNy05NjYwLTYxZDVmNzU5MjQ5Mydcbn1cblxuXG5cbi8vIFNvbWUgbG9jYXRpb25zXG5cbndpbmRvdy5Bc2lhID0ge1xuICAgIGxhdDogMjMuODAwMDI5LFxuICAgIGxuZzogNjIuNDI4OTk5OFxufVxuXG53aW5kb3cuSXJhbiA9IHtcbiAgICBsYXQ6IDMxLjk5MjczNTksXG4gICAgbG5nOiA0NC42NzM3NjMxXG59XG5cbndpbmRvdy5UZWhyYW4gPSB7XG4gICAgbGF0OiAzNS42OTcwMTE4LFxuICAgIGxuZzogNTEuMjA5NzMzOFxufVxuXG5cblxuLy8gR29vZ2xlIE1hcHMgU2FtcGxlXG5cbndpbmRvdy5jb25uZWN0Rm9yR29vZ2xlTWFwcyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gQ29ubmVjdCB0byBJbmphbVxuXG4gICAgd2luZG93LmluamFtID0gbmV3IEluamFtKGNyZWRlbnRpYWxzKVxuICAgIGluamFtLmNvbm5lY3QoKVxuXG4gICAgaW5qYW0ub24oJ3N1YnNjcmliZWQnLCBmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgICBNLnRvYXN0KHtodG1sOiAnU3Vic2NyaWJlZCAnICsgY2hhbm5lbH0pXG4gICAgfSlcblxuICAgIGluamFtLm9uKCd1bnN1YnNjcmliZWQnLCBmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgICBNLnRvYXN0KHtodG1sOiAnVW5zdWJzY3JpYmVkICcgKyBjaGFubmVsfSlcbiAgICB9KVxuXG5cbiAgICAvLyBTaG93aW5nIGRldmljZXMgb24gR29vZ2xlIE1hcHMgYnkgbWFya2VycyB3aGVuIHJlY2VpdmluZyBsb2NhdGlvbiBkYXRhXG5cbiAgICBpbmphbS5vbigndHJhY2tpbmcnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAobWFya2Vyc1tkYXRhLmNoYW5uZWxdKSB7XG4gICAgICAgICAgICB2YXIgbGF0bG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhkYXRhLmxvY2F0aW9uLmxhdCwgZGF0YS5sb2NhdGlvbi5sbmcpXG4gICAgICAgICAgICBtYXJrZXJzW2RhdGEuY2hhbm5lbF0uc2V0UG9zaXRpb24obGF0bG5nKVxuICAgICAgICAgICAgLy8gVW5jb21tZW50IGJlbG93IGlmIHlvdSB3YW50IGxvY2sgdG8gb25lIG1hcmtlclxuICAgICAgICAgICAgLy8gbWFwLnBhblRvKGxhdGxuZylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkZE1hcmtlckdNYXBzKGRhdGEuY2hhbm5lbCwge2xhdDogZGF0YS5sb2NhdGlvbi5sYXQsIGxuZzogZGF0YS5sb2NhdGlvbi5sbmd9LCBtYXApXG4gICAgICAgICAgICB2YXIgbGF0bG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhkYXRhLmxvY2F0aW9uLmxhdCwgZGF0YS5sb2NhdGlvbi5sbmcpXG4gICAgICAgICAgICBtYXJrZXJzW2RhdGEuY2hhbm5lbF0uc2V0UG9zaXRpb24obGF0bG5nKVxuICAgICAgICAgICAgbWFwLnBhblRvKGxhdGxuZylcbiAgICAgICAgfVxuICAgIH0pXG5cblxuICAgIC8vIEdvb2dsZSBNYXAgaW5pdFxuXG4gICAgd2luZG93Lm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgIHpvb206IDMsXG4gICAgICAgIGNlbnRlcjogQXNpYSxcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICBuYXZpZ2F0aW9uQ29udHJvbDogZmFsc2UsXG4gICAgICAgIG1hcFR5cGVDb250cm9sOiBmYWxzZSxcbiAgICAgICAgc2NhbGVDb250cm9sOiBmYWxzZSxcbiAgICAgICAgZnVsbHNjcmVlbkNvbnRyb2w6IHRydWUsXG4gICAgICAgIHN0cmVldFZpZXdDb250cm9sOiBmYWxzZVxuICAgIH0pXG5cbn1cblxuXG5cbi8vIE1vc3QgdXNlZnVsIEdvb2dsZSBNYXBzIGZ1bmN0aW9uc1xuXG53aW5kb3cuYWRkTWFya2VyR01hcHMgPSBmdW5jdGlvbihpZCwgbG9jYXRpb24sIG1hcCkge1xuICAgIG1hcmtlcnNbaWRdID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgIG1hcDogbWFwLFxuICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QLFxuICAgICAgICBwb3NpdGlvbjogbG9jYXRpb24sXG4gICAgICAgIHRpdGxlOiBpZFxuICAgIH0pXG59XG5cbndpbmRvdy5zZXRNYXBPbkFsbEdNYXBzID0gZnVuY3Rpb24obWFwKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aW5kb3cuTWFya2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtYXJrZXJzW2ldLnNldE1hcChtYXApXG4gICAgfVxufVxuXG53aW5kb3cuY2xlYXJNYXJrZXJzR01hcHMgPSBmdW5jdGlvbigpIHtcbiAgICBzZXRNYXBPbkFsbEdNYXBzKG51bGwpXG59XG5cbndpbmRvdy5kZWxldGVNYXJrZXJzR01hcHMgPSBmdW5jdGlvbigpIHtcbiAgICBjbGVhck1hcmtlcnNHTWFwcygpXG4gICAgbWFya2VycyA9IFtdXG59XG5cblxuXG4vLyBPcGVuIFN0cmVldCBNYXAgU2FtcGxlXG5cbndpbmRvdy5jb25uZWN0Rm9yT3BlblN0cmVldE1hcCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gQ29ubmVjdCB0byBJbmphbVxuXG4gICAgd2luZG93LmluamFtID0gbmV3IEluamFtKGNyZWRlbnRpYWxzKVxuICAgIGluamFtLmNvbm5lY3QoKVxuXG4gICAgaW5qYW0ub24oJ3N1YnNjcmliZWQnLCBmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgICBNLnRvYXN0KHtodG1sOiAnU3Vic2NyaWJlZCAnICsgY2hhbm5lbH0pXG4gICAgfSlcblxuICAgIGluamFtLm9uKCd1bnN1YnNjcmliZWQnLCBmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgICBNLnRvYXN0KHtodG1sOiAnVW5zdWJzY3JpYmVkICcgKyBjaGFubmVsfSlcbiAgICB9KVxuXG5cbiAgICAvLyBTaG93aW5nIGRldmljZXMgb24gT3BlbiBTdHJlZXQgTWFwIGJ5IG1hcmtlcnMgd2hlbiByZWNlaXZpbmcgbG9jYXRpb24gZGF0YVxuXG4gICAgaW5qYW0ub24oJ3RyYWNraW5nJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNbZGF0YS5jaGFubmVsXSkge1xuICAgICAgICAgICAgdmFyIGxvbkxhdCA9IG9sLnByb2oudHJhbnNmb3JtKFtkYXRhLmxvY2F0aW9uLmxuZywgZGF0YS5sb2NhdGlvbi5sYXRdLCAnRVBTRzo0MzI2JywgJ0VQU0c6Mzg1NycpXG4gICAgICAgICAgICBtYXJrZXJzW2RhdGEuY2hhbm5lbF0uc2V0Q29vcmRpbmF0ZXMobG9uTGF0KVxuICAgICAgICAgICAgLy8gVW5jb21tZW50IGJlbG93IGlmIHlvdSB3YW50IGxvY2sgdG8gb25lIG1hcmtlclxuICAgICAgICAgICAgLy8gdmlldy5hbmltYXRlKHtcbiAgICAgICAgICAgIC8vICAgICBjZW50ZXI6IGxvbkxhdCxcbiAgICAgICAgICAgIC8vICAgICBkdXJhdGlvbjogMjAwMFxuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkZE1hcmtlck9TTShkYXRhLmNoYW5uZWwsIHtsYXQ6IGRhdGEubG9jYXRpb24ubGF0LCBsbmc6IGRhdGEubG9jYXRpb24ubG5nfSlcbiAgICAgICAgICAgIHZhciBsb25MYXQgPSBvbC5wcm9qLnRyYW5zZm9ybShbZGF0YS5sb2NhdGlvbi5sbmcsIGRhdGEubG9jYXRpb24ubGF0XSwgJ0VQU0c6NDMyNicsICdFUFNHOjM4NTcnKVxuICAgICAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBjZW50ZXI6IGxvbkxhdCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG5cblxuICAgIC8vIE9wZW4gU3RyZWV0IE1hcCBpbml0XG5cbiAgICB3aW5kb3cubWFya2VyU291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3IoKVxuICAgIHdpbmRvdy5tYXJrZXJTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbigvKiogQHR5cGUge29seC5zdHlsZS5JY29uT3B0aW9uc30gKi8gKHtcbiAgICAgICAgICAgIGFuY2hvcjogWzAuNSwgNDZdLFxuICAgICAgICAgICAgYW5jaG9yWFVuaXRzOiAnZnJhY3Rpb24nLFxuICAgICAgICAgICAgYW5jaG9yWVVuaXRzOiAncGl4ZWxzJyxcbiAgICAgICAgICAgIHNyYzogJ2h0dHBzOi8vaW5qYW0uaW8vaW1hZ2VzL01hcmtlci1SZWQuc3ZnJ1xuICAgICAgICB9KSlcbiAgICB9KVxuICAgIHdpbmRvdy52aWV3ID0gbmV3IG9sLlZpZXcoe1xuICAgICAgICBjZW50ZXI6IG9sLnByb2ouZnJvbUxvbkxhdChbQXNpYS5sbmcsIEFzaWEubGF0XSksXG4gICAgICAgIHpvb206IDNcbiAgICB9KVxuXG4gICAgd2luZG93Lm1hcCA9IG5ldyBvbC5NYXAoe1xuICAgICAgICB0YXJnZXQ6ICdtYXAnLFxuICAgICAgICBsYXllcnM6IFtcbiAgICAgICAgICBuZXcgb2wubGF5ZXIuVGlsZSh7XG4gICAgICAgICAgICBzb3VyY2U6IG5ldyBvbC5zb3VyY2UuT1NNKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcbiAgICAgICAgICAgIHNvdXJjZTogbWFya2VyU291cmNlLFxuICAgICAgICAgICAgc3R5bGU6IG1hcmtlclN0eWxlXG4gICAgICAgICAgfSksXG4gICAgICAgIF0sXG4gICAgICAgIHZpZXc6IHZpZXdcbiAgICB9KVxuXG59XG5cblxuLy8gTW9zdCB1c2VmdWwgT3BlbiBTdHJlZXQgTWFwIGZ1bmN0aW9uc1xuXG53aW5kb3cuYWRkTWFya2VyT1NNID0gZnVuY3Rpb24oaWQsIGxvY2F0aW9uKSB7XG4gICAgbWFya2Vyc1tpZF0gPSBuZXcgb2wuZ2VvbS5Qb2ludChvbC5wcm9qLnRyYW5zZm9ybShbbG9jYXRpb24ubG5nLCBsb2NhdGlvbi5sYXRdLCAnRVBTRzo0MzI2JywgJ0VQU0c6Mzg1NycpKVxuICAgIHZhciBtYXJrZXIgPSBuZXcgb2wuRmVhdHVyZSh7XG4gICAgICAgIGdlb21ldHJ5OiBtYXJrZXJzW2lkXSxcbiAgICAgICAgbmFtZTogaWRcbiAgICB9KVxuICAgIG1hcmtlclNvdXJjZS5hZGRGZWF0dXJlKG1hcmtlcilcbn1cblxuXG5cbi8vIENlZGFyIE1hcHMgU2FtcGxlXG5cbndpbmRvdy5jb25uZWN0Rm9yQ2VkYXJNYXBzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAvLyBDb25uZWN0IHRvIEluamFtXG5cbiAgICB3aW5kb3cuaW5qYW0gPSBuZXcgSW5qYW0oY3JlZGVudGlhbHMpXG4gICAgaW5qYW0uY29ubmVjdCgpXG5cbiAgICBpbmphbS5vbignc3Vic2NyaWJlZCcsIGZ1bmN0aW9uIChjaGFubmVsKSB7XG4gICAgICAgIE0udG9hc3Qoe2h0bWw6ICdTdWJzY3JpYmVkICcgKyBjaGFubmVsfSlcbiAgICB9KVxuXG4gICAgaW5qYW0ub24oJ3Vuc3Vic2NyaWJlZCcsIGZ1bmN0aW9uIChjaGFubmVsKSB7XG4gICAgICAgIE0udG9hc3Qoe2h0bWw6ICdVbnN1YnNjcmliZWQgJyArIGNoYW5uZWx9KVxuICAgIH0pXG5cblxuICAgIC8vIFNob3dpbmcgZGV2aWNlcyBvbiBDZWRhciBNYXBzIGJ5IG1hcmtlcnMgd2hlbiByZWNlaXZpbmcgbG9jYXRpb24gZGF0YVxuXG4gICAgaW5qYW0ub24oJ3RyYWNraW5nJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNbZGF0YS5jaGFubmVsXSkge1xuICAgICAgICAgICAgdmFyIGxhdExuZyA9IEwubGF0TG5nKGRhdGEubG9jYXRpb24pXG4gICAgICAgICAgICBtYXJrZXJzW2RhdGEuY2hhbm5lbF0uc2V0TGF0TG5nKGxhdExuZylcbiAgICAgICAgICAgIC8vIFVuY29tbWVudCBiZWxvdyBpZiB5b3Ugd2FudCBsb2NrIHRvIG9uZSBtYXJrZXJcbiAgICAgICAgICAgIC8vIG1hcC5zZXRWaWV3KGRhdGEubG9jYXRpb24pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhZGRNYXJrZXJDTShkYXRhLmNoYW5uZWwsIHtsYXQ6IGRhdGEubG9jYXRpb24ubGF0LCBsbmc6IGRhdGEubG9jYXRpb24ubG5nfSlcbiAgICAgICAgICAgIG1hcC5zZXRWaWV3KGRhdGEubG9jYXRpb24pXG4gICAgICAgIH1cbiAgICB9KVxuXG5cbiAgICAvLyBDZWRhciBNYXBzIGluaXRcblxuICAgIHZhciBjbU9wdGlvbnMgPSB7XG4gICAgICAgIGNlbnRlcjoge2xhdDogVGVocmFuLmxhdCwgbG5nOiBUZWhyYW4ubG5nfSxcbiAgICAgICAgc2Nyb2xsV2hlZWxab29tIDpmYWxzZSxcbiAgICAgICAgem9vbUNvbnRyb2w6IHRydWUsXG4gICAgICAgIHpvb206IDcsXG4gICAgICAgIG1pblpvb206IDYsXG4gICAgICAgIG1heFpvb206IDE3LFxuICAgICAgICBsZWdlbmRDb250cm9sOiBmYWxzZSxcbiAgICAgICAgYXR0cmlidXRpb25Db250cm9sOiBmYWxzZVxuICAgIH1cbiAgICB3aW5kb3cubWFwID0gTC5jZWRhcm1hcHMubWFwKCdtYXAnLCAnaHR0cHM6Ly9hcGkuY2VkYXJtYXBzLmNvbS92MS90aWxlcy9jZWRhcm1hcHMuc3RyZWV0cy5qc29uP2FjY2Vzc190b2tlbj04YjViYzAzYTdjZTY2NGE0MDM5NDBlZTY4MzU3ZTdjNDQyNDA2MDllJywgY21PcHRpb25zKVxuXG59XG5cblxuLy8gTW9zdCB1c2VmdWwgQ2VkYXIgTWFwcyBmdW5jdGlvbnNcblxud2luZG93LmFkZE1hcmtlckNNID0gZnVuY3Rpb24oaWQsIGxvY2F0aW9uKSB7XG4gICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgIGNlbnRlcjoge2xhdDogbG9jYXRpb24ubGF0LCBsbmc6IGxvY2F0aW9uLmxuZ30sXG4gICAgICAgIGljb25PcHRzOiB7XG4gICAgICAgICAgICBpY29uVXJsOiBcImh0dHBzOi8vaW5qYW0uaW8vaW1hZ2VzL01hcmtlci1SZWQuc3ZnXCIsXG4gICAgICAgICAgICBpY29uUmV0aW5hVXJsOiBcImh0dHBzOi8vaW5qYW0uaW8vaW1hZ2VzL01hcmtlci1SZWQuc3ZnXCIsXG4gICAgICAgICAgICBpY29uU2l6ZTogWzMyLCA0NF1cbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgaWNvbk9wdGlvbnMgPSB7XG4gICAgICAgIGljb25Vcmw6IG1hcmtlck9wdGlvbnMuaWNvbk9wdHMuaWNvblVybCxcbiAgICAgICAgaWNvblJldGluYVVybDogbWFya2VyT3B0aW9ucy5pY29uT3B0cy5pY29uUmV0aW5hVXJsLFxuICAgICAgICBpY29uU2l6ZTogbWFya2VyT3B0aW9ucy5pY29uT3B0cy5pY29uU2l6ZVxuICAgIH1cbiAgICB2YXIgbWFya2VySWNvbiA9IHtcbiAgICAgICAgaWNvbjogTC5pY29uKGljb25PcHRpb25zKVxuICAgIH1cbiAgICB2YXIgbWFya2VyID0gbmV3IEwubWFya2VyKG1hcmtlck9wdGlvbnMuY2VudGVyLCBtYXJrZXJJY29uKVxuICAgIG1hcmtlci5hZGRUbyhtYXApXG4gICAgbWFya2Vyc1tpZF0gPSBtYXJrZXJcbn1cblxuXG5cbi8vIE1lc3NhZ2luZyBTYW1wbGVcblxud2luZG93LmNvbm5lY3RGb3JNZXNzYWdpbmcgPSBmdW5jdGlvbigpIHtcblxuICAgIC8vIENvbm5lY3QgdG8gSW5qYW1cblxuICAgIHdpbmRvdy5pbmphbSA9IG5ldyBJbmphbShjcmVkZW50aWFscylcbiAgICBpbmphbS5jb25uZWN0KClcblxuICAgIGluamFtLm9uKCdzdWJzY3JpYmVkJywgZnVuY3Rpb24gKGNoYW5uZWwpIHtcbiAgICAgICAgTS50b2FzdCh7aHRtbDogJ1N1YnNjcmliZWQgJyArIGNoYW5uZWx9KVxuICAgIH0pXG5cbiAgICBpbmphbS5vbigndW5zdWJzY3JpYmVkJywgZnVuY3Rpb24gKGNoYW5uZWwpIHtcbiAgICAgICAgTS50b2FzdCh7aHRtbDogJ1Vuc3Vic2NyaWJlZCAnICsgY2hhbm5lbH0pXG4gICAgfSlcblxuICAgIGluamFtLm9uKCdyYXdEYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgYWRkTWVzc2FnZShkYXRhKVxuICAgIH0pXG5cbn1cblxuaWYgKCQoJyNib2FyZCcpLmxlbmd0aCkge1xuICAgIGNvbm5lY3RGb3JNZXNzYWdpbmcoKVxufVxuXG5cblxud2luZG93LmFkZE1lc3NhZ2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdmFyIG5hbWUgPSBkYXRhLmNoYW5uZWwgfHwgY3JlZGVudGlhbHMucGh5c2ljYWxfaWRcbiAgICB2YXIgbWVzc2FnZSA9IGRhdGEuZGF0YSB8fCBkYXRhLm1lc3NhZ2UgfHwgZGF0YS5ib2R5XG4gICAgJCgnI2JvYXJkIC5tZXNzYWdlcycpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJtZXNzYWdlLWhvbGRlclwiPjxkaXYgY2xhc3M9XCJtZXNzYWdlXCI+J1xuICAgICAgICArICc8c3BhbiBjbGFzcz1cInRpdGxlXCI+JyArIG5hbWUgKyAnPC9zcGFuPidcbiAgICAgICAgKyAnPHAgY2xhc3M9XCJib2R5XCI+JyArIG1lc3NhZ2UgKyAnPC9wPidcbiAgICArICc8L2Rpdj48L2Rpdj4nKVxufVxuXG5cblxuLy8gU3Vic2NyaWJlXG5cbiQoJy5zdWInKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdmFyIGNoYW5uZWwgPSAkKCcjc3Vic2NyaXB0aW9uJykudmFsKClcbiAgICBpZiAoY2hhbm5lbCAhPSAnJylcbiAgICAgICAgaW5qYW0uc3Vic2NyaWJlKGNoYW5uZWwpXG59KVxuXG5cblxuLy8gVW5zdWJzY3JpYmVcblxuJCgnLnVuc3ViJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHZhciBjaGFubmVsID0gJCgnI3N1YnNjcmlwdGlvbicpLnZhbCgpXG4gICAgaWYgKGNoYW5uZWwgIT0gJycpXG4gICAgICAgIGluamFtLnVuc3Vic2NyaWJlKGNoYW5uZWwpXG59KVxuXG5cblxuLy8gU2VuZCBEYXRhXG5cbiQoJy5zZW5kJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHZhciBkYXRhID0gJCgnI2RhdGEnKS52YWwoKVxuICAgIGlmIChkYXRhICE9ICcnKSB7XG4gICAgICAgIGluamFtLnB1Ymxpc2goZGF0YSlcbiAgICAgICAgYWRkTWVzc2FnZShkYXRhKVxuICAgIH1cbn0pIl19

//# sourceMappingURL=injam.samples.js.map
